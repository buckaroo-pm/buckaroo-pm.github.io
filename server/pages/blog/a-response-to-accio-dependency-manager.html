<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/><link rel="stylesheet" type="text/css" href="/prism.css"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/a0584ae5515792e72ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0584ae5515792e72ab5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9b549cceddc4472f1953.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" as="script"/><link rel="preload" href="/_next/static/chunks/fe8ef1070ee43d1bcce443c3875737aef33fa79f.55d4b28eaf40fcb59af0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/a-response-to-accio-dependency-manager-987ae468216c80dbbd99.js" as="script"/></head><body><div id="__next"><div class="site"><div class="site"><div class="navigation"><div class="view row space-between"><div class="links"><a class="buckaroo" href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="/blog">Blog</a></div><div class="search"><input placeholder="search for a module..." value=""/><button class="fa fa-search fa-large"></button></div><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></div></div><div></div><div style="width:100%;max-height:80vh;overflow:hidden"><img src="https://raw.githubusercontent.com/JamitLabs/Accio/stable/Logo.png" style="width:100%"/></div><div class="banner white"><div class="view"><div><h1>A Response to &quot;Accio Dependency Manager&quot;</h1><div class="post"><p>There is a Medium post making the rounds at the moment about a dream C++ dependency manager. It&#x27;s well written, and definitely worth a read: <a href="https://medium.com/@corentin.jabot/accio-dependency-manager-b1846e1caf76">Accio Dependency Manager</a>.</p><p>As you might imagine, we have spent a <em>lot of time</em> thinking about these issues. Package management is much harder in C++ than in other languages, and the design of Buckaroo went through quite a few iterations! Here&#x27;s our take on the points discussed in &quot;Accio Dependency Manager&quot;.</p><h2>&quot;A sane naming scheme&quot;</h2><p>We agree! That&#x27;s why packages in Buckaroo are one of two kinds:</p><ul><li>A (normalized) URL to their project on GitHub, BitBucket or GitLab. For example: <code>github.com/LoopPerfect/neither</code></li><li>A simple organization and project pair, for ad-hoc dependencies. For example: <code>myorg/myproject</code></li></ul><h2>&quot;A sane versioning scheme&quot;</h2><p>Most Buckaroo packages use <em>sem-ver</em>, as you suggest. However, we think it is also important to be able to depend on versions that are not yet ready to be given a sem-ver. For this reason, packages can also depend directly on Git branches and tags. It is always clear what a version refers to because you can view it in Git.</p><p>The version DSL is <a href="https://github.com/LoopPerfect/buckaroo/wiki/Version-Constraints-DSL">described in our docs</a>.</p><h2>&quot;A Serious dependency Manager&quot;</h2><p>This is a big difference between Buckaroo and other package managers. We don&#x27;t want to host your packages and we don&#x27;t have to. This is because <a href="https://github.com/LoopPerfect/buckaroo/wiki/Git-as-a-Package-Registry">Buckaroo packages live directly in source-control</a>, which is a piece of infrastructure your company already has.</p><p>Furthermore, after the packages have been resolved, we save the exact hashes of each. Future installations will use <em>precisely</em> the same versions you installed the first time.</p><h2>&quot;A source-based dependency manager&quot;</h2><p>We agree in principle, and Buckaroo is <em>source-first</em>.</p><p>But there is one big exception: proprietary packages that are only available in binary form. For these we support packages that download the binaries during the build process. The hash is locked-down and always verified.</p><h2>&quot;But compile times are slow?&quot;</h2><p>Not when you use a build-system with <a href="https://buckbuild.com/concept/what_makes_buck_so_fast.html">hermetically sealed build-steps and network caching</a>. This is the main reason that we use <a href="https://buckbuild.com/">Buck</a> for packages. CMake does not scale well here.</p><h2>&quot;Whatâ€™s a dependency anyway?&quot;</h2><p>A package might be a signed tar-ball, but that is only half the story. We need to give packages sensible names, and that implies a registry of some kind. Buckaroo <a href="https://github.com/LoopPerfect/buckaroo/wiki/Git-as-a-Package-Registry">uses existing Git providers</a> for these names.</p><p>OK, sure, GitHub is a single-point of failure. However, it is a single-point of failure that most developers <em>already have</em>. We think depending on GitHub (or BitBucket, or GitLab) is completely reasonable. For the paranoid, Buckaroo works equally well with a self-hosted Git instance.</p><h2>&quot;Building dependencies&quot;</h2><p>We need a build-system.</p><p>To see why, consider what we need to be able to do to build each package:</p><ul><li>Set the toolchain</li><li>Set any flags for compilation</li><li>Build a shared library (where applicable)</li><li>Build a static library (where applicable)</li><li>Find the headers provided by the library (generated and source-files)</li><li>Figure out which artifacts are required from its dependencies (so we can build those, and only those)</li><li>Link static and shared libraries from its dependencies (where does the package expect them to be?)</li><li>Extract the list of translation-units (generated and source-files) for IDE integration</li><li>Cache the build steps so that from-source builds are practical</li><li>Balance memory and CPU usage across the build so that the whole thing doesn&#x27;t fall over (hello <code>make -j12</code>)</li><li>Ensure unrelated packages don&#x27;t interfere with each-other&#x27;s build process (hermetically sealed builds)</li></ul><p>If you have implemented all of these things, then... you have implemented a build-system. You might call this just a &quot;wrapper&quot; script that defers work to another build-system, but this is analagous to how CMake relies on Make. It&#x27;s another layer of indirection.</p><p>Fixing C++ build-system fragmentation is a huge challenge. Luckily, the vast majority of builds are actually quite simple (Boost can be described entirely with globs, for example). We are going to open-source <a href="https://buildinfer.loopperfect.com/">automated build-system transpilation tools</a> in the very near future. Stay tuned!</p><p>And of course you can always call one build-system from other. It&#x27;s hacky, but in a pinch it can work.</p><h2>Summing Up</h2><h3>&quot;Decentralized&quot;</h3><p>Check!</p><h3>&quot;Have discovery and aggregation features that are or feel centralized, so that end users donâ€™t have to handle URL/URI.&quot;</h3><p>We have GitHub search, but Buckaroo could be improved in this aspect. More tools are coming!</p><h3>&quot;Impervious to the loss of nodes, robust and transparently mirrored&quot;</h3><p>We rely on GitHub, BitBucket and GitLab here. This is a reasonable trade-off given that people already depend on them. Self-hosted Git is fully supported. Buckaroo works offline if your cache is populated.</p><h3>&quot;Based on strong security foundations&quot;</h3><p>We hash everything, and access-control leverages your existing Git key infrastructure. Using Git commits you have full audits of every build.</p><h3>&quot;Orthogonal to build systems&quot;</h3><p>A nice idea, but not really compatible with from-source packages. This approach will lead to a reimplementation of build-system features in meta-meta-build-systems. Build-system transpilation is a better approach in the long run (not to mention the other benefits).</p><h3>&quot;Only handling sources, not binaries&quot;</h3><p>We are source-first, but not handling binaries is impractical. We always check the hash of binaries.</p><h3>&quot;Easy to use for a variety of use cases.&quot;</h3><p>We think so, but would love your feedback! ðŸ¤ </p></div></div></div></div><div class="banner footer"><div class="view column"><div class="actions"><div class="links"><a href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="https://github.com/LoopPerfect/buckaroo" target="_blank">GitHub</a></div><div class="signup"><h1 class="action">Sign up for our Newsletter</h1><div class="info">Get the latest updates about new packages and Buckaroo releases.</div><button>Sign Up</button></div></div><div class="powered"><img src="/LoopPerfectInvertSmall.png"/><span>Powered by LoopPerfect</span></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/a-response-to-accio-dependency-manager","query":{},"buildId":"zumqXaU5fk-68lIEJ-riC","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-617a3a2c770be2525c7f.js"></script><script src="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.9b549cceddc4472f1953.js" async=""></script><script src="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" async=""></script><script src="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" async=""></script><script src="/_next/static/chunks/fe8ef1070ee43d1bcce443c3875737aef33fa79f.55d4b28eaf40fcb59af0.js" async=""></script><script src="/_next/static/chunks/pages/blog/a-response-to-accio-dependency-manager-987ae468216c80dbbd99.js" async=""></script><script src="/_next/static/zumqXaU5fk-68lIEJ-riC/_buildManifest.js" async=""></script><script src="/_next/static/zumqXaU5fk-68lIEJ-riC/_ssgManifest.js" async=""></script></body></html>