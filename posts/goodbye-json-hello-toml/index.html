<!DOCTYPE html>
    <html>
      <head>
        <title>Buckaroo - The C++ Package Manager Goodbye JSON, Hello TOML</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/styles/normalize.min.css"/>
        <link rel="stylesheet" type="text/css" href="/styles.css"/>

        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
        <script type="text/javascript">
          window.rootUrl = ""
        </script>
        <!-- start Mixpanel --><script type="text/javascript">(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^///)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
mixpanel.init("8441e3f6b1aae54160bf747f4f1967d5");</script><!-- end Mixpanel -->
      </head>
      <body>
        <div id="react-root">
        <header id="header"><div class="content"><a id="logo" href="/">Buckaroo</a><nav><ul><li><a href="/blog">Blog</a></li><li><a href="https://github.com/LoopPerfect/buckaroo/wiki">Docs</a></li><li><a href="https://github.com/LoopPerfect/buckaroo">Code</a></li><li><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></li></ul></nav></div></header><div class="page mt-4 ph-1"><div class="content"><h1>Goodbye JSON, Hello TOML</h1><p>üìù¬†<!-- -->Team Buckaroo<!-- -->, <!-- -->11/02/2019<!-- --> <br/>üí¨¬†<a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fbuckaroo.pm%2Fposts%2Fgoodbye-json-hello-toml&amp;t=Goodbye%20JSON%2C%20Hello%20TOML">Discuss on Hacker News</a></p><hr/><div class="post-container"><div><p>For the next version of Buckaroo, we wanted to make improvements to the manifest format. Old versions of Buckaroo used JSON for the manifest and lock-files. This choice was not made very consciously, but at the time it seemed reasonable:</p><ul><li>Yarn and NPM (arguably the most successful language package managers) both use JSON.</li><li>There is a JSON parser for literally every language (and usually <a href="https://github.com/buckaroo-pm/dropbox-json11">more</a> <a href="https://github.com/buckaroo-pm/open-source-parsers-jsoncpp">than</a> <a href="https://github.com/buckaroo-pm/nlohmann-json">one</a>).</li><li>Everyone is familiar with JSON.</li></ul><p>Over time, we&#x27;ve come to regret this decision:</p><ul><li>JSON is tedious to edit by hand, since objects must be closed with curly braces.</li><li>JSON does not support comments.</li><li>Large JSON files can be difficult to read.</li></ul><p>So we started looking for an alternative.</p><p>Amoungst newer package managers (Cargo, Dep), there is a clear winner: TOML. Tom&#x27;s Obvious, Minimal Language (yes, the name is a tad egotistical)...</p><blockquote><p>... aims to be a minimal configuration file format that&#x27;s easy to read due to obvious semantics. TOML is designed to map unambiguously to a hash table. TOML should be easy to parse into data structures in a wide variety of languages.</p></blockquote><p>Already we have found it more convenient when tweaking packages over on <a href="https://github.com/buckaroo-pm">buckaroo-pm</a>. Often the TOML is a bit longer, but it&#x27;s so much easier to read and edit!</p><p>Here&#x27;s a side-by-side comparison:</p><pre><pre lang="json" class="code" style="display:block;overflow-x:auto;padding:0.5em;color:#abb2bf;background:#282c34"><code>{
  <span style="color:#98c379">&quot;name&quot;</span>: <span style="color:#98c379">&quot;satori&quot;</span>,
  <span style="color:#98c379">&quot;dependencies&quot;</span>: {
    <span style="color:#98c379">&quot;libuv/libuv&quot;</span>: <span style="color:#98c379">&quot;1.11.0&quot;</span>,
    <span style="color:#98c379">&quot;google/gtest&quot;</span>: <span style="color:#98c379">&quot;1.8.0&quot;</span>,
    <span style="color:#98c379">&quot;nodejs/http-parser&quot;</span>: <span style="color:#98c379">&quot;2.7.1&quot;</span>,
    <span style="color:#98c379">&quot;madler/zlib&quot;</span>: <span style="color:#98c379">&quot;1.2.11&quot;</span>,
    <span style="color:#98c379">&quot;loopperfect/neither&quot;</span>: <span style="color:#98c379">&quot;0.4.0&quot;</span>,
    <span style="color:#98c379">&quot;loopperfect/r3&quot;</span>: <span style="color:#98c379">&quot;2.0.0&quot;</span>
  }
}</code></pre></pre><p>And the TOML:</p><pre><pre lang="toml" class="code" style="display:block;overflow-x:auto;padding:0.5em;color:#abb2bf;background:#282c34"><code>targets = [ <span style="color:#98c379">&quot;//:satori&quot;</span> ]

[[dependency]]
package = <span style="color:#98c379">&quot;github.com/buckaroo-pm/google-googletest&quot;</span>
version = <span style="color:#98c379">&quot;branch=master&quot;</span>
<span style="color:#c678dd">private</span> = <span style="color:#56b6c2">true</span>

[[dependency]]
package = <span style="color:#98c379">&quot;github.com/buckaroo-pm/libuv&quot;</span>
version = <span style="color:#98c379">&quot;branch=v1.x&quot;</span>

[[dependency]]
package = <span style="color:#98c379">&quot;github.com/buckaroo-pm/madler-zlib&quot;</span>
version = <span style="color:#98c379">&quot;branch=master&quot;</span>

[[dependency]]
package = <span style="color:#98c379">&quot;github.com/buckaroo-pm/nodejs-http-parser&quot;</span>
version = <span style="color:#98c379">&quot;branch=master&quot;</span>

[[dependency]]
package = <span style="color:#98c379">&quot;github.com/loopperfect/neither&quot;</span>
version = <span style="color:#98c379">&quot;branch=master&quot;</span>

[[dependency]]
package = <span style="color:#98c379">&quot;github.com/loopperfect/r3&quot;</span>
version = <span style="color:#98c379">&quot;branch=master&quot;</span></code></pre></pre><p>But the biggest improvement is when fixing a Git merge. Unlike JSON, each line of TOML is largely self-contained. Without having to worry about trailing commas or closing braces, Git will get things right far more often. This is a huge relief when updating lock-files.</p><p>TOML files are use in <a href="https://github.com/LoopPerfect/buckaroo/">Buckaroo</a> v2 upwards. Let us know what you think! üíñ</p></div></div><hr/><p>üí¨¬†<a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fbuckaroo.pm%2Fposts%2Fgoodbye-json-hello-toml&amp;t=Goodbye%20JSON%2C%20Hello%20TOML">Discuss on Hacker News</a></p></div></div>
      </div>
      <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-98721445-1', 'buckaroo.pm');
ga('send', 'pageview');
</script>
      <script type="text/javascript" src="/main.js"></script>

      </body>
    </html>