_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{LPrT:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/goodbye-json-hello-toml",function(){return t("hpsa")}])},hpsa:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return m})),t.d(a,"default",(function(){return i}));var n=t("rePB"),o=t("Ff2n"),c=(t("q1tI"),t("7ljp")),s=t("ZDfL");function p(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function r(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?p(Object(t),!0).forEach((function(a){Object(n.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var m={title:"Goodbye JSON, Hello TOML",created:"2019-02-11T22:00:00.000Z",author:"Team Buckaroo",summary:"For the next version of Buckaroo, we wanted to make improvements to the manifest format. Old versions of Buckaroo used JSON for the manifest and lock-files. This choice was not made very consciously, but at the time it seemed reasonable...",banner:"https://images.unsplash.com/photo-1590918203039-7ce23e042634?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MTI2fHxjbGVhbnxlbnwwfDB8MHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",__resourcePath:"blog/goodbye-json-hello-toml.md",__scans:{},layout:"index"},l={frontMatter:m},N=s.a;function i(e){var a=e.components,t=Object(o.a)(e,["components"]);return Object(c.a)(N,r(r(r({},l),t),{},{components:a,mdxType:"MDXLayout"}),Object(c.a)("p",null,"For the next version of Buckaroo, we wanted to make improvements to the manifest format. Old versions of Buckaroo used JSON for the manifest and lock-files. This choice was not made very consciously, but at the time it seemed reasonable:"),Object(c.a)("ul",null,Object(c.a)("li",{parentName:"ul"},"Yarn and NPM (arguably the most successful language package managers) both use JSON."),Object(c.a)("li",{parentName:"ul"},"There is a JSON parser for literally every language (and usually ",Object(c.a)("a",r({parentName:"li"},{href:"https://github.com/buckaroo-pm/dropbox-json11"}),"more")," ",Object(c.a)("a",r({parentName:"li"},{href:"https://github.com/buckaroo-pm/open-source-parsers-jsoncpp"}),"than")," ",Object(c.a)("a",r({parentName:"li"},{href:"https://github.com/buckaroo-pm/nlohmann-json"}),"one"),")."),Object(c.a)("li",{parentName:"ul"},"Everyone is familiar with JSON.")),Object(c.a)("p",null,"Over time, we've come to regret this decision:"),Object(c.a)("ul",null,Object(c.a)("li",{parentName:"ul"},"JSON is tedious to edit by hand, since objects must be closed with curly braces."),Object(c.a)("li",{parentName:"ul"},"JSON does not support comments."),Object(c.a)("li",{parentName:"ul"},"Large JSON files can be difficult to read.")),Object(c.a)("p",null,"So we started looking for an alternative."),Object(c.a)("p",null,"Amoungst newer package managers (Cargo, Dep), there is a clear winner: TOML. Tom's Obvious, Minimal Language (yes, the name is a tad egotistical)..."),Object(c.a)("blockquote",null,Object(c.a)("p",{parentName:"blockquote"},"... aims to be a minimal configuration file format that's easy to read due to obvious semantics. TOML is designed to map unambiguously to a hash table. TOML should be easy to parse into data structures in a wide variety of languages.")),Object(c.a)("p",null,"Already we have found it more convenient when tweaking packages over on ",Object(c.a)("a",r({parentName:"p"},{href:"https://github.com/buckaroo-pm"}),"buckaroo-pm"),". Often the TOML is a bit longer, but it's so much easier to read and edit!"),Object(c.a)("p",null,"Here's a side-by-side comparison:"),Object(c.a)("pre",r({},{className:"language-json"}),Object(c.a)("code",r({parentName:"pre"},{className:"language-json"}),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"name"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"satori"'),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"dependencies"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"libuv/libuv"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"1.11.0"'),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"google/gtest"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"1.8.0"'),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"nodejs/http-parser"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"2.7.1"'),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"madler/zlib"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"1.2.11"'),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"loopperfect/neither"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"0.4.0"'),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(c.a)("span",r({parentName:"code"},{className:"token property"}),'"loopperfect/r3"'),Object(c.a)("span",r({parentName:"code"},{className:"token operator"}),":")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"2.0.0"'),"\n  ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(c.a)("p",null,"And the TOML:"),Object(c.a)("pre",r({},{className:"language-toml"}),Object(c.a)("code",r({parentName:"pre"},{className:"language-toml"}),Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"targets")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"[")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"//:satori"')," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token table class-name"}),"dependency"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"package")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"github.com/buckaroo-pm/google-googletest"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"version")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"branch=master"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"private")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token boolean"}),"true"),"\n\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token table class-name"}),"dependency"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"package")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"github.com/buckaroo-pm/libuv"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"version")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"branch=v1.x"'),"\n\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token table class-name"}),"dependency"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"package")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"github.com/buckaroo-pm/madler-zlib"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"version")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"branch=master"'),"\n\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token table class-name"}),"dependency"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"package")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"github.com/buckaroo-pm/nodejs-http-parser"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"version")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"branch=master"'),"\n\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token table class-name"}),"dependency"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"package")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"github.com/loopperfect/neither"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"version")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"branch=master"'),"\n\n",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"["),Object(c.a)("span",r({parentName:"code"},{className:"token table class-name"}),"dependency"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"package")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"github.com/loopperfect/r3"'),"\n",Object(c.a)("span",r({parentName:"code"},{className:"token key property"}),"version")," ",Object(c.a)("span",r({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(c.a)("span",r({parentName:"code"},{className:"token string"}),'"branch=master"'),"\n")),Object(c.a)("p",null,"But the biggest improvement is when fixing a Git merge. Unlike JSON, each line of TOML is largely self-contained. Without having to worry about trailing commas or closing braces, Git will get things right far more often. This is a huge relief when updating lock-files."),Object(c.a)("p",null,"TOML files are use in ",Object(c.a)("a",r({parentName:"p"},{href:"https://github.com/LoopPerfect/buckaroo/"}),"Buckaroo")," v2 upwards. Let us know what you think! \ud83d\udc96"))}i.isMDXComponent=!0}},[["LPrT",0,2,1,3,4]]]);