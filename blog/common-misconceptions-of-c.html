<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/><link rel="stylesheet" type="text/css" href="/prism.css"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/a0584ae5515792e72ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0584ae5515792e72ab5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9b549cceddc4472f1953.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" as="script"/><link rel="preload" href="/_next/static/chunks/fe8ef1070ee43d1bcce443c3875737aef33fa79f.55d4b28eaf40fcb59af0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/common-misconceptions-of-c-a3a09e8c1c97cae832c6.js" as="script"/></head><body><div id="__next"><div class="site"><div class="site"><div class="navigation"><div class="view row space-between"><div class="links"><a class="buckaroo" href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="/blog">Blog</a></div><div class="search"><input placeholder="search for a module..." value=""/><button class="fa fa-search fa-large"></button></div><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></div></div><div></div><div style="width:100%;max-height:80vh;overflow:hidden"><img src="/posts/common-missconceptions.jpeg" style="width:100%"/></div><div class="banner white"><div class="view"><div><h1>Common Misconceptions of C++</h1><div class="post"><p>C++ has evolved massively in recent years and yet it is still perceived by many as the language that it was back in the early 2000s. Let’s dispel some myths…</p><h3>C++ is a Dying Language</h3><p>C++ is actually growing! Even as computers becomes faster, our demands of what we want to do with them are always increasing. C++ is one of the few languages that allows us to maximize the potential of our hardware.</p><p>Stroustrup’s talk from CPP Con shows C++ on a growth trajectory.</p><center><iframe width="560" height="315" src="https://www.youtube.com/embed/_wzc7a3McOs" frameborder="0"></iframe></center><h3>C++ is verbose and unproductive</h3><p>With the new auto keyword and lambda syntax, C++ can be correct, fast <em>and</em> concise.</p><p>For example, compare these two programs in JavaScript and C++ 14:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">length</span> <span class="token operator">=</span> <span class="token parameter">p</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sqrt</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">*</span> p<span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">+</span> p<span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">*</span> p<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> points <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> p <span class="token keyword">of</span> points<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  total <span class="token operator">+=</span> <span class="token function">length</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre class="language-cpp"><code class="language-cpp">
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cmath&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> x<span class="token punctuation">;</span>
  <span class="token keyword">int</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">float</span> <span class="token function">length</span><span class="token punctuation">(</span>Point p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">hypot</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token punctuation">{</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">float</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> points<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    total <span class="token operator">+=</span> <span class="token function">length</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> total <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Okay, so the C++ one is marginally longer, but think about what you get in return:</p><ul><li><p>Strong type system and compile-time type checking</p></li><li><p>No run-time dependency like Node.js</p></li><li><p><em>Fraction</em> of the execution time</p></li></ul><pre><code>$ time node index.js 
34

real    0m0.035s
user    0m0.024s
sys 0m0.012s


$ time ./app
34

real    0m0.001s
user    0m0.001s
sys 0m0.000s
</code></pre><h3>C is a subset of C++</h3><p>Whilst it is often possible to include C code in C++, this is not always the case. The following snippets are valid C, but not valid C++:</p><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">int</span> x<span class="token punctuation">;</span>
<span class="token keyword">int</span> x<span class="token punctuation">;</span> <span class="token comment">// error! x is already defined</span>
</code></pre><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">b</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// Error! </span>
</code></pre><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">auto</span> x<span class="token punctuation">;</span> <span class="token comment">// Error! x must be given a type</span>
</code></pre><h3>You need to know C in order to understand C++</h3><p>C++ is its own language with its own idioms and best-practices. If you only learn C++ as an extension of C, then you will not learn these patterns and probably write error-prone code!</p><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// C style</span>
<span class="token punctuation">{</span>
  Foo<span class="token operator">*</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  foo<span class="token operator">-&gt;</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> foo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Kate Gregory did an excellent talk about this that is well worth your time.</p><center><iframe width="560" height="315" src="https://www.youtube.com/embed/O50qTuM5OT0" frameborder="0"></iframe></center><p>How many developers have had a negative experience of C++ because they were taught to use it like C?</p><h3>C is faster than C++</h3><p>C++ allows you to write abstractions that compile-down to equivalent C. This means that with some care, a C++ program will be at least as fast as a C one. The advantage C++ gives over C is that it enables us to also build reusable abstractions with templates, OOP and functional composition.</p><p>C++ gives you the tools to encode your intentions in the type-system. This allows the compiler to generate optimal binaries from your code.</p><h3>C++ is not cross-platform</h3><p>C++ <em>the language</em> is completely cross-platform. The reason that many claim C++ is not is that the standard library does not provide that platform abstractions for filesystem, network access and so on that languages like Java do.</p><p>Instead, C++ requires you to use a library, or write your own. This might seem painful (although much less so with a <a href="https://github.com/loopperfect/buckaroo">package manager</a>!), but it is actually a good thing.</p><ol><li><p>To target a new platform, compiler implementers have less to implement.</p></li><li><p>Platform targets with limited capabilities can support C++. What would happen if the standard required some feature that a platform cannot provide due to hardware limitations?</p></li><li><p>You are free to choose the best library for your application. It is not one size fits all.</p></li></ol><h3>apt-get is C++’s package manager</h3><p>We covered this is detail in a <a href="https://hackernoon.com/approaches-to-c-dependency-management-or-why-we-built-buckaroo-26049d4646e7">previous article</a>, but the short version is:</p><ul><li><p>apt-get only works on Debian variants</p></li><li><p>apt-get mutates your system, which is inconvenient when switching between projects</p></li><li><p>apt-get is not a good source for new and experimental versions of libraries</p></li></ul><h3>C++ is all about classes</h3><p>In the early days, the big difference between C and C++ was that C++ provides classes. This is still true, but classes are no longer the dominant feature of C++. In modern C++, the focus is on RAII patterns. C++ is not really about classes, it is about deterministic resource management.</p><h3>Garbage collection is mandatory for reliable software, thus C++ is bad for large projects</h3><p>The C++ approach to resource management (of which memory is just one kind) is to use RAII patterns rather than a centralized garbage collector.</p><p>This is a bit like the “using” pattern seen in other languages. For instance, in C# we might write:</p><pre class="language-csharp"><code class="language-csharp">
<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> myRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  myRes<span class="token punctuation">.</span><span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>In C++, the disposal should be done by the <em>destructor</em>:</p><pre class="language-cpp"><code class="language-cpp"><span class="token punctuation">{</span>
  <span class="token keyword">auto</span> myRes <span class="token operator">=</span> std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>MyResource<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  myRes<span class="token operator">-&gt;</span><span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// myRes is cleaned up</span>
</code></pre><p>Notice that this is actually less verbose; plus, we can use the same pattern for memory <em>and</em> other resources.</p><p>But there is another advantage: the order and timing of object disposal is determined by the scope in which they are used. This makes it possible to control the garbage collection process at a function-level, whereas most garbage-collected languages only allow (<em>limited</em>) control at a global level.</p><p>This is an even greater benefit in large projects, since it prevents one module from introducing garbage-collection latency into another. This is the reason C++ is the language of choice for game development and audio processing.</p><h3>For performance, you must write low-level code</h3><p>The C++ compilers do an amazing job of optimizing high-level code. This allows you to avoid writing at a low-level, whilst still getting great performance. Sometimes the performance is even better, since the compiler can perform optimizations that would be too tricky to write by hand.</p><p>Our favourite example of this is using <a href="https://github.com/LoopPerfect/conduit">Conduit</a>, our new C++ sequence library. This program computes the sum of various Fibonacci numbers using lambdas, coroutines and so on:</p><pre class="language-cpp"><code class="language-cpp">
<span class="token keyword">auto</span> fibonacci <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> seq<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">auto</span> a <span class="token operator">=</span> <span class="token number">0ll</span><span class="token punctuation">;</span> 
  <span class="token keyword">auto</span> b <span class="token operator">=</span> <span class="token number">1ll</span><span class="token punctuation">;</span>
  
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">co_yield</span> a<span class="token punctuation">;</span>
    
    <span class="token function">tie</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=</span> tuple<span class="token punctuation">{</span>a <span class="token operator">+</span> b<span class="token punctuation">,</span> a<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">long</span> N <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">auto</span> n <span class="token operator">=</span> N<span class="token punctuation">;</span>
  <span class="token keyword">auto</span> items <span class="token operator">=</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token operator">&gt;&gt;</span> <span class="token function">drop</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token operator">&gt;&gt;</span> <span class="token function">take</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">+=</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>And yet it compiles to just:</p><pre class="language-nasm"><code class="language-nasm"><span class="token label function">main:</span> # @main
  mov <span class="token register variable">eax</span>, <span class="token number">511172301</span>
  ret
</code></pre><p>This means the optimizer was able to compute 60 Fibonacci numbers and sum the last 50 at compile-time!</p><h2>Since You’re Here…</h2><p>We recently announced <a href="https://buildinfer.loopperfect.com/">BuildInfer</a>, a new tool to optimize your C/C++ build scripts. <a href="https://buildinfer.loopperfect.com/">Take a look</a>!</p><p><img src="https://cdn-images-1.medium.com/max/2000/1*YZgG5MjrKJ9nV_a7bJtHuA.png"/></p></div></div></div></div><div class="banner footer"><div class="view column"><div class="actions"><div class="links"><a href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="https://github.com/LoopPerfect/buckaroo" target="_blank">GitHub</a></div><div class="signup"><h1 class="action">Sign up for our Newsletter</h1><div class="info">Get the latest updates about new packages and Buckaroo releases.</div><button>Sign Up</button></div></div><div class="powered"><img src="/LoopPerfectInvertSmall.png"/><span>Powered by LoopPerfect</span></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/common-misconceptions-of-c","query":{},"buildId":"XEnVUsOG7VkTdg59Wro6f","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-617a3a2c770be2525c7f.js"></script><script src="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.9b549cceddc4472f1953.js" async=""></script><script src="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" async=""></script><script src="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" async=""></script><script src="/_next/static/chunks/fe8ef1070ee43d1bcce443c3875737aef33fa79f.55d4b28eaf40fcb59af0.js" async=""></script><script src="/_next/static/chunks/pages/blog/common-misconceptions-of-c-a3a09e8c1c97cae832c6.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_buildManifest.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_ssgManifest.js" async=""></script></body></html>