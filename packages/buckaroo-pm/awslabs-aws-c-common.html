<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a0584ae5515792e72ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0584ae5515792e72ab5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9b549cceddc4472f1953.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" as="script"/></head><body><div id="__next"><div class="site"><div class="navigation"><div class="view row space-between"><div class="links"><a class="buckaroo" href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="/blog">Blog</a></div><div class="search"><input placeholder="search for a module..." value=""/><button class="fa fa-search fa-large"></button></div><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></div></div><div></div><div class="banner"><div style="display:flex"><div class="package"><img src="/packages/buckaroo-pm/awslabs-aws-c-common/logo.png"/></div><div><h1>buckaroo-pm/awslabs-aws-c-common</h1><div style="max-width:600px">Core c99 package for AWS SDK for C. Includes cross-platform primitives, configuration, data structures, and error handling.</div><br/><div><b>153</b></div></div></div><div style="display:inline-flex;flex-flow:row wrap"><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">hacktoberfest</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">aws-sdk</span></div></div><div style="display:flex;width:100%;justify-content:center;margin-top:-2.7em"><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:white;color:black;border:solid 1px #fff">ReadMe</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Buck</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Manifest</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Dependencies</div></div><div class="banner white"><div class="view column"><h2>ReadMe</h2><h2>AWS C Common</h2><p><a href="https://github.com/awslabs/aws-c-common/blob/master/LICENSE"><img src="https://img.shields.io/github/license/awslabs/aws-c-common.svg" alt="GitHub"/></a>
<a href="https://lgtm.com/projects/g/awslabs/aws-c-common/context:cpp"><img src="https://img.shields.io/lgtm/grade/cpp/g/awslabs/aws-c-common.svg?logo=lgtm&amp;logoWidth=18" alt="Language grade: C/C++"/></a>
<a href="https://lgtm.com/projects/g/awslabs/aws-c-common/alerts/"><img src="https://img.shields.io/lgtm/alerts/g/awslabs/aws-c-common.svg?logo=lgtm&amp;logoWidth=18" alt="Total alerts"/></a></p><p>Core c99 package for AWS SDK for C. Includes cross-platform primitives, configuration, data structures, and error handling.</p><h2>License</h2><p>This library is licensed under the Apache 2.0 License.</p><h2>Usage</h2><h3>Building</h3><p>aws-c-common uses CMake for setting up build environments. This library has no non-kernel dependencies so the build is quite
simple.</p><p>For example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>git clone git@github.com:awslabs/aws-c-common.git aws-c-common
</span>mkdir aws-c-common-build
<!-- -->cd aws-c-common-build
<!-- -->cmake ../aws-c-common
<!-- -->make -j 12
<!-- -->make test
<!-- -->sudo make install
</code></pre><p>Keep in mind that CMake supports multiple build systems, so for each platform you can pass your own build system
as the <code>-G</code> option. For example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>cmake -GNinja ../aws-c-common
</span>ninja build
<!-- -->ninja test
<!-- -->sudo ninja install
</code></pre><p>Or on windows,</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>cmake -G &quot;Visual Studio 14 2015 Win64&quot; ../aws-c-common
</span>msbuild.exe ALL_BUILD.vcproj
</code></pre><h3>CMake Options</h3><ul><li>-DCMAKE_CLANG_TIDY=/path/to/clang-tidy (or just clang-tidy or clang-tidy-7.0 if it is in your PATH) - Runs clang-tidy as part of your build.</li><li>-DENABLE_SANITIZERS=ON - Enables gcc/clang sanitizers, by default this adds -fsanitizer=address,undefined to the compile flags for projects that call aws_add_sanitizers.</li><li>-DENABLE_FUZZ_TESTS=ON - Includes fuzz tests in the unit test suite. Off by default, because fuzz tests can take a long time. Set -DFUZZ_TESTS_MAX_TIME=N to determine how long to run each fuzz test (default 60s).</li><li>-DCMAKE_INSTALL_PREFIX=/path/to/install - Standard way of installing to a user defined path. If specified when configuring aws-c-common, ensure the same prefix is specified when configuring other aws-c-* SDKs.</li></ul><h3>API style and conventions</h3><p>Every API has a specific set of styles and conventions. We&#x27;ll outline them here. These conventions are followed in every
library in the AWS C SDK ecosystem.</p><h4>Error handling</h4><p>Every function that returns an <code>int</code> type, returns <code>AWS_OP_SUCCESS</code> ( 0 ) or <code>AWS_OP_ERR</code> (-1) on failure. To retrieve
the error code, use the function <code>aws_last_error()</code>. Each error code also has a corresponding error string that can be
accessed via the <code>aws_error_str()</code> function.</p><p>In addition, you can install both a global and a thread local error handler by using the <code>aws_set_global_error_handler_fn()</code>
and <code>aws_set_thread_local_error_handler_fn()</code> functions.</p><p>All error functions are in the <code>include/aws/common/error.h</code> header file.</p><h4>Naming</h4><p>Any function that allocates and initializes an object will be suffixed with <code>new</code>. Similarly, these objects will always
have a corresponding function with a <code>destroy</code> suffix. The <code>new</code> functions will return the allocated object
on success and <code>NULL</code> on failure. To respond to the error, call <code>aws_last_error()</code>. If several <code>new</code> or <code>destroy</code>
functions are available, the variants should be named like <code>new_x</code> or <code>destroy_x</code> (e.g. <code>new_copy</code> or <code>destroy_secure</code>).</p><p>Any function that initializes an existing object will be suffixed with <code>init</code>. These objects will have a corresponding
<code>clean_up</code> function if necessary. In these cases, you are responsible for making the decisions for how your object is
allocated. The <code>init</code> functions return <code>AWS_OP_SUCCESS</code> ( 0 ) or <code>AWS_OP_ERR</code> (-1) on failure. If several <code>init</code> or
<code>clean_up</code> functions are available, they should be named like <code>init_x</code> or <code>clean_up_x</code> (e.g. <code>init_static</code> or
<code>clean_up_secure</code>).</p><h2>Contributing</h2><p>If you are contributing to this code-base, first off, THANK YOU!. There are a few things to keep in mind to minimize the
pull request turn around time.</p><h3>Coding &quot;guidelines&quot;</h3><p>These &quot;guidelines&quot; are followed in every library in the AWS C SDK ecosystem.</p><h4>Memory Management</h4><ul><li>All APIs that need to be able to allocate memory, must take an instance of <code>aws_allocator</code> and use that. No <code>malloc()</code> or</li></ul><p><code>free()</code> calls should be made directly.</p><ul><li>If an API does not allocate the memory, it does not free it. All allocations and deallocations should take place at the same level.</li></ul><p>For example, if a user allocates memory, the user is responsible for freeing it. There will inevitably be a few exceptions to this
rule, but they will need significant justification to make it through the code-review.</p><ul><li>All functions that allocate memory must raise an <code>AWS_ERROR_OOM</code> error code upon allocation failures. If it is a <code>new()</code> function</li></ul><p>it should return NULL. If it is an <code>init()</code> function, it should return <code>AWS_OP_ERR</code>.</p><h4>Threading</h4><ul><li>Occasionally a thread is necessary. In those cases, prefer for memory not to be shared between threads. If memory must cross</li></ul><p>a thread barrier it should be a complete ownership hand-off. Bias towards, &quot;if I need a mutex, I&#x27;m doing it wrong&quot;.</p><ul><li>Do not sleep or block .... ever .... under any circumstances, in non-test-code.</li><li>Do not expose blocking APIs.</li></ul><h3>Error Handling</h3><ul><li>For APIs returning an <code>int</code> error code. The only acceptable return types are <code>AWS_OP_SUCCESS</code> and <code>AWS_OP_ERR</code>. Before</li></ul><p>returning control to the caller, if you have an error to raise, use the <code>aws_raise_error()</code> function.</p><ul><li>For APIs returning an allocated instance of an object, return the memory on success, and <code>NULL</code> on failure. Before</li></ul><p>returning control to the caller, if you have an error to raise, use the <code>aws_raise_error()</code> function.</p><h4>Error Codes</h4><p>The error handling infrastructure is designed to support multiple libraries. For this to work, AWS maintained libraries
have pre-slotted error codes for each library. The currently allocated error ranges are:</p><table><thead><tr><th>Range</th><th>Library Name</th></tr></thead><tbody><tr><td>[0x0000, 0x0400)</td><td>aws-c-common</td></tr><tr><td>[0x0400, 0x0800)</td><td>aws-c-io</td></tr><tr><td>[0x0800, 0x0C00)</td><td>aws-c-http</td></tr><tr><td>[0x0C00, 0x1000)</td><td>aws-c-compression</td></tr><tr><td>[0x1000, 0x1400)</td><td>aws-c-eventstream</td></tr><tr><td>[0x1400, 0x1800)</td><td>aws-c-mqtt</td></tr><tr><td>[0x1800, 0x1C00)</td><td>(reserved for future project)</td></tr><tr><td>[0x1C00, 0x2000)</td><td>(reserved for future project)</td></tr><tr><td>[0x2000, 0x2400)</td><td>(reserved for future project)</td></tr><tr><td>[0x2400, 0x2800)</td><td>(reserved for future project)</td></tr><tr><td>[0x2800, 0x2C00)</td><td>(reserved for future project)</td></tr><tr><td>[0x2C00, 0x3000)</td><td>(reserved for future project)</td></tr><tr><td>[0x3000, 0x3400)</td><td>(reserved for future project)</td></tr><tr><td>[0x3400, 0x3800)</td><td>(reserved for future project)</td></tr><tr><td>[0x3800, 0x3C00)</td><td>(reserved for future project)</td></tr><tr><td>[0x3C00, 0x4000)</td><td>(reserved for future project)</td></tr></tbody></table><p>Each library should begin its error codes at the beginning of its range and follow in sequence (don&#x27;t skip codes). Upon
adding an AWS maintained library, an error code range must be approved and added to the above table.</p><h3>Testing</h3><p>We have a high bar for test coverage, and PRs fixing bugs or introducing new functionality need to have tests before
they will be accepted. A couple of tips:</p><h4>Aws Test Harness</h4><p>We provide a test harness for writing unit tests. This includes an allocator that will fail your test if you have any
memory leaks, as well as some <code>ASSERT</code> macros. To write a test:</p><ul><li>Create a *.c test file in the tests directory of the project.</li><li>Implement one or more tests with the signature <code>int test_case_name(struct aws_allocator *, void *ctx)</code></li><li>Use the <code>AWS_TEST_CASE</code> macro to declare the test.</li><li>Include your test in the <code>tests/main.c</code> file.</li><li>Include yur test in the <code>tests/CMakeLists.txt</code> file.</li></ul><h3>Coding Style</h3><ul><li>No Tabs.</li><li>Indent is 4 spaces.</li><li>K &amp; R style for braces.</li><li>Space after if, before the <code>(</code>.</li><li><code>else</code> and <code>else if</code> stay on the same line as the closing brace.</li></ul><p>Example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>if (condition) {
</span>    do_something();
<!-- -->} else {
<!-- -->    do_something_else();
<!-- -->}
</code></pre><ul><li>Avoid C99 features in header files. For some types such as bool, uint32_t etc..., these are defined if not available for the language</li></ul><p>standard being used in <code>aws/common/common.h</code>, so feel free to use them.</p><ul><li>For C++ compatibility, don&#x27;t put const members in structs.</li><li>Avoid C++ style comments e.g. <code>//</code>.</li><li>All public API functions need C++ guards and Windows dll semantics.</li><li>Use Unix line endings.</li><li>Where implementation hiding is desired for either ABI or runtime polymorphism reasons, use the <code>void *impl</code> pattern. v-tables</li></ul><p>should be the last member in the struct.</p><ul><li>For #ifdef, put a # as the first character on the line and then indent the compilation branches.</li></ul><p>Example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>#ifdef FOO
</span>    do_something();
<!-- -->
<!-- -->#   ifdef BAR
<!-- -->    do_something_else();
<!-- -->#   endif
<!-- -->#endif
</code></pre><ul><li>For all error code names with the exception of aws-c-common, use <code>AWS_ERROR_&lt;lib name&gt;_&lt;error name&gt;</code>.</li><li>All error strings should be written using correct English grammar.</li><li>SNAKE_UPPER_CASE constants, macros, and enum members.</li><li>snake_lower_case everything else.</li><li><code>static</code> (local file scope) variables that are not <code>const</code> are prefixed by <code>s_</code> and lower snake case.</li><li>Global variables not prefixed as <code>const</code> are prefixed by <code>g_</code> and lower snake case.</li><li>Thread local variables are prefixed as <code>tl_</code> and lower snake case.</li><li>Macros and <code>const</code> variables are upper snake case.</li><li>For constants, prefer anonymous enums.</li><li>Don&#x27;t typedef structs. It breaks forward declaration ability.</li><li>Don&#x27;t typedef enums. It breaks forward declaration ability.</li><li>typedef function definitions for use as function pointers as values and suffixed with _fn.</li></ul><p>Example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>typedef int(fn_name_fn)(void *);</span></code></pre><p>Not:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>typedef int(*fn_name_fn)(void *);</span></code></pre><ul><li>Every source and header file must have a copyright header (The standard AWS one for apache 2).</li><li>Use standard include guards (e.g. #IFNDEF HEADER_NAME #define HEADER_NAME etc...).</li><li>Include order should be:
the header for the translation unit for the .c file
newline
header files in a directory in alphabetical order
newline
header files not in a directory (system and stdlib headers)</li><li>Platform specifics should be handled in c files and partitioned by directory.</li><li>Do not use <code>extern inline</code>. It&#x27;s too unpredictable between compiler versions and language standards.</li><li>Namespace all definitions in header files with <code>aws_&lt;libname&gt;?_&lt;api&gt;_&lt;what it does&gt;</code>. Lib name is</li></ul><p>not always required if a conflict is not likely and it provides better ergonomics.</p><ul><li><code>init</code>, <code>clean_up</code>, <code>new</code>, <code>destroy</code> are suffixed to the function names for their object.</li></ul><p>Example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>AWS_COMMON_API</span></code></pre><p>int aws_module_init(aws_module_t *module);
AWS_COMMON_API
void aws_module_clean_up(aws_module_t *module);
AWS_COMMON_API
aws_module_t *aws_module_new(aws_allocator_t *allocator);
AWS_COMMON_API
void aws_module_destroy(aws_module_t *module);</p><ul><li>Avoid c-strings, and don&#x27;t write code that depends on <code>NULL</code> terminators. Expose <code>struct aws_byte_buf</code> APIs</li></ul><p>and let the user figure it out.</p><ul><li>There is only one valid character encoding-- UTF-8. Try not to ever need to care about character encodings, but</li></ul><p>where you do, the working assumption should always be UTF-8 unless it&#x27;s something we don&#x27;t get a choice in (e.g. a protocol
explicitly mandates a character set).</p><ul><li>If you are adding/using a compiler specific keyword, macro, or intrinsic, hide it behind a platform independent macro</li></ul><p>definition. This mainly applies to header files. Obviously, if you are writing a file that will only be built on a certain
platform, you have more liberty on this.</p></div></div><div class="banner footer"><div class="view column"><div class="actions"><div class="links"><a href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="https://github.com/LoopPerfect/buckaroo" target="_blank">GitHub</a></div><div class="signup"><h1 class="action">Sign up for our Newsletter</h1><div class="info">Get the latest updates about new packages and Buckaroo releases.</div><button>Sign Up</button></div></div><div class="powered"><img src="/LoopPerfectInvertSmall.png"/><span>Powered by LoopPerfect</span></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"packageName":"buckaroo-pm/awslabs-aws-c-common","name":"awslabs/aws-c-common","licence":"Apache-2.0","description":"Core c99 package for AWS SDK for C. Includes cross-platform primitives, configuration, data structures, and error handling.","readme":"## AWS C Common\n\n\n[![GitHub](https://img.shields.io/github/license/awslabs/aws-c-common.svg)](https://github.com/awslabs/aws-c-common/blob/master/LICENSE)\n[![Language grade: C/C++](https://img.shields.io/lgtm/grade/cpp/g/awslabs/aws-c-common.svg?logo=lgtm\u0026logoWidth=18)](https://lgtm.com/projects/g/awslabs/aws-c-common/context:cpp)\n[![Total alerts](https://img.shields.io/lgtm/alerts/g/awslabs/aws-c-common.svg?logo=lgtm\u0026logoWidth=18)](https://lgtm.com/projects/g/awslabs/aws-c-common/alerts/)\n\nCore c99 package for AWS SDK for C. Includes cross-platform primitives, configuration, data structures, and error handling.\n\n## License\n\nThis library is licensed under the Apache 2.0 License.\n\n## Usage\n### Building\naws-c-common uses CMake for setting up build environments. This library has no non-kernel dependencies so the build is quite\nsimple.\n\nFor example:\n\n    git clone git@github.com:awslabs/aws-c-common.git aws-c-common\n    mkdir aws-c-common-build\n    cd aws-c-common-build\n    cmake ../aws-c-common\n    make -j 12\n    make test\n    sudo make install\n\nKeep in mind that CMake supports multiple build systems, so for each platform you can pass your own build system\nas the `-G` option. For example:\n\n    cmake -GNinja ../aws-c-common\n    ninja build\n    ninja test\n    sudo ninja install\n\nOr on windows,\n\n    cmake -G \"Visual Studio 14 2015 Win64\" ../aws-c-common\n    msbuild.exe ALL_BUILD.vcproj\n\n### CMake Options\n* -DCMAKE_CLANG_TIDY=/path/to/clang-tidy (or just clang-tidy or clang-tidy-7.0 if it is in your PATH) - Runs clang-tidy as part of your build.\n* -DENABLE_SANITIZERS=ON - Enables gcc/clang sanitizers, by default this adds -fsanitizer=address,undefined to the compile flags for projects that call aws_add_sanitizers.\n* -DENABLE_FUZZ_TESTS=ON - Includes fuzz tests in the unit test suite. Off by default, because fuzz tests can take a long time. Set -DFUZZ_TESTS_MAX_TIME=N to determine how long to run each fuzz test (default 60s).\n* -DCMAKE_INSTALL_PREFIX=/path/to/install - Standard way of installing to a user defined path. If specified when configuring aws-c-common, ensure the same prefix is specified when configuring other aws-c-* SDKs.\n\n### API style and conventions\nEvery API has a specific set of styles and conventions. We'll outline them here. These conventions are followed in every\nlibrary in the AWS C SDK ecosystem.\n\n#### Error handling\nEvery function that returns an `int` type, returns `AWS_OP_SUCCESS` ( 0 ) or `AWS_OP_ERR` (-1) on failure. To retrieve\nthe error code, use the function `aws_last_error()`. Each error code also has a corresponding error string that can be\naccessed via the `aws_error_str()` function.\n\nIn addition, you can install both a global and a thread local error handler by using the `aws_set_global_error_handler_fn()`\nand `aws_set_thread_local_error_handler_fn()` functions.\n\nAll error functions are in the `include/aws/common/error.h` header file.\n\n#### Naming\nAny function that allocates and initializes an object will be suffixed with `new`. Similarly, these objects will always\nhave a corresponding function with a `destroy` suffix. The `new` functions will return the allocated object\non success and `NULL` on failure. To respond to the error, call `aws_last_error()`. If several `new` or `destroy`\nfunctions are available, the variants should be named like `new_x` or `destroy_x` (e.g. `new_copy` or `destroy_secure`).\n\nAny function that initializes an existing object will be suffixed with `init`. These objects will have a corresponding\n`clean_up` function if necessary. In these cases, you are responsible for making the decisions for how your object is\nallocated. The `init` functions return `AWS_OP_SUCCESS` ( 0 ) or `AWS_OP_ERR` (-1) on failure. If several `init` or\n`clean_up` functions are available, they should be named like `init_x` or `clean_up_x` (e.g. `init_static` or\n`clean_up_secure`).\n\n## Contributing\n\nIf you are contributing to this code-base, first off, THANK YOU!. There are a few things to keep in mind to minimize the\npull request turn around time.\n\n### Coding \"guidelines\"\nThese \"guidelines\" are followed in every library in the AWS C SDK ecosystem.\n\n#### Memory Management\n* All APIs that need to be able to allocate memory, must take an instance of `aws_allocator` and use that. No `malloc()` or\n`free()` calls should be made directly.\n* If an API does not allocate the memory, it does not free it. All allocations and deallocations should take place at the same level.\nFor example, if a user allocates memory, the user is responsible for freeing it. There will inevitably be a few exceptions to this\nrule, but they will need significant justification to make it through the code-review.\n* All functions that allocate memory must raise an `AWS_ERROR_OOM` error code upon allocation failures. If it is a `new()` function\nit should return NULL. If it is an `init()` function, it should return `AWS_OP_ERR`.\n\n#### Threading\n* Occasionally a thread is necessary. In those cases, prefer for memory not to be shared between threads. If memory must cross\na thread barrier it should be a complete ownership hand-off. Bias towards, \"if I need a mutex, I'm doing it wrong\".\n* Do not sleep or block .... ever .... under any circumstances, in non-test-code.\n* Do not expose blocking APIs.\n\n### Error Handling\n* For APIs returning an `int` error code. The only acceptable return types are `AWS_OP_SUCCESS` and `AWS_OP_ERR`. Before\nreturning control to the caller, if you have an error to raise, use the `aws_raise_error()` function.\n* For APIs returning an allocated instance of an object, return the memory on success, and `NULL` on failure. Before\nreturning control to the caller, if you have an error to raise, use the `aws_raise_error()` function.\n\n#### Error Codes\nThe error handling infrastructure is designed to support multiple libraries. For this to work, AWS maintained libraries\nhave pre-slotted error codes for each library. The currently allocated error ranges are:\n\n| Range | Library Name |\n| --- | --- |\n| [0x0000, 0x0400) | aws-c-common |\n| [0x0400, 0x0800) | aws-c-io |\n| [0x0800, 0x0C00) | aws-c-http |\n| [0x0C00, 0x1000) | aws-c-compression |\n| [0x1000, 0x1400) | aws-c-eventstream |\n| [0x1400, 0x1800) | aws-c-mqtt |\n| [0x1800, 0x1C00) | (reserved for future project) |\n| [0x1C00, 0x2000) | (reserved for future project) |\n| [0x2000, 0x2400) | (reserved for future project) |\n| [0x2400, 0x2800) | (reserved for future project) |\n| [0x2800, 0x2C00) | (reserved for future project) |\n| [0x2C00, 0x3000) | (reserved for future project) |\n| [0x3000, 0x3400) | (reserved for future project) |\n| [0x3400, 0x3800) | (reserved for future project) |\n| [0x3800, 0x3C00) | (reserved for future project) |\n| [0x3C00, 0x4000) | (reserved for future project) |\n\nEach library should begin its error codes at the beginning of its range and follow in sequence (don't skip codes). Upon\nadding an AWS maintained library, an error code range must be approved and added to the above table.\n\n### Testing\nWe have a high bar for test coverage, and PRs fixing bugs or introducing new functionality need to have tests before\nthey will be accepted. A couple of tips:\n\n#### Aws Test Harness\nWe provide a test harness for writing unit tests. This includes an allocator that will fail your test if you have any\nmemory leaks, as well as some `ASSERT` macros. To write a test:\n\n* Create a *.c test file in the tests directory of the project.\n* Implement one or more tests with the signature `int test_case_name(struct aws_allocator *, void *ctx)`\n* Use the `AWS_TEST_CASE` macro to declare the test.\n* Include your test in the `tests/main.c` file.\n* Include yur test in the `tests/CMakeLists.txt` file.\n\n### Coding Style\n* No Tabs.\n* Indent is 4 spaces.\n* K \u0026 R style for braces.\n* Space after if, before the `(`.\n* `else` and `else if` stay on the same line as the closing brace.\n\nExample:\n\n    if (condition) {\n        do_something();\n    } else {\n        do_something_else();\n    }\n* Avoid C99 features in header files. For some types such as bool, uint32_t etc..., these are defined if not available for the language\nstandard being used in `aws/common/common.h`, so feel free to use them.\n* For C++ compatibility, don't put const members in structs.\n* Avoid C++ style comments e.g. `//`.\n* All public API functions need C++ guards and Windows dll semantics.\n* Use Unix line endings.\n* Where implementation hiding is desired for either ABI or runtime polymorphism reasons, use the `void *impl` pattern. v-tables\n should be the last member in the struct.\n* For #ifdef, put a # as the first character on the line and then indent the compilation branches.\n\nExample:\n\n\n    #ifdef FOO\n        do_something();\n\n    #   ifdef BAR\n        do_something_else();\n    #   endif\n    #endif\n\n\n* For all error code names with the exception of aws-c-common, use `AWS_ERROR_\u003clib name\u003e_\u003cerror name\u003e`.\n* All error strings should be written using correct English grammar.\n* SNAKE_UPPER_CASE constants, macros, and enum members.\n* snake_lower_case everything else.\n* `static` (local file scope) variables that are not `const` are prefixed by `s_` and lower snake case.\n* Global variables not prefixed as `const` are prefixed by `g_` and lower snake case.\n* Thread local variables are prefixed as `tl_` and lower snake case.\n* Macros and `const` variables are upper snake case.\n* For constants, prefer anonymous enums.\n* Don't typedef structs. It breaks forward declaration ability.\n* Don't typedef enums. It breaks forward declaration ability.\n* typedef function definitions for use as function pointers as values and suffixed with _fn.\n\nExample:\n\n    typedef int(fn_name_fn)(void *);\n\nNot:\n\n    typedef int(*fn_name_fn)(void *);\n\n* Every source and header file must have a copyright header (The standard AWS one for apache 2).\n* Use standard include guards (e.g. #IFNDEF HEADER_NAME #define HEADER_NAME etc...).\n* Include order should be:\n    the header for the translation unit for the .c file\n    newline\n    header files in a directory in alphabetical order\n    newline\n    header files not in a directory (system and stdlib headers)\n* Platform specifics should be handled in c files and partitioned by directory.\n* Do not use `extern inline`. It's too unpredictable between compiler versions and language standards.\n* Namespace all definitions in header files with `aws_\u003clibname\u003e?_\u003capi\u003e_\u003cwhat it does\u003e`. Lib name is\nnot always required if a conflict is not likely and it provides better ergonomics.\n* `init`, `clean_up`, `new`, `destroy` are suffixed to the function names for their object.\n\nExample:\n\n    AWS_COMMON_API\n int aws_module_init(aws_module_t *module);\n    AWS_COMMON_API\n void aws_module_clean_up(aws_module_t *module);\n    AWS_COMMON_API\n aws_module_t *aws_module_new(aws_allocator_t *allocator);\n    AWS_COMMON_API\n void aws_module_destroy(aws_module_t *module);\n\n* Avoid c-strings, and don't write code that depends on `NULL` terminators. Expose `struct aws_byte_buf` APIs\nand let the user figure it out.\n* There is only one valid character encoding-- UTF-8. Try not to ever need to care about character encodings, but\nwhere you do, the working assumption should always be UTF-8 unless it's something we don't get a choice in (e.g. a protocol\nexplicitly mandates a character set).\n* If you are adding/using a compiler specific keyword, macro, or intrinsic, hide it behind a platform independent macro\ndefinition. This mainly applies to header files. Obviously, if you are writing a file that will only be built on a certain\nplatform, you have more liberty on this.\n\n\n\n","versions":[{"ref":"master","manifest":"targets = [ \"//:aws-c-common\" ]","lockFile":"manifest = \"2d9f2e6c10ea5d3db4f739349f8eb592bf6e35d95a883089c93572d54d6710ad\"\n","buck":"load('//:subdir_glob.bzl', 'subdir_glob')\n\ngenrule(\n  name = 'config-h', \n  out = 'config.h', \n  srcs = glob([\n    'cmake/**/*.c', \n    'cmake/**/*.cmake', \n    'cmake/**/*.txt', \n    'include/**/*.in', \n    'source/**/*.c', \n    'source/**/*.in', \n    'source/**/*.txt', \n    'CMakeLists.txt', \n  ]), \n  cmd = ' \u0026\u0026 '.join([\n    'mkdir -p $SRCDIR/tests', \n    'touch $SRCDIR/tests/CMakeLists.txt', \n    'cd $TMP', \n    'cmake $SRCDIR -G \"Unix Makefiles\"', \n    'cp $TMP/generated/include/aws/common/config.h $OUT', \n  ]), \n)\n\nlinux_srcs = glob([\n  'source/posix/**/*.c', \n])\n\nmacos_srcs = glob([\n  'source/posix/**/*.c', \n])\n\nwindows_srcs = glob([\n  'source/windows/**/*.c', \n])\n\ncxx_library(\n  name = 'aws-c-common', \n  header_namespace = '', \n  exported_headers = dict(\n    subdir_glob([\n      ('include', '**/*.c'), \n      ('include', '**/*.h'), \n      ('include', '**/*.inl'), \n    ]).items() + [\n      ('aws/common/config.h', ':config-h'), \n    ]\n  ), \n  srcs = glob([\n    'source/*.c', \n  ]), \n  platform_srcs = [\n    ('linux.*', linux_srcs), \n    ('macos.*', macos_srcs), \n    ('windows.*', windows_srcs), \n  ], \n  exported_platform_linker_flags = [\n    ('linux.*', [ '-lpthread' ]), \n  ], \n  visibility = [\n    'PUBLIC', \n  ], \n)\n","bazel":"","deps":[],"lock":[]}],"updated":"2018-12-04T13:33:42Z","updatedUpstream":"2021-01-08T20:06:59Z","contributors":[{"login":"bdonlan","avatarUrl":"https://avatars1.githubusercontent.com/u/9473?v=4"},{"login":"jpeddicord","avatarUrl":"https://avatars0.githubusercontent.com/u/95346?u=cc24a84b19083856c6b207b07f35e03b7e8252cd\u0026v=4"},{"login":"marcomagdy","avatarUrl":"https://avatars0.githubusercontent.com/u/115965?v=4"},{"login":"jonahharris","avatarUrl":"https://avatars3.githubusercontent.com/u/194874?v=4"},{"login":"dagnir","avatarUrl":"https://avatars3.githubusercontent.com/u/261310?u=f97caed4f506318834684359e6e2f00dec4fe9e4\u0026v=4"},{"login":"bretambrose","avatarUrl":"https://avatars2.githubusercontent.com/u/341314?v=4"},{"login":"hyandell","avatarUrl":"https://avatars1.githubusercontent.com/u/477715?u=981ae536caa2d71790a1ce14ef42a0add7c90896\u0026v=4"},{"login":"rcoh","avatarUrl":"https://avatars0.githubusercontent.com/u/492903?v=4"},{"login":"tautschnig","avatarUrl":"https://avatars3.githubusercontent.com/u/1144736?u=946ba3fd3a17b60dec68081e4d85869a68b6a129\u0026v=4"},{"login":"ashovlin","avatarUrl":"https://avatars0.githubusercontent.com/u/1170880?u=4a879abca797c8402808f1c1ed67a6b4053995d3\u0026v=4"},{"login":"kankri","avatarUrl":"https://avatars1.githubusercontent.com/u/1339570?v=4"},{"login":"ColdenCullen","avatarUrl":"https://avatars1.githubusercontent.com/u/1354824?v=4"},{"login":"mlabieniec","avatarUrl":"https://avatars3.githubusercontent.com/u/1417045?u=9e5a5fd903f6470754ce88caaa3e48eb2217c752\u0026v=4"},{"login":"SaswatPadhi","avatarUrl":"https://avatars1.githubusercontent.com/u/1577944?u=b83642049d14cf38eeb9f83299e5904868f12d8a\u0026v=4"},{"login":"RandyGaul","avatarUrl":"https://avatars3.githubusercontent.com/u/1919825?u=4685259167f29cffe789a5bba98d05b63f2d394d\u0026v=4"},{"login":"mswilson","avatarUrl":"https://avatars1.githubusercontent.com/u/1986233?u=74c60f4b942281269bc2a0e98bfea05205f0464b\u0026v=4"},{"login":"yoroto","avatarUrl":"https://avatars2.githubusercontent.com/u/2706878?v=4"},{"login":"karkhaz","avatarUrl":"https://avatars0.githubusercontent.com/u/2887605?u=03fd23e87408afeb2b8840a35ad7e9b852611b8d\u0026v=4"},{"login":"xomyakus","avatarUrl":"https://avatars0.githubusercontent.com/u/2965351?v=4"},{"login":"justinboswell","avatarUrl":"https://avatars2.githubusercontent.com/u/3382222?u=47f93d50147580a3dd303103fde6c6e08535b10f\u0026v=4"},{"login":"singku","avatarUrl":"https://avatars3.githubusercontent.com/u/3468296?u=a545974331443816ee27b2acadc8eedb071708da\u0026v=4"},{"login":"alexw91","avatarUrl":"https://avatars0.githubusercontent.com/u/3596374?u=7482333a16b1c3056ccb0e8933d5003d9f54f13a\u0026v=4"},{"login":"asbhat","avatarUrl":"https://avatars0.githubusercontent.com/u/3885798?u=7966843cb111046e354f2b29d1bb78fc6820db7d\u0026v=4"},{"login":"JonathanHenson","avatarUrl":"https://avatars1.githubusercontent.com/u/3926469?u=0df58df774d94224ce63dacfcbe6d6701d656857\u0026v=4"},{"login":"madebr","avatarUrl":"https://avatars3.githubusercontent.com/u/4138939?v=4"}],"fundingLinks":[],"contactLinks":[],"stars":153,"forks":88,"topics":["hacktoberfest","aws-sdk"]}},"__N_SSG":true},"page":"/packages/[owner]/[name]","query":{"owner":"buckaroo-pm","name":"awslabs-aws-c-common"},"buildId":"XEnVUsOG7VkTdg59Wro6f","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-617a3a2c770be2525c7f.js"></script><script src="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.9b549cceddc4472f1953.js" async=""></script><script src="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" async=""></script><script src="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" async=""></script><script src="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_buildManifest.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_ssgManifest.js" async=""></script></body></html>