<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a0584ae5515792e72ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0584ae5515792e72ab5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9b549cceddc4472f1953.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" as="script"/></head><body><div id="__next"><div class="site"><div class="navigation"><div class="view row space-between"><div class="links"><a class="buckaroo" href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="/blog">Blog</a></div><div class="search"><input placeholder="search for a module..." value=""/><button class="fa fa-search fa-large"></button></div><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></div></div><div></div><div class="banner"><div style="display:flex"><div class="package"><img src="/packages/buckaroo-pm/okdshin-unique_resource/logo.png"/></div><div><h1>buckaroo-pm/okdshin-unique_resource</h1><div style="max-width:600px">unique_resource, The General RAII Wrapper for Exclusive Ownership Resource Management.</div><br/><div><b>28</b></div></div></div><div style="display:inline-flex;flex-flow:row wrap"></div></div><div style="display:flex;width:100%;justify-content:center;margin-top:-2.7em"><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:white;color:black;border:solid 1px #fff">ReadMe</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Buck</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Manifest</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Dependencies</div></div><div class="banner white"><div class="view column"><h2>ReadMe</h2><h1>unique_resource, The General RAII Wrapper for Exclusive Ownership Resource Management.</h1><p>This is an unique_resource implementation with Boost Software License 1.0.<br/>This implementation is based on example implementation in the C++ Standards Committee Paper <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4189.pdf">N4189</a>.</p><h2>What is unique_resource</h2><p>unique_resource is a generalization of std::unique_ptr.
std::unique_ptr can be instantiated only by pointer like types.
unique_resource does not have such limitation and, normally, works with a user&#x27;s customized deleter.</p><h2>Installation</h2><p>Put unique_resource.hpp into your including directory.</p><h2>Sample Usage</h2><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-c++" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>#include &lt;iostream&gt;
</span>#include &quot;unique_resource.hpp&quot;
<!-- -->
<!-- -->// some dummy resource functions
<!-- -->using handle_t = int;
<!-- -->decltype(auto) GenHandle(handle_t i) { return i; }
<!-- -->decltype(auto) ReleaseHandle(handle_t handle) {
<!-- -->	std::cout &lt;&lt; &quot;release handle &quot; &lt;&lt; handle &lt;&lt; std::endl;
<!-- -->}
<!-- -->
<!-- -->decltype(auto) make_unique_handle(handle_t i) {
<!-- -->	return std_experimental::make_unique_resource(
<!-- -->		GenHandle(i), &amp;ReleaseHandle);
<!-- -->}
<!-- -->int main() {
<!-- -->	auto handle1 = make_unique_handle(1);
<!-- -->	{
<!-- -->		auto handle2 = make_unique_handle(2);
<!-- -->		std::cout &lt;&lt; handle2.get() &lt;&lt; std::endl; // raw handle access by get()
<!-- -->		// here, handle2 is released.
<!-- -->	}
<!-- -->	auto handle3 = make_unique_handle(3);
<!-- -->	handle3.reset(); // release handle explicitly
<!-- -->	{
<!-- -->		auto handle4 = make_unique_handle(4);
<!-- -->		auto raw_handle4 = handle4.release(); // strip RAII wrapper
<!-- -->		ReleaseHandle(raw_handle4); // now, we should release handle by hand.
<!-- -->	}
<!-- -->	{
<!-- -->		auto handle5 = make_unique_handle(5);
<!-- -->		auto handle6 = std::move(handle5); // move construct
<!-- -->		handle6.reset(GenHandle(6)); // reset raw handle
<!-- -->	}
<!-- -->
<!-- -->	std::cout &lt;&lt; &quot;Bye!&quot; &lt;&lt; std::endl;
<!-- -->}
</code></pre><p>output</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>2
</span>release handle 2
<!-- -->release handle 3
<!-- -->release handle 4
<!-- -->release handle 5
<!-- -->release handle 6
<!-- -->Bye!
<!-- -->release handle 1
</code></pre><p>The detailed documentation is on 7.4.1 of <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4189">N4189</a>.</p><h2>What is different from the example implementation in N4189</h2><ul><li>License</li></ul><p>The original codes have no license to use. This implementation has Boost Software License 1.0 (thanks Sandval and Sommerlad for the consent).</p><ul><li>Namespace</li></ul><p>The original codes are included in namespace &quot;std::experimental&quot;, but adding any user codes into namespace &quot;std&quot; or nested namespaces of it cause undefined behavior. So in this implementation, the namespace is changed from &quot;std::experimental&quot; to &quot;std_experimental&quot;.</p><ul><li>Some codes for C++11</li></ul><p>Using features of C++14, the original codes do not work under C++11. This implementation works under C++11 (and, of course, under C++14 or later).</p><ul><li>Workaround for GCC</li></ul><p>Because of the <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52869">bug</a> of GCC, the original codes cause compilation error with GCC. This implementation contains the workaround about the bug and works fine with GCC.</p><ul><li>Test codes</li></ul><p>The original implementation has test codes but they uses external libraries except standard libraries. This implementation also has test codes but they do not use such libraries except standard ones.</p></div></div><div class="banner footer"><div class="view column"><div class="actions"><div class="links"><a href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="https://github.com/LoopPerfect/buckaroo" target="_blank">GitHub</a></div><div class="signup"><h1 class="action">Sign up for our Newsletter</h1><div class="info">Get the latest updates about new packages and Buckaroo releases.</div><button>Sign Up</button></div></div><div class="powered"><img src="/LoopPerfectInvertSmall.png"/><span>Powered by LoopPerfect</span></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"packageName":"buckaroo-pm/okdshin-unique_resource","name":"okdshin/unique_resource","licence":"BSL-1.0","description":"unique_resource, The General RAII Wrapper for Exclusive Ownership Resource Management.","readme":"unique\\_resource, The General RAII Wrapper for Exclusive Ownership Resource Management.\n===\n\nThis is an unique\\_resource implementation with Boost Software License 1.0.  \nThis implementation is based on example implementation in the C++ Standards Committee Paper [N4189](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4189.pdf).\n\nWhat is unique\\_resource\n---\n\nunique\\_resource is a generalization of std::unique\\_ptr.\nstd::unique\\_ptr can be instantiated only by pointer like types.\nunique\\_resource does not have such limitation and, normally, works with a user's customized deleter.\n\nInstallation\n---\n\nPut unique\\_resource.hpp into your including directory.\n\nSample Usage\n---\n\n```c++\n#include \u003ciostream\u003e\n#include \"unique_resource.hpp\"\n\n// some dummy resource functions\nusing handle_t = int;\ndecltype(auto) GenHandle(handle_t i) { return i; }\ndecltype(auto) ReleaseHandle(handle_t handle) {\n\tstd::cout \u003c\u003c \"release handle \" \u003c\u003c handle \u003c\u003c std::endl;\n}\n\ndecltype(auto) make_unique_handle(handle_t i) {\n\treturn std_experimental::make_unique_resource(\n\t\tGenHandle(i), \u0026ReleaseHandle);\n}\nint main() {\n\tauto handle1 = make_unique_handle(1);\n\t{\n\t\tauto handle2 = make_unique_handle(2);\n\t\tstd::cout \u003c\u003c handle2.get() \u003c\u003c std::endl; // raw handle access by get()\n\t\t// here, handle2 is released.\n\t}\n\tauto handle3 = make_unique_handle(3);\n\thandle3.reset(); // release handle explicitly\n\t{\n\t\tauto handle4 = make_unique_handle(4);\n\t\tauto raw_handle4 = handle4.release(); // strip RAII wrapper\n\t\tReleaseHandle(raw_handle4); // now, we should release handle by hand.\n\t}\n\t{\n\t\tauto handle5 = make_unique_handle(5);\n\t\tauto handle6 = std::move(handle5); // move construct\n\t\thandle6.reset(GenHandle(6)); // reset raw handle\n\t}\n\n\tstd::cout \u003c\u003c \"Bye!\" \u003c\u003c std::endl;\n}\n```\n\noutput\n\n```\n2\nrelease handle 2\nrelease handle 3\nrelease handle 4\nrelease handle 5\nrelease handle 6\nBye!\nrelease handle 1\n```\n\nThe detailed documentation is on 7.4.1 of [N4189](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4189).\n\nWhat is different from the example implementation in N4189\n---\n\n- License  \nThe original codes have no license to use. This implementation has Boost Software License 1.0 (thanks Sandval and Sommerlad for the consent).\n\n- Namespace  \nThe original codes are included in namespace \"std::experimental\", but adding any user codes into namespace \"std\" or nested namespaces of it cause undefined behavior. So in this implementation, the namespace is changed from \"std::experimental\" to \"std\\_experimental\".\n\n- Some codes for C++11  \nUsing features of C++14, the original codes do not work under C++11. This implementation works under C++11 (and, of course, under C++14 or later).\n\n- Workaround for GCC  \nBecause of the [bug](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52869) of GCC, the original codes cause compilation error with GCC. This implementation contains the workaround about the bug and works fine with GCC.\n\n- Test codes  \nThe original implementation has test codes but they uses external libraries except standard libraries. This implementation also has test codes but they do not use such libraries except standard ones.\n","versions":[{"ref":"master","manifest":"targets = [ \"//:unique-resource\" ]\n","lockFile":"","buck":"prebuilt_cxx_library(\n  name = 'unique-resource', \n  header_namespace = '', \n  header_only = True, \n  exported_headers = glob([\n    '*.hpp',  \n  ]), \n  visibility = [\n    'PUBLIC', \n  ], \n)\n","bazel":"","deps":[],"lock":[]}],"updated":"2018-11-20T21:17:46Z","updatedUpstream":"2021-01-08T14:56:45Z","contributors":[{"login":"brunoabinader","avatarUrl":"https://avatars2.githubusercontent.com/u/76133?v=4"},{"login":"okdshin","avatarUrl":"https://avatars3.githubusercontent.com/u/1490699?u=5601666a68b8ebc6704ccfdf26d807b674918cbb\u0026v=4"}],"fundingLinks":[],"contactLinks":[],"stars":28,"forks":7,"topics":[]}},"__N_SSG":true},"page":"/packages/[owner]/[name]","query":{"owner":"buckaroo-pm","name":"okdshin-unique_resource"},"buildId":"XEnVUsOG7VkTdg59Wro6f","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-617a3a2c770be2525c7f.js"></script><script src="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.9b549cceddc4472f1953.js" async=""></script><script src="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" async=""></script><script src="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" async=""></script><script src="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_buildManifest.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_ssgManifest.js" async=""></script></body></html>