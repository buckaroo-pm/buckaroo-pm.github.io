<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a0584ae5515792e72ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0584ae5515792e72ab5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9b549cceddc4472f1953.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" as="script"/></head><body><div id="__next"><div class="site"><div class="navigation"><div class="view row space-between"><div class="links"><a class="buckaroo" href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="/blog">Blog</a></div><div class="search"><input placeholder="search for a module..." value=""/><button class="fa fa-search fa-large"></button></div><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></div></div><div></div><div class="banner"><div style="display:flex"><div class="package"><img src="/packages/buckaroo-pm/martinmoene-lest/logo.png"/></div><div><h1>buckaroo-pm/martinmoene-lest</h1><div style="max-width:600px">A modern, C++11-native, single-file header-only, tiny framework for unit-tests, TDD and BDD (includes C++98 variant)</div><br/><div><b>312</b></div></div></div><div style="display:inline-flex;flex-flow:row wrap"><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">testing</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">cpp11</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">cpp98</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">header-only</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">no-dependencies</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">tdd</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">bdd</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">tiny-framework</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">single-file</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">cast</span></div></div><div style="display:flex;width:100%;justify-content:center;margin-top:-2.7em"><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:white;color:black;border:solid 1px #fff">ReadMe</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Buck</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Manifest</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Dependencies</div></div><div class="banner white"><div class="view column"><h2>ReadMe</h2><h1>lest â€“ lest errors escape testing</h1><p><a href="https://isocpp.org/"><img src="https://img.shields.io/badge/language-C++-blue.svg" alt="Language"/></a>  <a href="https://en.wikipedia.org/wiki/C%2B%2B#Standardization"><img src="https://img.shields.io/badge/c%2B%2B-11-blue.svg" alt="Standard"/></a> <a href="https://en.wikipedia.org/wiki/C%2B%2B#Standardization"><img src="https://img.shields.io/badge/c%2B%2B-98-orange.svg" alt="Standard"/></a>  <a href="https://opensource.org/licenses/BSL-1.0"><img src="https://img.shields.io/badge/license-BSL-blue.svg" alt="License"/></a> <a href="https://travis-ci.org/martinmoene/lest"><img src="https://travis-ci.org/martinmoene/lest.svg?branch=master" alt="Build Status"/></a> <a href="https://ci.appveyor.com/project/martinmoene/lest/branch/master"><img src="https://ci.appveyor.com/api/projects/status/3777o06o2ni5lww2/branch/master?svg=true" alt="Build status"/></a> <a href="https://github.com/martinmoene/lest/releases"><img src="https://badge.fury.io/gh/martinmoene%2Flest.svg" alt="Version"/></a> <a href="https://raw.githubusercontent.com/martinmoene/lest/master/include/lest/lest.hpp"><img src="https://img.shields.io/badge/latest%20version%20%20-download-blue.svg" alt="download"/></a> <a href="https://wandbox.org/permlink/sAVsUrrJsyv1z43c"><img src="https://img.shields.io/badge/try%20it-online-blue.svg" alt="Try it online"/></a></p><p>This tiny C++11 test framework is based on ideas and examples by Kevlin Henney [1,2] and on ideas found in the CATCH test framework by Phil Nash [3].</p><p>Let writing tests become irresistibly easy and attractive.</p><p><strong>Contents</strong></p><ul><li><a href="#example-usage">Example usage</a></li><li><a href="#in-a-nutshell">In a nutshell</a></li><li><a href="#license">License</a></li><li><a href="#dependencies">Dependencies</a></li><li><a href="#installation">Installation</a></li><li><a href="#usage">Usage</a></li><li><a href="#synopsis">Synopsis</a></li><li><a href="#variants-of-lest">Variants of <em>lest</em></a></li><li><a href="#features-of-lest">Features of <em>lest</em></a></li><li><a href="#reported-to-work-with">Reported to work with</a></li><li><a href="#building-tests-and-examples">Building tests and examples</a></li><li><a href="#contributions-to-lest">Contributions to <em>lest</em></a></li><li><a href="#other-test-frameworks">Other test frameworks</a></li><li><a href="#notes-and-references">Notes and references</a></li></ul><h2>Example usage</h2><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-Cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>#include &quot;lest.hpp&quot;
</span>
<!-- -->using namespace std;
<!-- -->
<!-- -->const lest::test specification[] =
<!-- -->{
<!-- -->    CASE( &quot;Empty string has length zero (succeed)&quot; )
<!-- -->    {
<!-- -->        EXPECT( 0 == string(  ).length() );
<!-- -->        EXPECT( 0 == string(&quot;&quot;).length() );
<!-- -->    },
<!-- -->
<!-- -->    CASE( &quot;Text compares lexically (fail)&quot; )
<!-- -->    {
<!-- -->        EXPECT( string(&quot;hello&quot;) &gt; string(&quot;world&quot;) );
<!-- -->    },
<!-- -->
<!-- -->    CASE( &quot;Unexpected exception is reported&quot; )
<!-- -->    {
<!-- -->        EXPECT( (throw std::runtime_error(&quot;surprise!&quot;), true) );
<!-- -->    },
<!-- -->
<!-- -->    CASE( &quot;Unspecified expected exception is captured&quot; )
<!-- -->    {
<!-- -->        EXPECT_THROWS( throw std::runtime_error(&quot;surprise!&quot;) );
<!-- -->    },
<!-- -->
<!-- -->    CASE( &quot;Specified expected exception is captured&quot; )
<!-- -->    {
<!-- -->        EXPECT_THROWS_AS( throw std::bad_alloc(), std::bad_alloc );
<!-- -->    },
<!-- -->
<!-- -->    CASE( &quot;Expected exception is reported missing&quot; )
<!-- -->    {
<!-- -->        EXPECT_THROWS( true );
<!-- -->    },
<!-- -->
<!-- -->    CASE( &quot;Specific expected exception is reported missing&quot; )
<!-- -->    {
<!-- -->        EXPECT_THROWS_AS( true, std::runtime_error );
<!-- -->    },
<!-- -->};
<!-- -->
<!-- -->int main( int argc, char * argv[] )
<!-- -->{
<!-- -->    return lest::run( specification, argc, argv );
<!-- -->}
</code></pre><p>Note: besides above table approach, <em>lest</em> also supports <a href="#test-case-macro">auto-registration of tests</a>.</p><h3>Compile and run</h3><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>prompt&gt;g++ -Wall -Wextra -std=c++11 -I../include/lest -o 05_select.exe 05_select.cpp &amp;&amp; 05_select.exe
</span>05_select.cpp:17: failed: Text compares lexically (fail): string(&quot;hello&quot;) &gt; string(&quot;world&quot;) for &quot;hello&quot; &gt; &quot;world&quot;
<!-- -->05_select.cpp:22: failed: got unexpected exception with message &quot;surprise!&quot;: Unexpected exception is reported: (throw std::runtime_error(&quot;surprise!&quot;), true)
<!-- -->05_select.cpp:37: failed: didn&#x27;t get exception: Expected exception is reported missing: true
<!-- -->05_select.cpp:42: failed: didn&#x27;t get exception of type std::runtime_error: Specific expected exception is reported missing: true
<!-- -->4 out of 7 selected tests failed.
</code></pre><p>With <a href="https://buckbuild.com/">Buck</a>:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>prompt&gt; buck run example/:05_select
</span>...
</code></pre><h2>In a nutshell</h2><p><strong>lest</strong> is a small C++11 test framework for unit testing, regression testing, <a href="http://en.wikipedia.org/wiki/Test-driven_development">Test-driven development (TDD)</a> and <a href="http://dannorth.net/introducing-bdd/">Behaviour-driven design (BDD)</a>. It replicates innovative ideas in C++ testing from the <a href="https://github.com/philsquared/Catch">Catch test framework</a> such as <a href="#fixture-macros">function-level fixtures</a> and <a href="#assertion-macros">expression-decomposing assertion macros</a> in a form that is compact enough to read in five minutes. The lest_cpp03 variant provides similar capabilities to use with C++98/03 compilers.</p><p><strong>Features and properties of lest</strong> are ease of installation (single header), no boilerplate code,  traditional unit test cases and BDD style scenarios, strings as test names, function-level fixtures, expression-decomposing assertion macros, support for floating point comparison, test selection from commandline, test duration timing, test randomisation and sorting, display of passing tests, colourised output (compile-time option), C++11 code and a C++98/03 variant with comparable features (also compilable as C++11).</p><p><strong>Features available via other projects</strong> are mocking (see <a href="#main-trompeloeil">integrate Trompeloeil mocking framework</a>) and hamcrest matchers (see <a href="#variants-of-lest">variants of lest</a>),</p><p><strong>Not provided</strong> are things present in <a href="#other-test-frameworks">other test frameworks</a>, such as suites of tests, value-parameterised tests, type-parameterised tests, test data generators, customisable reporting, easy logging of extra information, breaking into a debugger, concurrent execution of tests, isolated execution of tests, Visual Studio Test Adapter.</p><h2>License</h2><p><em>lest</em> uses the <a href="LICENSE.txt">Boost Software License</a>.</p><h2>Dependencies</h2><p><em>lest</em> has no other dependencies than the <a href="http://en.cppreference.com/w/cpp/header">C++ standard library</a>.</p><h2>Installation</h2><p><em>lest</em> is a single-file header-only library. Put <code>lest.hpp</code>, or a variant of it such as <code>lest_cpp03.hpp</code> directly into the project source tree or somewhere reachable from your project.</p><h2>Usage</h2><ul><li><a href="#test-case-macro">Making a case</a> â€“ <a href="example/05-select.cpp#L9">example</a></li><li><a href="#assertion-macros">Asserting for success</a> â€“ <a href="example/05-select.cpp#L11">example</a></li><li><a href="#assertion-macros">Asserting for failure</a> â€“ <a href="example/05-select.cpp#L13">example</a></li><li><a href="#assertion-macros">Asserting for exceptions</a> â€“ <a href="example/05-select.cpp#L28">example</a></li><li><a href="#assertion-macros">Asserting for a specific exception</a> â€“ <a href="example/05-select.cpp#L33">example</a></li><li><a href="#floating-point-comparison">Comparing floating point numbers</a> â€“ <a href="example/06-approx.cpp">example</a>.</li><li><a href="#test-case-macro">Auto test registration</a> â€“ <a href="example/11-auto-reg.cpp">single-file example</a></li><li><a href="#test-case-macro">Auto test registration with multiple source files</a> â€“ <a href="example/13-module-auto-reg-1.cpp">example part  1</a>, <a href="example/13-module-auto-reg-2.cpp">2</a>, <a href="example/13-module-auto-reg-3.cpp">3</a>.</li><li><a href="#test-case-macro">Non-auto test registration</a> â€“ <a href="example/05-select.cpp">single-file example</a></li><li><a href="#module-registration-macro">Non-auto test registration with multiple source files</a> â€“ <a href="example/12-module-1.cpp">example part 1</a>, <a href="example/12-module-2.cpp">2</a>, <a href="example/12-module-3.cpp">3</a>.</li><li><a href="#fixture-macros">Using fixtures</a> â€“ <a href="example/09-fixture.cpp">example</a>.</li><li><a href="#tests">Using <em>lest</em> assertions in a (reusable) user-defined function or lambda</a> â€“ <a href="example/15-extract-function.cpp">function</a>, <a href="example/15-extract-template-function.cpp">templated function</a>, <a href="example/15-extract-lambda.cpp">lambda</a>.</li><li><a href="#main">Writing the test main function</a> â€“ <a href="example/11-auto-reg.cpp">single-file auto</a>, <a href="example/05-select.cpp">non-auto</a> â€“ <a href="example/13-module-auto-reg-1.cpp">multi-file auto part 1</a>, <a href="example/13-module-auto-reg-2.cpp">2</a>, <a href="example/13-module-auto-reg-3.cpp">3</a>, <a href="example/12-module-1.cpp">non-auto part 1</a>, <a href="example/12-module-2.cpp">2</a>, <a href="example/12-module-3.cpp">3</a>.</li><li><a href="#main-trompeloeil">Integrating <em>lest</em> with the Trompeloeil mocking framework</a> â€“ <a href="example/16-trompeloeil-runtime.cpp">example</a>.</li><li><a href="#reporting-a-user-defined-type">Reporting a user-defined type</a> â€“ <a href="example/07-udt.cpp">example</a>.</li><li><a href="#command-line">Running tests</a></li></ul><h2>Synopsis</h2><p><strong>Contents</strong></p><ul><li><a href="#command-line">Command line</a></li><li><a href="#test-case-macro">Test case macro</a></li><li><a href="#fixture-macros">Fixture macros</a></li><li><a href="#assertion-macros">Assertion macros</a></li><li><a href="#bdd-style-macros">BDD style macros</a></li><li><a href="#module-registration-macro">Module registration macro</a></li><li><a href="#other-macros">Other macros</a></li><li><a href="#namespace">Namespace</a></li><li><a href="#tests">Tests</a></li><li><a href="#main">Main</a></li><li><a href="#main-trompeloeil">Main (Trompeloeil)</a></li><li><a href="#floating-point-comparison">Floating point comparison</a></li><li><a href="#reporting-a-user-defined-type">Reporting a user-defined type</a></li></ul><h3>Command line</h3><p>Usage: <strong>test</strong> [options] [<em>test-spec</em> ...]</p><p>Options:</p><ul><li><code>-h, --help</code>, this help message</li><li><code>-a, --abort</code>, abort at first failure</li><li><code>-c, --count</code>, count selected tests</li><li><code>-g, --list-tags</code>, list tags of selected tests</li><li><code>-l, --list-tests</code>, list selected tests</li><li><code>-p, --pass</code>, also report passing tests</li><li><code>-t, --time</code>, list duration of selected tests</li><li><code>-v, --verbose</code>, also report passing or failing sections</li><li><code>--order=declared</code>, use source code test order (default)</li><li><code>--order=lexical</code>, use lexical sort test order</li><li><code>--order=random</code>, use random test order</li><li><code>--random-seed=n</code>, use <em>n</em> for random generator seed</li><li><code>--random-seed=time</code>, use time for random generator seed</li><li><code>--repeat=n</code>, repeat selected tests <em>n</em> times (-1: indefinite)</li><li><code>--version</code>, report lest version and compiler used</li><li><code>--</code>, end options</li></ul><p>Test specification:</p><ul><li><code>&quot;@&quot;</code>, <code>&quot;*&quot;</code>: all tests, unless excluded</li><li><em>empty</em>: all tests, unless tagged [hide] or [.<em>optional-name</em>]</li><li><code>&quot;text&quot;</code>: select tests that contain <em>text</em> (case insensitive)</li><li><code>&quot;!text&quot;</code>: omit tests that contain <em>text</em> (case insensitive)</li></ul><p>Test descriptions can contain tags such as <code>[option]</code>, <code>[hide]</code> and <code>[.integration]</code>. Tests that contain the tag <code>[hide]</code> or a tag that starts with <code>[.</code> in their description are skipped, unless they are specifically selected by specifying <code>&quot;@&quot;</code>, <code>&quot;*&quot;</code>, or by specifying (part of) the tag.</p><p>Test specifications can be combined and are evaluated left-to-right. For example: <code>a !ab abc</code> selects all tests that contain &#x27;a&#x27;, except those that contain &#x27;ab&#x27;, but include those that contain &#x27;abc&#x27;.</p><p>When regular expression selection has been enabled (and works), test specifications can use the regular expression syntax of <code>std::regex_search()</code>. See also <code>lest_FEATURE_REGEX_SEARCH</code> in section <a href="#other-macros">Other Macros</a>.</p><h3>Test case macro</h3><p>A <em>lest</em> test specification can consist of a) one or more arrays of test cases that use lambdas, or b) auto-registered test cases that use free functions. See also macro <a href="#other-macros">lest_FEATURE_AUTO_REGISTER</a>.</p><p><strong>CASE(</strong> &quot;<em>proposition</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong> â€ƒ <em>(array of cases)</em><br/>Describe the expected behaviour to test for and specify the actions and expectations. See also section <a href="#module-registration-macro">Module registration macro</a> â€“ <a href="example/02-basic.cpp">Single-file code example</a> â€“ <a href="example/12-module-1.cpp">Multi-file code example part 1</a>, <a href="example/12-module-2.cpp">2</a>, <a href="example/12-module-3.cpp">3</a>.</p><p><strong>CASE_ON(</strong> &quot;<em>proposition</em>&quot;, ...<strong>) {</strong> <em>code</em> <strong>}</strong> â€ƒ <em>(array of cases, since v1.33)</em><br/>Describe the expected behaviour to test for and specify the actions and expectations. After the description you can add a lambda capture list to refer to symbols in the enclosing scope. See also section <a href="#module-registration-macro">Module registration macro</a> â€“ <a href="example/02-basic.cpp">Single-file code example</a> â€“ <a href="example/12-module-1.cpp">Multi-file code example part 1</a>, <a href="example/12-module-2.cpp">2</a>, <a href="example/12-module-3.cpp">3</a>.</p><p><strong>lest_CASE(</strong> <em>specification</em>, &quot;<em>proposition</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong> â€ƒ <em>(auto-registered cases)</em><br/>Provide the collection of test cases, describe the expected behaviour to test for and specify the actions and expectations. Consider defining macro CASE(<em>proposition</em>) to hide the collection of test cases and define it in terms of lest_CASE(...) â€“ <a href="example/11-auto-reg.cpp">Single-file code example</a>  â€“ <a href="example/13-module-auto-reg-1.cpp">Multi-file code example part  1</a>, <a href="example/13-module-auto-reg-2.cpp">2</a>, <a href="example/13-module-auto-reg-3.cpp">3</a>.</p><h3>Fixture macros</h3><p><em>lest</em> provides function-level fixtures. Fixtures are stack-based and their setup and teardown occurs at the block scope of SETUP and (nested) SECTIONs â€“ <a href="example/09-fixture.cpp">Code example</a>.</p><p><strong>SETUP(</strong> &quot;<em>context</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong><br/>Describe and setup the context to use afresh in each enclosed section.</p><p><strong>SECTION(</strong> &quot;<em>proposition</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong><br/>Describe the expected behaviour to test for using the enclosing context and specify the actions and expectations. The objects in the enclosing setup or section come into existence and go out of scope for each section. A section must be enclosed in setup or in another section.</p><h3>Assertion macros</h3><p><em>lest</em> has expression-decomposing assertion macros. An expression with strings such as <code>hello &gt; world</code> may be reported with code and expansion as <code>hello &gt; world (&quot;hello&quot; &gt; &quot;world&quot;)</code>. As a consequence, only a few assertion macro variants are needed â€“ <a href="example/05-select.cpp">Code example</a>.</p><p><strong>EXPECT(</strong> <em>expr</em> <strong>)</strong><br/>Evaluate the expression and report failure. If an exception is thrown it is caught, reported and counted as a failure.</p><p><strong>EXPECT_NOT(</strong> <em>expr</em> <strong>)</strong><br/>Evaluate the expression, record the <em>logical not</em> of its result and report failure. If an exception is thrown it is caught, reported and counted as a failure. This macro is a workaround to circumvent ! prefixed expressions as these cannot be decomposed.</p><p><strong>EXPECT_NO_THROW(</strong> <em>expr</em> <strong>)</strong><br/>Expect that no exception (of any type) is thrown during evaluation of the expression.</p><p><strong>EXPECT_THROWS(</strong> <em>expr</em> <strong>)</strong><br/>Expect that an exception (of any type) is thrown during evaluation of the expression.</p><p><strong>EXPECT_THROWS_AS(</strong> <em>expr</em>, <em>exception</em> <strong>)</strong><br/>Expect that an exception of the specified type is thrown during evaluation of the expression.</p><p>If an assertion fails, the remainder of the test that assertion is part of is skipped.</p><h3>BDD style macros</h3><p><em>lest</em> provides several macros to write <a href="http://dannorth.net/introducing-bdd/">Behaviour-Driven Design (BDD)</a> style scenarios â€“ <a href="example/10-bdd.cpp">Code example</a>, <a href="example/10-bdd-auto.cpp">auto-registration</a>.</p><p><strong>lest_SCENARIO(</strong> <em>specification</em>, &quot;<em>sketch</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong> â€ƒ <em>(auto-registered cases)</em></p><p><strong>SCENARIO(</strong> &quot;<em>sketch</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong> â€ƒ <em>(array of cases)</em></p><p><strong>GIVEN(</strong> &quot;<em>context</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong></p><p><strong>WHEN(</strong> &quot;<em>action</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong></p><p><strong>THEN(</strong> &quot;<em>result</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong></p><p><strong>AND_WHEN(</strong> &quot;<em>action</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong></p><p><strong>AND_THEN(</strong> &quot;<em>result</em>&quot; <strong>) {</strong> <em>code</em> <strong>}</strong></p><p>These macros simply map to macros CASE(), SETUP() and SECTION().</p><p>For auto-registered scenarios, consider defining macro SCENARIO(proposition) to hide the collection of scenarios and define it in terms of lest_SCENARIO(...).</p><h3>Module registration macro</h3><p>When using <em>arrays of  test cases</em> written across multiple files, you can use macro MODULE() to add a module&#x27;s test cases to the overall specification â€“ <a href="example/12-module-1.cpp">Code example part 1</a>, <a href="example/12-module-2.cpp">2</a>, <a href="example/12-module-3.cpp">3</a>.</p><p><strong>MODULE(</strong> <em>overall-specification</em>, <em>module-specification</em> <strong>)</strong><br/>Register this module&#x27;s test specification with the overall specification.</p><p>Note that with <em>lest</em> using <a href="#other-macros">auto test case registration</a> there&#x27;s no need for macro MODULE(), see the <a href="example/13-module-auto-reg-1.cpp">auto-registration example part  1</a>, <a href="example/13-module-auto-reg-2.cpp">2</a>, <a href="example/13-module-auto-reg-3.cpp">3</a>. The same holds for <em>lest_cpp03</em>, see <a href="example/14-module-cpp03-1.cpp">cpp03 example part 1</a>, <a href="example/14-module-cpp03-2.cpp">2</a>, <a href="example/14-module-cpp03-3.cpp">3</a>.</p><h3>Other macros</h3><p>-D<!-- -->&lt;b&gt;<!-- -->lest_NO_SHORT_MACRO_NAMES<!-- -->&lt;/b&gt;<br/>-D<!-- -->&lt;b&gt;<!-- -->lest_NO_SHORT_ASSERTION_NAMES<!-- -->&lt;/b&gt;<!-- --> (deprecated)<br/>All public API macros of <em>lest</em> exist as lest_<em>MACRO</em> and shorthand <em>MACRO</em> variant. Define this macro to omit the shorthand macros.</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_AUTO_REGISTER<!-- -->&lt;/b&gt;<!-- -->=0<br/>Define this to 1 to enable auto registration of test cases.  Default is 0.</p><p>See also section <a href="#test-case-macro">Test case macro</a>.</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_COLOURISE<!-- -->&lt;/b&gt;<!-- -->=0<br/>Define this to 1 to emphasise success and failure with colour. Default is 0.</p><p>Note: <a href="http://en.wikipedia.org/wiki/ANSI_escape_code">ANSI colour codes</a> are used. On Windows versions that <a href="http://stackoverflow.com/questions/16755142/how-to-make-win32-console-recognize-ansi-vt100-escape-sequences">lack support for this</a> you can use the <a href="https://github.com/adoxa/ansicon">ANSICON</a> terminal. Executables can be obtained <a href="http://ansicon.adoxa.vze.com/">here</a>.</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_LITERAL_SUFFIX<!-- -->&lt;/b&gt;<!-- -->=0<br/>Define this to 1 to append <code>u</code>, <code>l</code>, a combination of these, or <code>f</code> to numeric literals. Default is 0.</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_REGEX_SEARCH<!-- -->&lt;/b&gt;<!-- -->=0<br/>Define this to 1 to enable regular expressions to select tests. Default is 0.</p><p>Note: You have to make sure the compiler&#x27;s library has a working <code>std::regex_search()</code>; not all do currently. GCC 4.8.1&#x27;s regex search function doesn&#x27;t work yet. Visual C++ probably has a working regex search function since VC9, Visual Studio 2008 (tested VC10, Visual Studio 2010).</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_TIME_PRECISION<!-- -->&lt;/b&gt;<!-- -->=0<br/>Define this to set the precision of the duration in ms reported with option --time. Default is 0.</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_WSTRING<!-- -->&lt;/b&gt;<!-- -->=1<br/>Define this to 0 to remove references to std::wstring. Default is 1.</p><p>-D<!-- -->&lt;b&gt;<!-- -->lest_FEATURE_RTTI<!-- -->&lt;/b&gt;<!-- --> (undefined)<br/><em>lest</em> tries to determine if RTTI is available itself. If that doesn&#x27;t work out, define this to 1 or 0 to include or remove uses of RTTI (currently a single occurrence of <code>typeid</code> used for reporting a type name). Default is undefined.</p><h3>Namespace</h3><p>namespace <strong>lest</strong> { }<br/>Types and functions are located in namespace lest.</p><h3>Tests</h3><p>struct <strong>env</strong> { };</p><p>struct <strong>test</strong><br/>{<br/>â€ƒstd::string name;<br/>â€ƒstd::function&lt;void( env &amp; )&gt; behaviour;<br/>};</p><p>You&#x27;ll need type <code>env</code> and variable <code>lest_env</code> when you have a test case that calls a user-defined function or lambda that uses lest assertions like <code>EXPECT()</code> â€“ <a href="example/15-extract-function.cpp">Call reusable function</a>, <a href="example/15-extract-template-function.cpp">Call reusable templated function</a>, and <a href="example/15-extract-lambda.cpp">Call reusable lambda</a>.</p><h3>Main</h3><p>A typical <code>main()</code> function for <em>lest</em> may look as follows:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-Cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>#include &quot;lest.hpp&quot;
</span>
<!-- -->const lest::test specification[] = { CASE(&quot;...&quot;){} };
<!-- -->
<!-- -->int main( int argc, char *argv[] )
<!-- -->{
<!-- -->    if ( int failures = lest::run( specification, argc, argv ) )
<!-- -->        return failures;
<!-- -->    
<!-- -->    return std::cout &lt;&lt; &quot;All tests passed\n&quot;, EXIT_SUCCESS;
<!-- -->}
</code></pre><p>Compile and run:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>prompt&gt;g++ -std=c++11 -o main.exe -I./include/lest main.cpp &amp;&amp; main.exe
</span>All tests passed
</code></pre><p>Or, if feedback on success is moved to the command line:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-Cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>#include &quot;lest.hpp&quot;
</span>
<!-- -->const lest::test specification[] = { CASE(&quot;...&quot;){} };
<!-- -->
<!-- -->int main( int argc, char *argv[] )
<!-- -->{
<!-- -->    return lest::run( specification, argc, argv );
<!-- -->}
</code></pre><p>Compile and run with feedback on success:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>prompt&gt;g++ -std=c++11 -o main.exe -I./include/lest main.cpp &amp;&amp; main.exe &amp;&amp; echo All tests passed
</span>All tests passed
</code></pre><p>You can use the following variants of <em>lest</em>&#x27;s <code>run()</code> function in main.</p><p>inline<br/>int <strong>run(</strong> std::vector&lt;test&gt; <em>specification</em>, std::vector&lt;std::string&gt; <em>arguments</em>, std::ostream &amp; <em>os</em> = std::cout );</p><p>inline<br/>int <strong>run(</strong> std::vector&lt;test&gt; <em>specification</em>, int <em>argc</em>, char * <em>argv</em>[], std::ostream &amp; <em>os</em> = std::cout );</p><p>template&lt;std::size_t N&gt;<br/>int <strong>run(</strong> test const (&amp; <em>specification</em> )[N], std::ostream &amp; <em>os</em> = std::cout <strong>)</strong>;</p><p>template&lt;std::size_t N&gt;<br/>int <strong>run(</strong> test const (&amp; <em>specification</em> )[N], std::vector&lt;std::string&gt; <em>arguments</em>, std::ostream &amp; <em>os</em> = std::cout <strong>)</strong>;</p><p>template&lt;std::size_t N&gt;<br/>int <strong>run(</strong> test const (&amp; <em>specification</em> )[N], int <em>argc</em>, char * <em>argv</em>[], std::ostream &amp; <em>os</em> = std::cout <strong>)</strong>;</p><ul><li><em>specification</em> - collection of tests</li><li><em>arguments</em> - options and arguments to select and omit tests</li><li><em>argc</em>, <em>arcv</em> - options and arguments to select and omit tests</li><li><em>os</em> - stream to report to</li><li>returns number of failing tests</li></ul><h3>Main (Trompeloeil)</h3><p>You can integrate the <a href="https://github.com/rollbear/trompeloeil">Trompeloeil mocking framework</a> with <em>lest</em> by providing a reporter for Trompeloeil â€“ <a href="example/16-trompeloeil-runtime.cpp">Code example</a>.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-Cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>#include &quot;lest.hpp&quot;
</span>#include &quot;trompeloeil.hpp&quot;
<!-- -->
<!-- -->int main( int argc, char * argv[] )
<!-- -->{
<!-- -->    std::ostream &amp; stream = std::cout;
<!-- -->    
<!-- -->    trompeloeil::set_reporter(
<!-- -->        [&amp;stream]( trompeloeil::severity severity, const char * file, unsigned long line, std::string const &amp; msg )
<!-- -->    {
<!-- -->        if ( severity == trompeloeil::severity::fatal )
<!-- -->        {
<!-- -->            throw lest::message{&quot;&quot;, lest::location{ line ? file : &quot;[file/line unavailable]&quot;, int(line) }, &quot;&quot;, msg };
<!-- -->        }
<!-- -->        else
<!-- -->        {   
<!-- -->            stream &lt;&lt; lest::location{ line ? file : &quot;[file/line unavailable]&quot;, int(line) } &lt;&lt; &quot;: &quot; &lt;&lt; msg;
<!-- -->        }
<!-- -->    });
<!-- -->
<!-- -->    return lest::run( specification, argc, argv, stream );
<!-- -->}
</code></pre><h3>Floating point comparison</h3><p><em>lest</em> provides <code>class approx</code> to compare floating point values â€“ <a href="example/06-approx.cpp">Code example</a>.</p><p>class <strong>approx</strong> { };</p><p>Use <code>approx</code> as follows:</p><p>EXPECT( 1.23 == approx( 1.23 ) );<br/>EXPECT( 1.23 != approx( 1.24 ) );</p><p>EXPECT( 1.23 != approx( 1.231 ) );<br/>EXPECT( 1.23 == approx( 1.231 ).epsilon( 0.1 ) );</p><p>approx custom = approx::custom().epsilon( 0.1 );</p><p>EXPECT( approx( 1.231 ) != 1.23 );<br/>EXPECT( custom( 1.231 ) == 1.23 );</p><p>Class <code>approx</code> also provides <em>less-than or equal</em> and <em>greater-than or equal</em> operators.</p><h3>Reporting a user-defined type</h3><p><em>lest</em> allows you to report a user-defined type via operator&lt;&lt;() â€“ <a href="example/07-udt.cpp">Code example</a>.</p><p>To report a type not yet supported by <em>lest</em>, define a streaming function for it:</p><p>namespace ns {<br/>â€ƒstruct <em>user-defined-type</em> { ... };<br/>â€ƒstd::ostream &amp; <strong>operator&lt;&lt;</strong> ( std::ostream &amp; os, <em>user-defined-type</em> const &amp; <em>type</em> )<br/>â€ƒ{<br/>â€ƒâ€ƒusing lest::to_string;<br/>â€ƒâ€ƒreturn os &lt;&lt; ... ;<br/>â€ƒ}<br/>}</p><p>In it, stream the constituent parts of the type via lest&#x27;s <code>to_string()</code> conversion functions.</p><h2>Variants of <em>lest</em></h2><p>Various variants of <em>lest</em> are kept here. The simple ones, such as <code>lest_basic</code> and <code>lest_decompose</code> provide an easy read into the techniques used and remain the tiny test frameworks that are a good fit to include with small projects.</p><p>You are encouraged to take it from here and change and expand it as you see fit and publish your variant. If you do, I&#x27;d much appreciate to hear from you!</p><ul><li>lest.hpp - lest&#x27;s latest development, this project.</li><li>lest_basic.hpp - lest at its very basic, this project.</li><li>lest_decompose.hpp - lest with expression decomposition, this project.</li><li>lest_cpp03.hpp - lest with expression decomposition for C++03, this project.</li><li><a href="https://github.com/martinmoene/hamlest">hamlest</a> - matchers for lest.</li><li><a href="https://github.com/pmed/lest/tree/test_group">lest with groups</a> - Pavel Medvedev</li></ul><h2>Features of <em>lest</em></h2><table><thead><tr><th>Feature / variant</th><th style="text-align:center">latest</th><th style="text-align:center">cpp03</th><th style="text-align:center">decompose</th><th style="text-align:center">basic</th></tr></thead><tbody><tr><td>Assert expressions</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td></tr><tr><td>Assert exceptions</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td></tr><tr><td>Assert abortion (death)</td><td style="text-align:center"><a href="contrib/lest_expect_abort/">contrib</a></td><td style="text-align:center"><a href="contrib/lest_expect_abort/">contrib</a></td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Assert assertions (death)</td><td style="text-align:center"><a href="contrib/lest_expect_assert/">contrib</a></td><td style="text-align:center"><a href="contrib/lest_expect_assert/">contrib</a></td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Expression decomposition</td><td style="text-align:center">âœ“</td><td style="text-align:center">modest</td><td style="text-align:center">modest</td><td style="text-align:center">-</td></tr><tr><td>Literal suffix u, l, f</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Colourised output</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>BDD style scenarios</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Fixtures (sections)</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Floating point comparison, approx</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Floating point comparison, ulp</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Test selection (include/omit)</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Test selection (regexp)</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Help screen</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Abort at first failure</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Count selected tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>List tags of selected tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>List selected tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Report passing tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Time duration of tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Control order of tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Repeat tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Auto registration of tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Modules of tests</td><td style="text-align:center">âœ“</td><td style="text-align:center">âœ“</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Â </td><td style="text-align:center">Â </td><td style="text-align:center">Â </td><td style="text-align:center">Â </td><td style="text-align:center">Â </td></tr><tr><td>Suites of tests</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Value-parameterised tests</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Type-parameterised tests</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Test data generators</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td><a href="#variants-of-lest">Hamcrest matchers</a></td><td style="text-align:center">+/-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Mocking support</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Logging facility</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Break into debugger</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Concurrent execution of tests</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td>Isolated execution of tests</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr></tbody></table><h2>Reported to work with</h2><p>The table below mentions the lowest version of a compiler <code>lest</code> is reported to work with.</p><table><thead><tr><th>Variant / compiler</th><th>clang</th><th>GCC</th><th>VC</th></tr></thead><tbody><tr><td>lest (latest)</td><td>3.2</td><td>4.8.1</td><td>12</td></tr><tr><td>lest_basic</td><td>3.2</td><td>4.6</td><td>12</td></tr><tr><td>lest_decompose</td><td>3.2</td><td>4.6</td><td>12</td></tr><tr><td>lest_cpp03 (decompose)</td><td>?</td><td>?</td><td>8</td></tr></tbody></table><p><strong>Note</strong>: I&#x27;ve made a few concessions to enable compilation of <code>lest.hpp</code> with Visual C++:</p><ul><li>Prevent <a href="https://connect.microsoft.com/VisualStudio/feedbackdetail/view/917150">error C2797</a>: replace braced member initialisation with C++98 style initialisation.</li><li>Prevent <a href="https://connect.microsoft.com/VisualStudio/feedbackdetail/view/812488">error C2144</a>: use <code>enum{ value }</code> instead of <code>static constexpr bool</code> in struct <code>is_container</code> (for VC only).</li></ul><h2>Building tests and examples</h2><p>Tests and examples can be build with Buck, via Makefiles or by using CMake.</p><p>To build the tests and examples as described below you need:</p><ul><li><a href="https://buckbuild.com/">Buck</a> or <a href="http://cmake.org">CMake</a> version 2.8 or later to be installed and in your PATH.</li><li>A <a href="#reported-to-work-with">suitable compiler</a>.</li></ul><p>The following steps assume that the <a href="https://github.com/martinmoene/lest"><em>lest</em> source code</a> has been cloned into a directory named <code>lest</code>.</p><h3>Buck</h3><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>lest&gt; buck run test:test_lest_basic
</span>lest&gt; buck run test:test_lest_cpp03
<!-- -->lest&gt; buck run test:test_lest_decompose
<!-- -->lest&gt; buck run test:test_lest
</code></pre><h3>CMake</h3><ol><li>Create a directory for the build outputs for a particular architecture.</li></ol><p>Here we use lest/build.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    lest&gt; mkdir build &amp;&amp; cd build</span></code></pre><ol start="2"><li><p>Configure CMake to use the compiler of your choice (run <code>cmake --help</code> for a list) and build the tests for <em>lest</em> and the examples.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> lest/build&gt; cmake -G &quot;Unix Makefiles&quot; [see 3. below] ..</span></code></pre></li><li><p>Optional. You can control above configuration through the following options:</p><ul><li><code>-DLEST_BUILD_TEST=ON</code>: build the tests for lest, default on</li><li><code>-DLEST_BUILD_EXAMPLE=ON</code>: build the examples, default on</li><li><code>-DLEST_BUILD_CONTRIB=OFF</code>: build the contrib folder, default off</li><li><code>-DLEST_EXTRA_WARNINGS=OFF</code>: build with extra warnings and warnings as errors, default off</li></ul></li><li><p>Build the test suite.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> lest/build&gt; cmake --build .</span></code></pre></li><li><p>Run the test suite.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> lest/build&gt; ctest -V</span></code></pre></li></ol><p>All tests should pass, indicating your platform is supported and you are ready to use <em>lest</em>. Note that quite some examples fail. They do so to demonstrate the usage of things.</p><h2>Contributions to <em>lest</em></h2><p>Folder <a href="contrib">contrib</a> contains extensions to <em>lest</em>. These extensions are not part of <em>lest</em> itself because for example they use non-standard behaviour, they  are considered to be for a too-specific use case, or they are considered not yet ripe for inclusion in <em>lest</em> and we first like to gain more experience with them.</p><h2>Other test frameworks</h2><p>This <a href="https://github.com/martinmoene/catch-lest-other-comparison#catchdoctestlest-feature-comparison">comparison of Catch, doctest and lest</a> in table form may help you to discover similarities and differences of these frameworks.</p><ul><li><a href="https://github.com/philsquared/Catch">Catch</a> - A modern, C++-native, header-only, framework for unit-tests, TDD and BDD.</li><li><a href="https://github.com/onqtam/doctest">doctest</a> - The lightest feature-rich C++ single-header testing framework for unit tests and TDD. Catch/lest-inspired tests that accompany code.</li><li><a href="https://github.com/jfalcou/stf">stf</a> - Simple TDD Framework. Catch/lest-inspired with an emphasis on floating point precision testing.</li><li><a href="https://github.com/Kosta-Github/cute">cute</a> - C++ unit test executor.</li><li><a href="http://banditcpp.github.io/bandit/">bandit</a> - Human friendly unit testing for C++11.</li><li><a href="http://igloo-testing.org/">igloo</a> - BDD style unit testing for C++.</li><li><a href="https://github.com/jimporter/mettle">mettle</a> - A C++14 unit test framework.</li><li><a href="http://cpputest.github.io/">CppUTest</a> - Unit testing and mocking framework for C/C++.</li><li><a href="https://github.com/unittest-cpp/unittest-cpp">UnitTest++</a> - A lightweight unit testing framework for C++.</li><li><a href="https://bitbucket.org/moswald/xunit/wiki/Home">xUnit++</a> - A unit testing platform for C++ inspired by <a href="http://xunit.github.io/">xUnit.net</a>.</li><li><a href="https://github.com/NeilJustice/ZenUnit">ZenUnit</a> - Single-header C++ unit testing framework for value- and type-parameterized tests.</li><li><a href="https://github.com/search?q=language%3AC%2B%2B+98+test+framework&amp;type=Repositories&amp;ref=advsearch">Search for C++98 test frameworks on GitHub</a></li><li><a href="https://github.com/search?q=language%3AC%2B%2B+11+test+framework&amp;type=Repositories&amp;ref=advsearch">Search for C++11 test frameworks on GitHub</a></li><li><a href="https://github.com/search?q=language%3AC%2B%2B+14+test+framework&amp;type=Repositories&amp;ref=advsearch">Search for C++14 test frameworks on GitHub</a></li><li><a href="http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C.2B.2B">List of C++ unit testing frameworks</a> at Wikipedia.</li></ul><h2>Notes and references</h2><p>[1] <a href="http://accu.org/index.php/accu_branches/accu_london/accu_london_may_2010">Kevlin Henney on Rethinking Unit Testing in C++</a>  (<a href="http://skillsmatter.com/podcast/agile-testing/kevlin-henney-rethinking-unit-testing-in-c-plus-plus">Video</a>).</p><p>[2] Martin Moene. <a href="http://lists.accu.org/mailman/private/accu-general/2013-June/040594.html">Elefant C++11 test setup</a> on the <a href="http://accu.org/">ACCU</a> mailing list accu-general (requires login). It mentions the C++11 test appoach Andrzej KrzemieÅ„ski uses for <a href="https://github.com/akrzemi1/Optional/">Optional. A library for optional (nullable) objects for C++11</a>.</p><p>[3] Phil Nash. <a href="http://builds.catch-lib.net/">CATCH, an automated test framework for C, C++ and Objective-C</a>.</p><p>[4] A more technically informed name: lest - lambda engaged small tester.</p></div></div><div class="banner footer"><div class="view column"><div class="actions"><div class="links"><a href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="https://github.com/LoopPerfect/buckaroo" target="_blank">GitHub</a></div><div class="signup"><h1 class="action">Sign up for our Newsletter</h1><div class="info">Get the latest updates about new packages and Buckaroo releases.</div><button>Sign Up</button></div></div><div class="powered"><img src="/LoopPerfectInvertSmall.png"/><span>Powered by LoopPerfect</span></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"packageName":"buckaroo-pm/martinmoene-lest","name":"martinmoene/lest","licence":"BSL-1.0","description":"A modern, C++11-native, single-file header-only, tiny framework for unit-tests, TDD and BDD (includes C++98 variant)","readme":"lest \u0026ndash; lest errors escape testing\n=======================================\n\n[![Language](https://img.shields.io/badge/language-C++-blue.svg)](https://isocpp.org/)  [![Standard](https://img.shields.io/badge/c%2B%2B-11-blue.svg)](https://en.wikipedia.org/wiki/C%2B%2B#Standardization) [![Standard](https://img.shields.io/badge/c%2B%2B-98-orange.svg)](https://en.wikipedia.org/wiki/C%2B%2B#Standardization)  [![License](https://img.shields.io/badge/license-BSL-blue.svg)](https://opensource.org/licenses/BSL-1.0) [![Build Status](https://travis-ci.org/martinmoene/lest.svg?branch=master)](https://travis-ci.org/martinmoene/lest) [![Build status](https://ci.appveyor.com/api/projects/status/3777o06o2ni5lww2/branch/master?svg=true)](https://ci.appveyor.com/project/martinmoene/lest/branch/master) [![Version](https://badge.fury.io/gh/martinmoene%2Flest.svg)](https://github.com/martinmoene/lest/releases) [![download](https://img.shields.io/badge/latest%20version%20%20-download-blue.svg)](https://raw.githubusercontent.com/martinmoene/lest/master/include/lest/lest.hpp) [![Try it online](https://img.shields.io/badge/try%20it-online-blue.svg)](https://wandbox.org/permlink/sAVsUrrJsyv1z43c)\n\nThis tiny C++11 test framework is based on ideas and examples by Kevlin Henney [1,2] and on ideas found in the CATCH test framework by Phil Nash [3].\n\nLet writing tests become irresistibly easy and attractive.\n\n**Contents**  \n- [Example usage](#example-usage)\n- [In a nutshell](#in-a-nutshell)\n- [License](#license)\n- [Dependencies](#dependencies)\n- [Installation](#installation)\n- [Usage](#usage)\n- [Synopsis](#synopsis)\n- [Variants of *lest*](#variants-of-lest)\n- [Features of *lest*](#features-of-lest)\n- [Reported to work with](#reported-to-work-with)\n- [Building tests and examples](#building-tests-and-examples)\n- [Contributions to *lest*](#contributions-to-lest)\n- [Other test frameworks](#other-test-frameworks)\n- [Notes and references](#notes-and-references)\n\n\nExample usage\n-------------\n\n```Cpp\n#include \"lest.hpp\"\n\nusing namespace std;\n\nconst lest::test specification[] =\n{\n    CASE( \"Empty string has length zero (succeed)\" )\n    {\n        EXPECT( 0 == string(  ).length() );\n        EXPECT( 0 == string(\"\").length() );\n    },\n\n    CASE( \"Text compares lexically (fail)\" )\n    {\n        EXPECT( string(\"hello\") \u003e string(\"world\") );\n    },\n\n    CASE( \"Unexpected exception is reported\" )\n    {\n        EXPECT( (throw std::runtime_error(\"surprise!\"), true) );\n    },\n\n    CASE( \"Unspecified expected exception is captured\" )\n    {\n        EXPECT_THROWS( throw std::runtime_error(\"surprise!\") );\n    },\n\n    CASE( \"Specified expected exception is captured\" )\n    {\n        EXPECT_THROWS_AS( throw std::bad_alloc(), std::bad_alloc );\n    },\n\n    CASE( \"Expected exception is reported missing\" )\n    {\n        EXPECT_THROWS( true );\n    },\n\n    CASE( \"Specific expected exception is reported missing\" )\n    {\n        EXPECT_THROWS_AS( true, std::runtime_error );\n    },\n};\n\nint main( int argc, char * argv[] )\n{\n    return lest::run( specification, argc, argv );\n}\n```\nNote: besides above table approach, *lest* also supports [auto-registration of tests](#test-case-macro).\n\n### Compile and run\n\n```\nprompt\u003eg++ -Wall -Wextra -std=c++11 -I../include/lest -o 05_select.exe 05_select.cpp \u0026\u0026 05_select.exe\n05_select.cpp:17: failed: Text compares lexically (fail): string(\"hello\") \u003e string(\"world\") for \"hello\" \u003e \"world\"\n05_select.cpp:22: failed: got unexpected exception with message \"surprise!\": Unexpected exception is reported: (throw std::runtime_error(\"surprise!\"), true)\n05_select.cpp:37: failed: didn't get exception: Expected exception is reported missing: true\n05_select.cpp:42: failed: didn't get exception of type std::runtime_error: Specific expected exception is reported missing: true\n4 out of 7 selected tests failed.\n```\n\nWith [Buck](https://buckbuild.com/):\n```\nprompt\u003e buck run example/:05_select\n...\n```\n\n\nIn a nutshell\n-------------\n\n**lest** is a small C++11 test framework for unit testing, regression testing, [Test-driven development (TDD)](http://en.wikipedia.org/wiki/Test-driven_development) and [Behaviour-driven design (BDD)](http://dannorth.net/introducing-bdd/). It replicates innovative ideas in C++ testing from the [Catch test framework](https://github.com/philsquared/Catch) such as [function-level fixtures](#fixture-macros) and [expression-decomposing assertion macros](#assertion-macros) in a form that is compact enough to read in five minutes. The lest_cpp03 variant provides similar capabilities to use with C++98/03 compilers.\n\n**Features and properties of lest** are ease of installation (single header), no boilerplate code,  traditional unit test cases and BDD style scenarios, strings as test names, function-level fixtures, expression-decomposing assertion macros, support for floating point comparison, test selection from commandline, test duration timing, test randomisation and sorting, display of passing tests, colourised output (compile-time option), C++11 code and a C++98/03 variant with comparable features (also compilable as C++11). \n\n**Features available via other projects** are mocking (see [integrate Trompeloeil mocking framework](#main-trompeloeil)) and hamcrest matchers (see [variants of lest](#variants-of-lest)), \n\n**Not provided** are things present in [other test frameworks](#other-test-frameworks), such as suites of tests, value-parameterised tests, type-parameterised tests, test data generators, customisable reporting, easy logging of extra information, breaking into a debugger, concurrent execution of tests, isolated execution of tests, Visual Studio Test Adapter.\n\n\nLicense\n-------\n*lest* uses the [Boost Software License](LICENSE.txt).\n \n\nDependencies\n------------\n*lest* has no other dependencies than the [C++ standard library](http://en.cppreference.com/w/cpp/header).\n\n\nInstallation\n------------\n\n*lest* is a single-file header-only library. Put `lest.hpp`, or a variant of it such as `lest_cpp03.hpp` directly into the project source tree or somewhere reachable from your project.\n\n\nUsage\n--------\n- [Making a case](#test-case-macro) \u0026ndash; [example](example/05-select.cpp#L9)\n- [Asserting for success](#assertion-macros) \u0026ndash; [example](example/05-select.cpp#L11)\n- [Asserting for failure](#assertion-macros) \u0026ndash; [example](example/05-select.cpp#L13)\n- [Asserting for exceptions](#assertion-macros) \u0026ndash; [example](example/05-select.cpp#L28)\n- [Asserting for a specific exception](#assertion-macros) \u0026ndash; [example](example/05-select.cpp#L33)\n- [Comparing floating point numbers](#floating-point-comparison) \u0026ndash; [example](example/06-approx.cpp).\n- [Auto test registration](#test-case-macro) \u0026ndash; [single-file example](example/11-auto-reg.cpp)\n- [Auto test registration with multiple source files](#test-case-macro) \u0026ndash; [example part  1](example/13-module-auto-reg-1.cpp), [2](example/13-module-auto-reg-2.cpp), [3](example/13-module-auto-reg-3.cpp). \n- [Non-auto test registration](#test-case-macro) \u0026ndash; [single-file example](example/05-select.cpp) \n- [Non-auto test registration with multiple source files](#module-registration-macro) \u0026ndash; [example part 1](example/12-module-1.cpp), [2](example/12-module-2.cpp), [3](example/12-module-3.cpp).\n- [Using fixtures](#fixture-macros) \u0026ndash; [example](example/09-fixture.cpp).\n- [Using *lest* assertions in a (reusable) user-defined function or lambda](#tests) \u0026ndash; [function](example/15-extract-function.cpp), [templated function](example/15-extract-template-function.cpp), [lambda](example/15-extract-lambda.cpp).\n- [Writing the test main function](#main) \u0026ndash; [single-file auto](example/11-auto-reg.cpp), [non-auto](example/05-select.cpp) \u0026ndash; [multi-file auto part 1](example/13-module-auto-reg-1.cpp), [2](example/13-module-auto-reg-2.cpp), [3](example/13-module-auto-reg-3.cpp), [non-auto part 1](example/12-module-1.cpp), [2](example/12-module-2.cpp), [3](example/12-module-3.cpp).\n- [Integrating *lest* with the Trompeloeil mocking framework](#main-trompeloeil) \u0026ndash; [example](example/16-trompeloeil-runtime.cpp).\n- [Reporting a user-defined type](#reporting-a-user-defined-type) \u0026ndash; [example](example/07-udt.cpp).\n- [Running tests](#command-line)\n\n\nSynopsis\n--------\n\n**Contents**  \n- [Command line](#command-line)\n- [Test case macro](#test-case-macro)\n- [Fixture macros](#fixture-macros)\n- [Assertion macros](#assertion-macros)\n- [BDD style macros](#bdd-style-macros)\n- [Module registration macro](#module-registration-macro)\n- [Other macros](#other-macros)\n- [Namespace](#namespace)\n- [Tests](#tests)\n- [Main](#main)\n- [Main (Trompeloeil)](#main-trompeloeil)\n- [Floating point comparison](#floating-point-comparison)\n- [Reporting a user-defined type](#reporting-a-user-defined-type)\n\n### Command line\nUsage: **test** [options] [_test-spec_ ...]  \n\nOptions:\n- `-h, --help`, this help message\n- `-a, --abort`, abort at first failure\n- `-c, --count`, count selected tests\n- `-g, --list-tags`, list tags of selected tests\n- `-l, --list-tests`, list selected tests\n- `-p, --pass`, also report passing tests\n- `-t, --time`, list duration of selected tests\n- `-v, --verbose`, also report passing or failing sections\n- `--order=declared`, use source code test order (default)\n- `--order=lexical`, use lexical sort test order\n- `--order=random`, use random test order\n- `--random-seed=n`, use *n* for random generator seed\n- `--random-seed=time`, use time for random generator seed\n- `--repeat=n`, repeat selected tests *n* times (-1: indefinite)\n- `--version`, report lest version and compiler used\n- `--`, end options\n\nTest specification:\n- `\"@\"`, `\"*\"`: all tests, unless excluded\n- _empty_: all tests, unless tagged [hide] or [.*optional-name*]\n- `\"text\"`: select tests that contain _text_ (case insensitive)\n- `\"!text\"`: omit tests that contain _text_ (case insensitive)\n\nTest descriptions can contain tags such as `[option]`, `[hide]` and `[.integration]`. Tests that contain the tag `[hide]` or a tag that starts with `[.` in their description are skipped, unless they are specifically selected by specifying `\"@\"`, `\"*\"`, or by specifying (part of) the tag.\n\nTest specifications can be combined and are evaluated left-to-right. For example: `a !ab abc` selects all tests that contain 'a', except those that contain 'ab', but include those that contain 'abc'.\n\nWhen regular expression selection has been enabled (and works), test specifications can use the regular expression syntax of `std::regex_search()`. See also `lest_FEATURE_REGEX_SEARCH` in section [Other Macros](#other-macros).\n\n### Test case macro\nA *lest* test specification can consist of a) one or more arrays of test cases that use lambdas, or b) auto-registered test cases that use free functions. See also macro [lest_FEATURE_AUTO_REGISTER](#other-macros). \n\n**CASE(** \"_proposition_\" **) {** _code_ **}** \u0026emsp; *(array of cases)*  \nDescribe the expected behaviour to test for and specify the actions and expectations. See also section [Module registration macro](#module-registration-macro) \u0026ndash; [Single-file code example](example/02-basic.cpp) \u0026ndash; [Multi-file code example part 1](example/12-module-1.cpp), [2](example/12-module-2.cpp), [3](example/12-module-3.cpp).\n\n**CASE_ON(** \"_proposition_\", ...**) {** _code_ **}** \u0026emsp; *(array of cases, since v1.33)*  \nDescribe the expected behaviour to test for and specify the actions and expectations. After the description you can add a lambda capture list to refer to symbols in the enclosing scope. See also section [Module registration macro](#module-registration-macro) \u0026ndash; [Single-file code example](example/02-basic.cpp) \u0026ndash; [Multi-file code example part 1](example/12-module-1.cpp), [2](example/12-module-2.cpp), [3](example/12-module-3.cpp).\n\n**lest_CASE(** _specification_, \"_proposition_\" **) {** _code_ **}** \u0026emsp; *(auto-registered cases)*  \nProvide the collection of test cases, describe the expected behaviour to test for and specify the actions and expectations. Consider defining macro CASE(_proposition_) to hide the collection of test cases and define it in terms of lest_CASE(...) \u0026ndash; [Single-file code example](example/11-auto-reg.cpp)  \u0026ndash; [Multi-file code example part  1](example/13-module-auto-reg-1.cpp), [2](example/13-module-auto-reg-2.cpp), [3](example/13-module-auto-reg-3.cpp). \n\n### Fixture macros\n*lest* provides function-level fixtures. Fixtures are stack-based and their setup and teardown occurs at the block scope of SETUP and (nested) SECTIONs \u0026ndash; [Code example](example/09-fixture.cpp).\n\n**SETUP(** \"_context_\" **) {** _code_ **}**  \nDescribe and setup the context to use afresh in each enclosed section. \n\n**SECTION(** \"_proposition_\" **) {** _code_ **}**  \nDescribe the expected behaviour to test for using the enclosing context and specify the actions and expectations. The objects in the enclosing setup or section come into existence and go out of scope for each section. A section must be enclosed in setup or in another section. \n\n### Assertion macros\n*lest* has expression-decomposing assertion macros. An expression with strings such as `hello \u003e world` may be reported with code and expansion as `hello \u003e world (\"hello\" \u003e \"world\")`. As a consequence, only a few assertion macro variants are needed \u0026ndash; [Code example](example/05-select.cpp).\n\n**EXPECT(** _expr_ **)**  \nEvaluate the expression and report failure. If an exception is thrown it is caught, reported and counted as a failure.\n\n**EXPECT_NOT(** _expr_ **)**  \nEvaluate the expression, record the *logical not* of its result and report failure. If an exception is thrown it is caught, reported and counted as a failure. This macro is a workaround to circumvent ! prefixed expressions as these cannot be decomposed.\n\n**EXPECT_NO_THROW(** _expr_ **)**  \nExpect that no exception (of any type) is thrown during evaluation of the expression.\n\n**EXPECT_THROWS(** _expr_ **)**  \nExpect that an exception (of any type) is thrown during evaluation of the expression.\n\n**EXPECT_THROWS_AS(** _expr_, _exception_ **)**  \nExpect that an exception of the specified type is thrown during evaluation of the expression.\n\nIf an assertion fails, the remainder of the test that assertion is part of is skipped.\n\n### BDD style macros\n*lest* provides several macros to write [Behaviour-Driven Design (BDD)](http://dannorth.net/introducing-bdd/) style scenarios \u0026ndash; [Code example](example/10-bdd.cpp), [auto-registration](example/10-bdd-auto.cpp).\n\n**lest_SCENARIO(** _specification_, \"_sketch_\" **) {** _code_ **}** \u0026emsp; *(auto-registered cases)*     \n\n**SCENARIO(** \"_sketch_\" **) {** _code_ **}** \u0026emsp; *(array of cases)*  \n\n**GIVEN(** \"_context_\" **) {** _code_ **}**  \n\n**WHEN(** \"_action_\" **) {** _code_ **}**  \n\n**THEN(** \"_result_\" **) {** _code_ **}**  \n\n**AND_WHEN(** \"_action_\" **) {** _code_ **}**  \n\n**AND_THEN(** \"_result_\" **) {** _code_ **}**  \n\nThese macros simply map to macros CASE(), SETUP() and SECTION().\n\nFor auto-registered scenarios, consider defining macro SCENARIO(proposition) to hide the collection of scenarios and define it in terms of lest_SCENARIO(...).\n\n### Module registration macro\nWhen using *arrays of  test cases* written across multiple files, you can use macro MODULE() to add a module's test cases to the overall specification \u0026ndash; [Code example part 1](example/12-module-1.cpp), [2](example/12-module-2.cpp), [3](example/12-module-3.cpp).\n\n**MODULE(** _overall-specification_, _module-specification_ **)**  \nRegister this module's test specification with the overall specification.\n\nNote that with *lest* using [auto test case registration](#other-macros) there's no need for macro MODULE(), see the [auto-registration example part  1](example/13-module-auto-reg-1.cpp), [2](example/13-module-auto-reg-2.cpp), [3](example/13-module-auto-reg-3.cpp). The same holds for *lest_cpp03*, see [cpp03 example part 1](example/14-module-cpp03-1.cpp), [2](example/14-module-cpp03-2.cpp), [3](example/14-module-cpp03-3.cpp).\n\n### Other macros\n-D\u003cb\u003elest_NO_SHORT_MACRO_NAMES\u003c/b\u003e  \n-D\u003cb\u003elest_NO_SHORT_ASSERTION_NAMES\u003c/b\u003e (deprecated)  \nAll public API macros of _lest_ exist as lest\\_*MACRO* and shorthand _MACRO_ variant. Define this macro to omit the shorthand macros.\n\n-D\u003cb\u003elest_FEATURE_AUTO_REGISTER\u003c/b\u003e=0  \nDefine this to 1 to enable auto registration of test cases.  Default is 0.\n\nSee also section [Test case macro](#test-case-macro).\n\n-D\u003cb\u003elest_FEATURE_COLOURISE\u003c/b\u003e=0  \nDefine this to 1 to emphasise success and failure with colour. Default is 0.\n\nNote: [ANSI colour codes](http://en.wikipedia.org/wiki/ANSI_escape_code) are used. On Windows versions that [lack support for this](http://stackoverflow.com/questions/16755142/how-to-make-win32-console-recognize-ansi-vt100-escape-sequences) you can use the [ANSICON](https://github.com/adoxa/ansicon) terminal. Executables can be obtained [here](http://ansicon.adoxa.vze.com/).\n\n-D\u003cb\u003elest_FEATURE_LITERAL_SUFFIX\u003c/b\u003e=0  \nDefine this to 1 to append `u`, `l`, a combination of these, or `f` to numeric literals. Default is 0.\n\n-D\u003cb\u003elest_FEATURE_REGEX_SEARCH\u003c/b\u003e=0  \nDefine this to 1 to enable regular expressions to select tests. Default is 0.\n\nNote: You have to make sure the compiler's library has a working `std::regex_search()`; not all do currently. GCC 4.8.1's regex search function doesn't work yet. Visual C++ probably has a working regex search function since VC9, Visual Studio 2008 (tested VC10, Visual Studio 2010).\n\n-D\u003cb\u003elest_FEATURE_TIME_PRECISION\u003c/b\u003e=0  \nDefine this to set the precision of the duration in ms reported with option --time. Default is 0.\n\n-D\u003cb\u003elest_FEATURE_WSTRING\u003c/b\u003e=1  \nDefine this to 0 to remove references to std::wstring. Default is 1.\n\n-D\u003cb\u003elest_FEATURE_RTTI\u003c/b\u003e (undefined)  \n*lest* tries to determine if RTTI is available itself. If that doesn't work out, define this to 1 or 0 to include or remove uses of RTTI (currently a single occurrence of `typeid` used for reporting a type name). Default is undefined.\n\n### Namespace\nnamespace **lest** { }  \nTypes and functions are located in namespace lest.\n\n### Tests\nstruct **env** { };  \n\nstruct **test**  \n{  \n\u0026emsp;std::string name;  \n\u0026emsp;std::function\\\u003cvoid( env \u0026 )\\\u003e behaviour;  \n};\n\nYou'll need type `env` and variable `lest_env` when you have a test case that calls a user-defined function or lambda that uses lest assertions like `EXPECT()` \u0026ndash; [Call reusable function](example/15-extract-function.cpp), [Call reusable templated function](example/15-extract-template-function.cpp), and [Call reusable lambda](example/15-extract-lambda.cpp).\n\n### Main\nA typical `main()` function for *lest* may look as follows:\n```Cpp\n#include \"lest.hpp\"\n\nconst lest::test specification[] = { CASE(\"...\"){} };\n\nint main( int argc, char *argv[] )\n{\n    if ( int failures = lest::run( specification, argc, argv ) )\n        return failures;\n    \n    return std::cout \u003c\u003c \"All tests passed\\n\", EXIT_SUCCESS;\n}\n```\n\nCompile and run:\n```\nprompt\u003eg++ -std=c++11 -o main.exe -I./include/lest main.cpp \u0026\u0026 main.exe\nAll tests passed\n```\n\nOr, if feedback on success is moved to the command line:\n```Cpp\n#include \"lest.hpp\"\n\nconst lest::test specification[] = { CASE(\"...\"){} };\n\nint main( int argc, char *argv[] )\n{\n    return lest::run( specification, argc, argv );\n}\n```\n\nCompile and run with feedback on success:\n```\nprompt\u003eg++ -std=c++11 -o main.exe -I./include/lest main.cpp \u0026\u0026 main.exe \u0026\u0026 echo All tests passed\nAll tests passed\n```\n\nYou can use the following variants of *lest*'s `run()` function in main.\n\ninline  \nint **run(** std::vector\\\u003ctest\\\u003e _specification_, std::vector\\\u003cstd::string\\\u003e _arguments_, std::ostream \u0026 _os_ = std::cout );\n\ninline  \nint **run(** std::vector\\\u003ctest\\\u003e _specification_, int _argc_, char \\* _argv_[], std::ostream \u0026 _os_ = std::cout );\n\n\ntemplate\\\u003cstd::size_t N\\\u003e  \nint **run(** test const (\u0026 _specification_ )[N], std::ostream \u0026 _os_ = std::cout **)**;\n\ntemplate\\\u003cstd::size_t N\\\u003e  \nint **run(** test const (\u0026 _specification_ )[N], std::vector\\\u003cstd::string\\\u003e _arguments_, std::ostream \u0026 _os_ = std::cout **)**;\n\ntemplate\\\u003cstd::size_t N\\\u003e  \nint **run(** test const (\u0026 _specification_ )[N], int _argc_, char \\* _argv_[], std::ostream \u0026 _os_ = std::cout **)**;\n\n- _specification_ - collection of tests\n- _arguments_ - options and arguments to select and omit tests\n- _argc_, _arcv_ - options and arguments to select and omit tests\n- _os_ - stream to report to\n- returns number of failing tests\n\n### Main (Trompeloeil)\n\nYou can integrate the [Trompeloeil mocking framework](https://github.com/rollbear/trompeloeil) with *lest* by providing a reporter for Trompeloeil \u0026ndash; [Code example](example/16-trompeloeil-runtime.cpp).\n\n```Cpp\n#include \"lest.hpp\"\n#include \"trompeloeil.hpp\"\n\nint main( int argc, char * argv[] )\n{\n    std::ostream \u0026 stream = std::cout;\n    \n    trompeloeil::set_reporter(\n        [\u0026stream]( trompeloeil::severity severity, const char * file, unsigned long line, std::string const \u0026 msg )\n    {\n        if ( severity == trompeloeil::severity::fatal )\n        {\n            throw lest::message{\"\", lest::location{ line ? file : \"[file/line unavailable]\", int(line) }, \"\", msg };\n        }\n        else\n        {   \n            stream \u003c\u003c lest::location{ line ? file : \"[file/line unavailable]\", int(line) } \u003c\u003c \": \" \u003c\u003c msg;\n        }\n    });\n\n    return lest::run( specification, argc, argv, stream );\n}\n```\n\n### Floating point comparison\n*lest* provides `class approx` to compare floating point values \u0026ndash; [Code example](example/06-approx.cpp).\n\nclass **approx** { };  \n\nUse `approx` as follows:\n\nEXPECT( 1.23 == approx( 1.23 ) );  \nEXPECT( 1.23 != approx( 1.24 ) );  \n\nEXPECT( 1.23 != approx( 1.231 ) );  \nEXPECT( 1.23 == approx( 1.231 ).epsilon( 0.1 ) );  \n\napprox custom = approx::custom().epsilon( 0.1 );  \n    \nEXPECT( approx( 1.231 ) != 1.23 );  \nEXPECT( custom( 1.231 ) == 1.23 );  \n\nClass `approx` also provides *less-than or equal* and *greater-than or equal* operators.\n\n### Reporting a user-defined type\n*lest* allows you to report a user-defined type via operator\u003c\u003c() \u0026ndash; [Code example](example/07-udt.cpp).\n\nTo report a type not yet supported by *lest*, define a streaming function for it:  \n\nnamespace ns {  \n\u0026emsp;struct _user-defined-type_ { ... };  \n\u0026emsp;std::ostream \u0026 **operator\u003c\u003c** ( std::ostream \u0026 os, _user-defined-type_ const \u0026 _type_ )  \n\u0026emsp;{  \n\u0026emsp;\u0026emsp;using lest::to_string;  \n\u0026emsp;\u0026emsp;return os \u003c\u003c ... ;  \n\u0026emsp;}  \n}\n\nIn it, stream the constituent parts of the type via lest's `to_string()` conversion functions.\n\n\nVariants of *lest*\n------------------\n\nVarious variants of *lest* are kept here. The simple ones, such as `lest_basic` and `lest_decompose` provide an easy read into the techniques used and remain the tiny test frameworks that are a good fit to include with small projects.\n\nYou are encouraged to take it from here and change and expand it as you see fit and publish your variant. If you do, I'd much appreciate to hear from you!\n\n- lest.hpp - lest's latest development, this project.\n- lest_basic.hpp - lest at its very basic, this project.\n- lest_decompose.hpp - lest with expression decomposition, this project.\n- lest_cpp03.hpp - lest with expression decomposition for C++03, this project.\n- [hamlest](https://github.com/martinmoene/hamlest) - matchers for lest.\n- [lest with groups](https://github.com/pmed/lest/tree/test_group) - Pavel Medvedev\n\n\nFeatures of *lest*\n------------------\n\nFeature / variant             | latest  | cpp03  | decompose  | basic    |\n------------------------------|:-------:|:-------:|:--------:|:--------:|\nAssert expressions            | \u0026#10003;| \u0026#10003;| \u0026#10003; | \u0026#10003; |\nAssert exceptions             | \u0026#10003;| \u0026#10003;| \u0026#10003; | \u0026#10003; |\nAssert abortion (death)       | [contrib](contrib/lest_expect_abort/)  | [contrib](contrib/lest_expect_abort/)  | - | - |\nAssert assertions (death)     | [contrib](contrib/lest_expect_assert/) | [contrib](contrib/lest_expect_assert/) | - | - |\nExpression decomposition      | \u0026#10003;| modest  | modest    | -     |\nLiteral suffix u, l, f        | \u0026#10003;| -       | -         | -     |\nColourised output             | \u0026#10003;| \u0026#10003;| -         | -     |\nBDD style scenarios           | \u0026#10003;| \u0026#10003;| -         | -     |\nFixtures (sections)           | \u0026#10003;| \u0026#10003;| -         | -     |\nFloating point comparison, approx|\u0026#10003;| \u0026#10003;| -       | -     |\nFloating point comparison, ulp| -       | -       | -         | -     |\nTest selection (include/omit) | \u0026#10003;| \u0026#10003;| -         | -     |\nTest selection (regexp)       | \u0026#10003;| \u0026#10003;| -         | -     |\nHelp screen                   | \u0026#10003;| \u0026#10003;| -         | -     |\nAbort at first failure        | \u0026#10003;| \u0026#10003;| -         | -     |\nCount selected tests          | \u0026#10003;| \u0026#10003;| -         | -     |\nList tags of selected tests   | \u0026#10003;| \u0026#10003;| -         | -     |\nList selected tests           | \u0026#10003;| \u0026#10003;| -         | -     |\nReport passing tests          | \u0026#10003;| \u0026#10003;| -         | -     |\nTime duration of tests        | \u0026#10003;| \u0026#10003;| -         | -     |\nControl order of tests        | \u0026#10003;| \u0026#10003;| -         | -     |\nRepeat tests                  | \u0026#10003;| \u0026#10003;| -         | -     |\nAuto registration of tests    | \u0026#10003;| \u0026#10003;| -         | -     |\nModules of tests              | \u0026#10003;| \u0026#10003;| -         | -     |\n\u0026nbsp;                        | \u0026nbsp;  | \u0026nbsp;  |\u0026nbsp;     |\u0026nbsp; |\nSuites of tests               | -       | -       | -         | -     |\nValue-parameterised tests     | -       | -       | -         | -     |\nType-parameterised tests      | -       | -       | -         | -     |\nTest data generators          | -       | -       | -         | -     |\n[Hamcrest matchers](#variants-of-lest)| +/-| -    | -         | -     |\nMocking support               | -       | -       | -         | -     |\nLogging facility              | -       | -       | -         | -     |\nBreak into debugger           | -       | -       | -         | -     |\nConcurrent execution of tests | -       | -       | -         | -     |\nIsolated execution of tests   | -       | -       | -         | -     |\n\n\nReported to work with\n---------------------\n\nThe table below mentions the lowest version of a compiler `lest` is reported to work with.\n \nVariant / compiler     | clang | GCC   | VC    |\n-----------------------|-------|-------|-------|\nlest (latest)          |  3.2  | 4.8.1 | 12    |\nlest_basic             |  3.2  | 4.6   | 12    |\nlest_decompose         |  3.2  | 4.6   | 12    |\nlest_cpp03 (decompose) |  ?    | ?     | 8     |\n\n**Note**: I've made a few concessions to enable compilation of `lest.hpp` with Visual C++:\n- Prevent [error C2797](https://connect.microsoft.com/VisualStudio/feedbackdetail/view/917150): replace braced member initialisation with C++98 style initialisation.\n- Prevent [error C2144](https://connect.microsoft.com/VisualStudio/feedbackdetail/view/812488): use `enum{ value }` instead of `static constexpr bool` in struct `is_container` (for VC only).\n\n\nBuilding tests and examples\n---------------------------\nTests and examples can be build with Buck, via Makefiles or by using CMake.\n\nTo build the tests and examples as described below you need:\n\n- [Buck](https://buckbuild.com/) or [CMake](http://cmake.org) version 2.8 or later to be installed and in your PATH.\n- A [suitable compiler](#reported-to-work-with). \n\nThe following steps assume that the [*lest* source code](https://github.com/martinmoene/lest) has been cloned into a directory named `lest`.\n\n### Buck\n\n```\nlest\u003e buck run test:test_lest_basic\nlest\u003e buck run test:test_lest_cpp03\nlest\u003e buck run test:test_lest_decompose\nlest\u003e buck run test:test_lest\n```\n\n### CMake\n\n1. Create a directory for the build outputs for a particular architecture.  \nHere we use lest/build.\n\n        lest\u003e mkdir build \u0026\u0026 cd build\n\n2. Configure CMake to use the compiler of your choice (run `cmake --help` for a list) and build the tests for *lest* and the examples.\n\n        lest/build\u003e cmake -G \"Unix Makefiles\" [see 3. below] ..\n\n3. Optional. You can control above configuration through the following options:\n\t- `-DLEST_BUILD_TEST=ON`: build the tests for lest, default on\n\t- `-DLEST_BUILD_EXAMPLE=ON`: build the examples, default on\n\t- `-DLEST_BUILD_CONTRIB=OFF`: build the contrib folder, default off\n\t- `-DLEST_EXTRA_WARNINGS=OFF`: build with extra warnings and warnings as errors, default off\n\n4. Build the test suite.    \n\n        lest/build\u003e cmake --build .\n\n5. Run the test suite.    \n\n        lest/build\u003e ctest -V\n\nAll tests should pass, indicating your platform is supported and you are ready to use *lest*. Note that quite some examples fail. They do so to demonstrate the usage of things.\n\n\nContributions to *lest*\n-----------------------\nFolder [contrib](contrib) contains extensions to *lest*. These extensions are not part of *lest* itself because for example they use non-standard behaviour, they  are considered to be for a too-specific use case, or they are considered not yet ripe for inclusion in *lest* and we first like to gain more experience with them. \n\n\nOther test frameworks\n---------------------\nThis [comparison of Catch, doctest and lest](https://github.com/martinmoene/catch-lest-other-comparison#catchdoctestlest-feature-comparison) in table form may help you to discover similarities and differences of these frameworks.\n\n- [Catch](https://github.com/philsquared/Catch) - A modern, C++-native, header-only, framework for unit-tests, TDD and BDD.\n- [doctest](https://github.com/onqtam/doctest) - The lightest feature-rich C++ single-header testing framework for unit tests and TDD. Catch/lest-inspired tests that accompany code.\n- [stf](https://github.com/jfalcou/stf) - Simple TDD Framework. Catch/lest-inspired with an emphasis on floating point precision testing.  \n- [cute](https://github.com/Kosta-Github/cute) - C++ unit test executor.\n- [bandit](http://banditcpp.github.io/bandit/) - Human friendly unit testing for C++11.\n- [igloo](http://igloo-testing.org/) - BDD style unit testing for C++.\n- [mettle](https://github.com/jimporter/mettle) - A C++14 unit test framework.\n- [CppUTest](http://cpputest.github.io/) - Unit testing and mocking framework for C/C++.\n- [UnitTest++](https://github.com/unittest-cpp/unittest-cpp) - A lightweight unit testing framework for C++.\n- [xUnit++](https://bitbucket.org/moswald/xunit/wiki/Home) - A unit testing platform for C++ inspired by [xUnit.net](http://xunit.github.io/).\n- [ZenUnit](https://github.com/NeilJustice/ZenUnit) - Single-header C++ unit testing framework for value- and type-parameterized tests.\n- [Search for C++98 test frameworks on GitHub](https://github.com/search?q=language%3AC%2B%2B+98+test+framework\u0026type=Repositories\u0026ref=advsearch)\n- [Search for C++11 test frameworks on GitHub](https://github.com/search?q=language%3AC%2B%2B+11+test+framework\u0026type=Repositories\u0026ref=advsearch)\n- [Search for C++14 test frameworks on GitHub](https://github.com/search?q=language%3AC%2B%2B+14+test+framework\u0026type=Repositories\u0026ref=advsearch)\n- [List of C++ unit testing frameworks](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C.2B.2B) at Wikipedia.\n\n\nNotes and references\n--------------------\n\n[1] [Kevlin Henney on Rethinking Unit Testing in C++](http://accu.org/index.php/accu_branches/accu_london/accu_london_may_2010)  ([Video](http://skillsmatter.com/podcast/agile-testing/kevlin-henney-rethinking-unit-testing-in-c-plus-plus)).\n\n[2] Martin Moene. [Elefant C++11 test setup](http://lists.accu.org/mailman/private/accu-general/2013-June/040594.html) on the [ACCU](http://accu.org/) mailing list accu-general (requires login). It mentions the C++11 test appoach Andrzej Krzemie\u0026#x144;ski uses for [Optional. A library for optional (nullable) objects for C++11](https://github.com/akrzemi1/Optional/).\n\n[3] Phil Nash. [CATCH, an automated test framework for C, C++ and Objective-C](http://builds.catch-lib.net/).\n\n[4] A more technically informed name: lest - lambda engaged small tester.\n\n","versions":[{"ref":"master","manifest":"targets = [ \"//:lest\" ]","lockFile":"manifest = \"5ac8dce829605b310f8c94c92b1cd18ac78b30ef6fc991cb691f2217bd0c1a43\"\n\n","buck":"load('//:subdir_glob.bzl', 'subdir_glob')\n\nprebuilt_cxx_library(\n  name = 'lest',\n  header_only = True,\n  header_namespace = '',\n  exported_headers = subdir_glob([\n    ('include/lest', '**/*.hpp'),\n  ]),\n  visibility = [\n    'PUBLIC',\n  ],\n)\n","bazel":"","deps":[],"lock":[]}],"updated":"2020-05-04T16:56:06Z","updatedUpstream":"2020-12-25T12:29:08Z","contributors":[{"login":"wilhelmtell","avatarUrl":"https://avatars0.githubusercontent.com/u/1458?u=cc95eb27944115e2a4370ac950fbfd5ec5fbd4e9\u0026v=4"},{"login":"pdewacht","avatarUrl":"https://avatars2.githubusercontent.com/u/223495?u=2cbf208d9940bcb5a4bbbd37d12820b4ae7984ba\u0026v=4"},{"login":"pmed","avatarUrl":"https://avatars2.githubusercontent.com/u/1122386?v=4"},{"login":"jwakely","avatarUrl":"https://avatars1.githubusercontent.com/u/1254480?v=4"},{"login":"njlr","avatarUrl":"https://avatars2.githubusercontent.com/u/1577531?u=b805a63f8054b62169749f2c9d2e89eb53af57d7\u0026v=4"},{"login":"martinmoene","avatarUrl":"https://avatars0.githubusercontent.com/u/1999290?v=4"},{"login":"miguelmartin75","avatarUrl":"https://avatars2.githubusercontent.com/u/3168050?u=0e2053ca7ad539818cbf2cf0b8ccec12823a4be9\u0026v=4"},{"login":"medithe","avatarUrl":"https://avatars2.githubusercontent.com/u/40990424?v=4"}],"fundingLinks":[],"contactLinks":[],"stars":312,"forks":38,"topics":["testing","cpp11","cpp98","header-only","no-dependencies","tdd","bdd","tiny-framework","single-file","cast"]}},"__N_SSG":true},"page":"/packages/[owner]/[name]","query":{"owner":"buckaroo-pm","name":"martinmoene-lest"},"buildId":"XEnVUsOG7VkTdg59Wro6f","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-617a3a2c770be2525c7f.js"></script><script src="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.9b549cceddc4472f1953.js" async=""></script><script src="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" async=""></script><script src="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" async=""></script><script src="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_buildManifest.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_ssgManifest.js" async=""></script></body></html>