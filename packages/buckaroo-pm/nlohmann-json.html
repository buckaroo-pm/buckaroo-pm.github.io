<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a0584ae5515792e72ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0584ae5515792e72ab5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9b549cceddc4472f1953.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" as="script"/><link rel="preload" href="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" as="script"/></head><body><div id="__next"><div class="site"><div class="navigation"><div class="view row space-between"><div class="links"><a class="buckaroo" href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="/blog">Blog</a></div><div class="search"><input placeholder="search for a module..." value=""/><button class="fa fa-search fa-large"></button></div><iframe id="star-button" src="https://ghbtns.com/github-btn.html?user=LoopPerfect&amp;repo=buckaroo&amp;type=star&amp;count=true&amp;size=large" frameBorder="0" scrolling="0" width="160px" height="30px"></iframe></div></div><div></div><div class="banner"><div style="display:flex"><div class="package"><img src="/packages/buckaroo-pm/nlohmann-json/logo.png"/></div><div><h1>buckaroo-pm/nlohmann-json</h1><div style="max-width:600px">JSON for Modern C++</div><br/><div><b>22725</b></div></div></div><div style="display:inline-flex;flex-flow:row wrap"><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json-pointer</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json-patch</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">cbor</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">msgpack</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">header-only</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">stl-containers</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json-serialization</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json-parser</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">rfc-6901</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">rfc-6902</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">rfc-7159</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">rfc-7049</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json-diff</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">messagepack</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">rfc-8259</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">ubjson</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">json-merge-patch</span><span class="tag" style="border-radius:5px;padding:10px;background:white;color:black;font-size:0.7em;margin:5px">bson</span></div></div><div style="display:flex;width:100%;justify-content:center;margin-top:-2.7em"><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:white;color:black;border:solid 1px #fff">ReadMe</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Buck</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Manifest</div><div class="tab-control" style="padding:0.5em;border-radius:0.2em;font-size:1.5em;background:none;color:white;border:solid 1px #fff">Dependencies</div></div><div class="banner white"><div class="view column"><h2>ReadMe</h2><p><a href="https://github.com/nlohmann/json/releases"><img src="https://raw.githubusercontent.com/nlohmann/json/master/doc/json.gif" alt="JSON for Modern C++"/></a></p><p><a href="https://travis-ci.org/nlohmann/json"><img src="https://travis-ci.org/nlohmann/json.svg?branch=master" alt="Build Status"/></a>
<a href="https://ci.appveyor.com/project/nlohmann/json"><img src="https://ci.appveyor.com/api/projects/status/1acb366xfyg3qybk/branch/develop?svg=true" alt="Build Status"/></a>
<a href="https://coveralls.io/r/nlohmann/json"><img src="https://img.shields.io/coveralls/nlohmann/json.svg" alt="Coverage Status"/></a>
<a href="https://scan.coverity.com/projects/nlohmann-json"><img src="https://scan.coverity.com/projects/5550/badge.svg" alt="Coverity Scan Build Status"/></a>
<a href="https://www.codacy.com/app/nlohmann/json?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=nlohmann/json&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/f3732b3327e34358a0e9d1fe9f661f08" alt="Codacy Badge"/></a>
<a href="https://lgtm.com/projects/g/nlohmann/json/context:cpp"><img src="https://img.shields.io/lgtm/grade/cpp/g/nlohmann/json.svg?logo=lgtm&amp;logoWidth=18" alt="Language grade: C/C++"/></a>
<a href="https://wandbox.org/permlink/TarF5pPn9NtHQjhf"><img src="https://img.shields.io/badge/try-online-blue.svg" alt="Try online"/></a>
<a href="http://nlohmann.github.io/json"><img src="https://img.shields.io/badge/docs-doxygen-blue.svg" alt="Documentation"/></a>
<a href="https://raw.githubusercontent.com/nlohmann/json/master/LICENSE.MIT"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="GitHub license"/></a>
<a href="https://github.com/nlohmann/json/releases"><img src="https://img.shields.io/github/release/nlohmann/json.svg" alt="GitHub Releases"/></a>
<a href="http://github.com/nlohmann/json/issues"><img src="https://img.shields.io/github/issues/nlohmann/json.svg" alt="GitHub Issues"/></a>
<a title="Average time to resolve an issue" href="http://isitmaintained.com/project/nlohmann/json"><img src="http://isitmaintained.com/badge/resolution/nlohmann/json.svg" alt="Average time to resolve an issue"/></a>
<a href="https://bestpractices.coreinfrastructure.org/projects/289"><img src="https://bestpractices.coreinfrastructure.org/projects/289/badge" alt="CII Best Practices"/></a></p><ul><li><a href="#design-goals">Design goals</a></li><li><a href="#integration">Integration</a><ul><li><a href="#cmake">CMake</a></li><li><a href="#package-managers">Package Managers</a></li></ul></li><li><a href="#examples">Examples</a><ul><li><a href="#json-as-first-class-data-type">JSON as first-class data type</a></li><li><a href="#serialization--deserialization">Serialization / Deserialization</a></li><li><a href="#stl-like-access">STL-like access</a></li><li><a href="#conversion-from-stl-containers">Conversion from STL containers</a></li><li><a href="#json-pointer-and-json-patch">JSON Pointer and JSON Patch</a></li><li><a href="#json-merge-patch">JSON Merge Patch</a></li><li><a href="#implicit-conversions">Implicit conversions</a></li><li><a href="#arbitrary-types-conversions">Conversions to/from arbitrary types</a></li><li><a href="#specializing-enum-conversion">Specializing enum conversion</a></li><li><a href="#binary-formats-bson-cbor-messagepack-and-ubjson">Binary formats (BSON, CBOR, MessagePack, and UBJSON)</a></li></ul></li><li><a href="#supported-compilers">Supported compilers</a></li><li><a href="#license">License</a></li><li><a href="#contact">Contact</a></li><li><a href="#thanks">Thanks</a></li><li><a href="#used-third-party-tools">Used third-party tools</a></li><li><a href="#projects-using-json-for-modern-c">Projects using JSON for Modern C++</a></li><li><a href="#notes">Notes</a></li><li><a href="#execute-unit-tests">Execute unit tests</a></li></ul><h2>Design goals</h2><p>There are myriads of <a href="http://json.org">JSON</a> libraries out there, and each may even have its reason to exist. Our class had these design goals:</p><ul><li><p><strong>Intuitive syntax</strong>. In languages such as Python, JSON feels like a first class data type. We used all the operator magic of modern C++ to achieve the same feeling in your code. Check out the <a href="#examples">examples below</a> and you&#x27;ll know what I mean.</p></li><li><p><strong>Trivial integration</strong>. Our whole code consists of a single header file <a href="https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp"><code>json.hpp</code></a>. That&#x27;s it. No library, no subproject, no dependencies, no complex build system. The class is written in vanilla C++11. All in all, everything should require no adjustment of your compiler flags or project settings.</p></li><li><p><strong>Serious testing</strong>. Our class is heavily <a href="https://github.com/nlohmann/json/tree/develop/test/src">unit-tested</a> and covers <a href="https://coveralls.io/r/nlohmann/json">100%</a> of the code, including all exceptional behavior. Furthermore, we checked with <a href="http://valgrind.org">Valgrind</a> and the <a href="https://clang.llvm.org/docs/index.html">Clang Sanitizers</a> that there are no memory leaks. <a href="https://github.com/google/oss-fuzz/tree/master/projects/json">Google OSS-Fuzz</a> additionally runs fuzz tests against all parsers 24/7, effectively executing billions of tests so far. To maintain high quality, the project is following the <a href="https://bestpractices.coreinfrastructure.org/projects/289">Core Infrastructure Initiative (CII) best practices</a>.</p></li></ul><p>Other aspects were not so important to us:</p><ul><li><p><strong>Memory efficiency</strong>. Each JSON object has an overhead of one pointer (the maximal size of a union) and one enumeration element (1 byte). The default generalization uses the following C++ data types: <code>std::string</code> for strings, <code>int64_t</code>, <code>uint64_t</code> or <code>double</code> for numbers, <code>std::map</code> for objects, <code>std::vector</code> for arrays, and <code>bool</code> for Booleans. However, you can template the generalized class <code>basic_json</code> to your needs.</p></li><li><p><strong>Speed</strong>. There are certainly <a href="https://github.com/miloyip/nativejson-benchmark#parsing-time">faster JSON libraries</a> out there. However, if your goal is to speed up your development by adding JSON support with a single header, then this library is the way to go. If you know how to use a <code>std::vector</code> or <code>std::map</code>, you are already set.</p></li></ul><p>See the <a href="https://github.com/nlohmann/json/blob/master/.github/CONTRIBUTING.md#please-dont">contribution guidelines</a> for more information.</p><h2>Integration</h2><p><a href="https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp"><code>json.hpp</code></a> is the single required file in <code>single_include/nlohmann</code> or <a href="https://github.com/nlohmann/json/releases">released here</a>. You need to add</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token macro directive-hash" style="color:#905">#</span><span class="token macro directive" style="color:#07a">include</span><span class="token macro" style="color:#905"> </span><span class="token macro" style="color:#690">&lt;nlohmann/json.hpp&gt;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// for convenience</span><span>
</span><span></span><span class="token" style="color:#07a">using</span><span> json </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> nlohmann</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>json</span><span class="token" style="color:#999">;</span></code></pre><p>to the files you want to process JSON and set the necessary switches to enable C++11 (e.g., <code>-std=c++11</code> for GCC and Clang).</p><p>You can further use file <a href="https://github.com/nlohmann/json/blob/develop/include/nlohmann/json_fwd.hpp"><code>include/nlohmann/json_fwd.hpp</code></a> for forward-declarations. The installation of json_fwd.hpp (as part of cmake&#x27;s install step), can be achieved by setting <code>-DJSON_MultipleHeaders=ON</code>.</p><h3>CMake</h3><p>You can also use the <code>nlohmann_json::nlohmann_json</code> interface target in CMake.  This target populates the appropriate usage requirements for <code>INTERFACE_INCLUDE_DIRECTORIES</code> to point to the appropriate include directories and <code>INTERFACE_COMPILE_FEATURES</code> for the necessary C++11 flags.</p><h4>External</h4><p>To use this library from a CMake project, you can locate it directly with <code>find_package()</code> and use the namespaced imported target from the generated package configuration:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cmake" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray"># CMakeLists.txt</span><span>
</span><span></span><span class="token" style="color:#07a">find_package</span><span class="token" style="color:#999">(</span><span>nlohmann_json </span><span class="token" style="color:#905">3.2.0</span><span> REQUIRED</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">add_library</span><span class="token" style="color:#999">(</span><span>foo ...</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">target_link_libraries</span><span class="token" style="color:#999">(</span><span>foo </span><span class="token" style="-opacity:.7">PRIVATE</span><span> </span><span class="token" style="color:#DD4A68">nlohmann_json::nlohmann_json</span><span class="token" style="color:#999">)</span></code></pre><p>The package configuration file, <code>nlohmann_jsonConfig.cmake</code>, can be used either from an install tree or directly out of the build tree.</p><h4>Embedded</h4><p>To embed the library directly into an existing CMake project, place the entire source tree in a subdirectory and call <code>add_subdirectory()</code> in your <code>CMakeLists.txt</code> file:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cmake" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray"># Typically you don&#x27;t care so much for a third party library&#x27;s tests to be</span><span>
</span><span></span><span class="token" style="color:slategray"># run from your own project&#x27;s code.</span><span>
</span><span></span><span class="token" style="color:#07a">set</span><span class="token" style="color:#999">(</span><span>JSON_BuildTests </span><span class="token" style="color:#905">OFF</span><span> </span><span class="token" style="color:#e90">CACHE</span><span> INTERNAL </span><span class="token" style="color:#690">&quot;&quot;</span><span class="token" style="color:#999">)</span><span>
</span>
<span></span><span class="token" style="color:slategray"># Don&#x27;t use include(nlohmann_json/CMakeLists.txt) since that carries with it</span><span>
</span><span></span><span class="token" style="color:slategray"># unintended consequences that will break the build.  It&#x27;s generally</span><span>
</span><span></span><span class="token" style="color:slategray"># discouraged (although not necessarily well documented as such) to use</span><span>
</span><span></span><span class="token" style="color:slategray"># include(...) for pulling in other CMake projects anyways.</span><span>
</span><span></span><span class="token" style="color:#07a">add_subdirectory</span><span class="token" style="color:#999">(</span><span>nlohmann_json</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">add_library</span><span class="token" style="color:#999">(</span><span>foo ...</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">target_link_libraries</span><span class="token" style="color:#999">(</span><span>foo </span><span class="token" style="-opacity:.7">PRIVATE</span><span> </span><span class="token" style="color:#DD4A68">nlohmann_json::nlohmann_json</span><span class="token" style="color:#999">)</span></code></pre><h4>Supporting Both</h4><p>To allow your project to support either an externally supplied or an embedded JSON library, you can use a pattern akin to the following:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cmake" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray"># Top level CMakeLists.txt</span><span>
</span><span></span><span class="token" style="color:#07a">project</span><span class="token" style="color:#999">(</span><span>FOO</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">option</span><span class="token" style="color:#999">(</span><span>FOO_USE_EXTERNAL_JSON </span><span class="token" style="color:#690">&quot;Use an external JSON library&quot;</span><span> </span><span class="token" style="color:#905">OFF</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">add_subdirectory</span><span class="token" style="color:#999">(</span><span>thirdparty</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:#07a">add_library</span><span class="token" style="color:#999">(</span><span>foo ...</span><span class="token" style="color:#999">)</span><span>
</span>...
<span></span><span class="token" style="color:slategray"># Note that the namespaced target will always be available regardless of the</span><span>
</span><span></span><span class="token" style="color:slategray"># import method</span><span>
</span><span></span><span class="token" style="color:#07a">target_link_libraries</span><span class="token" style="color:#999">(</span><span>foo </span><span class="token" style="-opacity:.7">PRIVATE</span><span> </span><span class="token" style="color:#DD4A68">nlohmann_json::nlohmann_json</span><span class="token" style="color:#999">)</span></code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cmake" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray"># thirdparty/CMakeLists.txt</span><span>
</span>...
<span></span><span class="token" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>FOO_USE_EXTERNAL_JSON</span><span class="token" style="color:#999">)</span><span>
</span><span>  </span><span class="token" style="color:#07a">find_package</span><span class="token" style="color:#999">(</span><span>nlohmann_json </span><span class="token" style="color:#905">3.2.0</span><span> REQUIRED</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#07a">else</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span>  </span><span class="token" style="color:#07a">set</span><span class="token" style="color:#999">(</span><span>JSON_BuildTests </span><span class="token" style="color:#905">OFF</span><span> </span><span class="token" style="color:#e90">CACHE</span><span> INTERNAL </span><span class="token" style="color:#690">&quot;&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span>  </span><span class="token" style="color:#07a">add_subdirectory</span><span class="token" style="color:#999">(</span><span>nlohmann_json</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#07a">endif</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span>...
</code></pre><p><code>thirdparty/nlohmann_json</code> is then a complete copy of this source tree.</p><h3>Package Managers</h3><p>:beer: If you are using OS X and <a href="http://brew.sh">Homebrew</a>, just type <code>brew tap nlohmann/json</code> and <code>brew install nlohmann_json</code> and you&#x27;re set. If you want the bleeding edge rather than the latest release, use <code>brew install nlohmann_json --HEAD</code>.</p><p>If you are using the <a href="http://mesonbuild.com">Meson Build System</a>, then you can get a wrap file by downloading it from <a href="https://wrapdb.mesonbuild.com/nlohmann_json">Meson WrapDB</a>, or simply use <code>meson wrap install nlohmann_json</code>.</p><p>If you are using <a href="https://www.conan.io/">Conan</a> to manage your dependencies, merely add <code>jsonformoderncpp/x.y.z@vthiery/stable</code> to your <code>conanfile.py</code>&#x27;s requires, where <code>x.y.z</code> is the release version you want to use. Please file issues <a href="https://github.com/vthiery/conan-jsonformoderncpp/issues">here</a> if you experience problems with the packages.</p><p>If you are using <a href="https://www.spack.io/">Spack</a> to manage your dependencies, you can use the <code>nlohmann_json</code> package. Please see the <a href="https://github.com/spack/spack">spack project</a> for any issues regarding the packaging.</p><p>If you are using <a href="https://github.com/ruslo/hunter/">hunter</a> on your project for external dependencies, then you can use the <a href="https://docs.hunter.sh/en/latest/packages/pkg/nlohmann_json.html">nlohmann_json package</a>. Please see the hunter project for any issues regarding the packaging.</p><p>If you are using <a href="https://buckaroo.pm">Buckaroo</a>, you can install this library&#x27;s module with <code>buckaroo install nlohmann/json</code>. Please file issues <a href="https://github.com/LoopPerfect/buckaroo-recipes/issues/new?title=nlohmann/nlohmann/json">here</a>.</p><p>If you are using <a href="https://github.com/Microsoft/vcpkg/">vcpkg</a> on your project for external dependencies, then you can use the <a href="https://github.com/Microsoft/vcpkg/tree/master/ports/nlohmann-json">nlohmann-json package</a>. Please see the vcpkg project for any issues regarding the packaging.</p><p>If you are using <a href="http://cget.readthedocs.io/en/latest/">cget</a>, you can install the latest development version with <code>cget install nlohmann/json</code>. A specific version can be installed with <code>cget install nlohmann/json@v3.1.0</code>. Also, the multiple header version can be installed by adding the <code>-DJSON_MultipleHeaders=ON</code> flag (i.e., <code>cget install nlohmann/json -DJSON_MultipleHeaders=ON</code>).</p><p>If you are using <a href="https://cocoapods.org">CocoaPods</a>, you can use the library by adding pod <code>&quot;nlohmann_json&quot;, &#x27;~&gt;3.1.2&#x27;</code> to your podfile (see <a href="https://bitbucket.org/benman/nlohmann_json-cocoapod/src/master/">an example</a>). Please file issues <a href="https://bitbucket.org/benman/nlohmann_json-cocoapod/issues?status=new&amp;status=open">here</a>.</p><p>If you are using <a href="https://www.nuget.org">NuGet</a>, you can use the package <a href="https://www.nuget.org/packages/nlohmann.json/">nlohmann.json</a>. Please check <a href="https://github.com/nlohmann/json/issues/1132#issuecomment-452250255">this extensive description</a> on how to use the package. Please files issues <a href="https://github.com/hnkb/nlohmann-json-nuget/issues">here</a>.</p><p>If you are using <a href="https://conda.io/">conda</a>, you can use the package <a href="https://github.com/conda-forge/nlohmann_json-feedstock">nlohmann_json</a> from <a href="https://conda-forge.org">conda-forge</a> executing <code>conda install -c conda-forge nlohmann_json</code>. Please file issues <a href="https://github.com/conda-forge/nlohmann_json-feedstock/issues">here</a>.</p><h2>Examples</h2><p>Beside the examples below, you may want to check the <a href="https://nlohmann.github.io/json/">documentation</a> where each function contains a separate code example (e.g., check out <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a5338e282d1d02bed389d852dd670d98d.html#a5338e282d1d02bed389d852dd670d98d"><code>emplace()</code></a>). All <a href="https://github.com/nlohmann/json/tree/develop/doc/examples">example files</a> can be compiled and executed on their own (e.g., file <a href="https://github.com/nlohmann/json/blob/develop/doc/examples/emplace.cpp">emplace.cpp</a>).</p><h3>JSON as first-class data type</h3><p>Here are some examples to give you an idea how to use the class.</p><p>Assume you want to create the JSON object</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;pi&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">3.141</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;happy&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;name&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;Niels&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;nothing&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;answer&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;everything&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">42</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;list&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#905">&quot;object&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;currency&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;USD&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;value&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">42.99</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><p>With this library, you could write:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// create an empty structure (null)</span><span>
</span><span>json j</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add a number that is stored as double (note the implicit conversion of j to an object)</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;pi&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">3.141</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add a Boolean that is stored as bool</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;happy&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add a string that is stored as std::string</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;name&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;Niels&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add another null object by passing nullptr</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;nothing&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">nullptr</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add an object inside the object</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;answer&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;everything&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">42</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add an array that is stored as std::vector (using an initializer list)</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;list&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// add another object (using an initializer list of pairs)</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;object&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;currency&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;USD&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;value&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">42.99</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// instead, you could also write (which looks very similar to the JSON above)</span><span>
</span><span>json j2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;pi&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3.141</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;happy&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;name&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;Niels&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;nothing&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">nullptr</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;answer&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;everything&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">42</span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;list&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>  </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;object&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;currency&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;USD&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;value&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">42.99</span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><p>Note that in all these cases, you never need to &quot;tell&quot; the compiler which JSON value type you want to use. If you want to be explicit or express some edge cases, the functions <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_aa80485befaffcadaa39965494e0b4d2e.html#aa80485befaffcadaa39965494e0b4d2e"><code>json::array</code></a> and <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_aa13f7c0615867542ce80337cbcf13ada.html#aa13f7c0615867542ce80337cbcf13ada"><code>json::object</code></a> will help:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// a way to express the empty array []</span><span>
</span><span>json empty_array_explicit </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">array</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// ways to express the empty object {}</span><span>
</span><span>json empty_object_implicit </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>json empty_object_explicit </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">object</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// a way to express an _array_ of key/value pairs [[&quot;currency&quot;, &quot;USD&quot;], [&quot;value&quot;, 42.99]]</span><span>
</span><span>json array_not_object </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">array</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;currency&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;USD&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;value&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">42.99</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><h3>Serialization / Deserialization</h3><h4>To/from strings</h4><p>You can create a JSON value (deserialization) by appending <code>_json</code> to a string literal:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// create object from string literal</span><span>
</span><span>json j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;{ \&quot;happy\&quot;: true, \&quot;pi\&quot;: 3.141 }&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// or even nicer with a raw string literal</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> j2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token raw-string" style="color:#690">R&quot;(
</span><span class="token raw-string" style="color:#690">  {
</span><span class="token raw-string" style="color:#690">    &quot;happy&quot;: true,
</span><span class="token raw-string" style="color:#690">    &quot;pi&quot;: 3.141
</span><span class="token raw-string" style="color:#690">  }
</span><span class="token raw-string" style="color:#690">)&quot;</span><span>_json</span><span class="token" style="color:#999">;</span></code></pre><p>Note that without appending the <code>_json</code> suffix, the passed string literal is not parsed, but just used as JSON string value. That is, <code>json j = &quot;{ \&quot;happy\&quot;: true, \&quot;pi\&quot;: 3.141 }&quot;</code> would just store the string <code>&quot;{ &quot;happy&quot;: true, &quot;pi&quot;: 3.141 }&quot;</code> rather than parsing the actual object.</p><p>The above example can also be expressed explicitly using <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a5a0339361f3282cb8fd2f9ede6e17d72.html#a5a0339361f3282cb8fd2f9ede6e17d72"><code>json::parse()</code></a>:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// parse explicitly</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> j3 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">parse</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;{ \&quot;happy\&quot;: true, \&quot;pi\&quot;: 3.141 }&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><p>You can also get a string representation of a JSON value (serialize):</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// explicit conversion to string</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string s </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">dump</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>    </span><span class="token" style="color:slategray">// {\&quot;happy\&quot;:true,\&quot;pi\&quot;:3.141}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// serialization with pretty printing</span><span>
</span><span></span><span class="token" style="color:slategray">// pass in the amount of spaces to indent</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">dump</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>endl</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// {</span><span>
</span><span></span><span class="token" style="color:slategray">//     &quot;happy&quot;: true,</span><span>
</span><span></span><span class="token" style="color:slategray">//     &quot;pi&quot;: 3.141</span><span>
</span><span></span><span class="token" style="color:slategray">// }</span></code></pre><p>Note the difference between serialization and assignment:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// store a string in a JSON value</span><span>
</span><span>json j_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;this is a string&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// retrieve the string value</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> cpp_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j_string</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// retrieve the string value (alternative when an variable already exists)</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string cpp_string2</span><span class="token" style="color:#999">;</span><span>
</span><span>j_string</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get_to</span><span class="token" style="color:#999">(</span><span>cpp_string2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// retrieve the serialized value (explicit JSON serialization)</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string serialized_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j_string</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">dump</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// output of original string</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> cpp_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot; == &quot;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> cpp_string2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot; == &quot;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j_string</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&#x27;\n&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// output of serialized value</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot; == &quot;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> serialized_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>endl</span><span class="token" style="color:#999">;</span></code></pre><p><a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a50ec80b02d0f3f51130d4abb5d1cfdc5.html#a50ec80b02d0f3f51130d4abb5d1cfdc5"><code>.dump()</code></a> always returns the serialized value, and <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a16f9445f7629f634221a42b967cdcd43.html#a16f9445f7629f634221a42b967cdcd43"><code>.get&lt;std::string&gt;()</code></a> returns the originally stored string value.</p><p>Note the library only supports UTF-8. When you store strings with different encodings in the library, calling <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a50ec80b02d0f3f51130d4abb5d1cfdc5.html#a50ec80b02d0f3f51130d4abb5d1cfdc5"><code>dump()</code></a> may throw an exception unless <code>json::error_handler_t::replace</code> or <code>json::error_handler_t::ignore</code> are used as error handlers.</p><h4>To/from streams (e.g. files, string streams)</h4><p>You can also use streams to serialize and deserialize:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// deserialize from standard input</span><span>
</span><span>json j</span><span class="token" style="color:#999">;</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cin </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span> j</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// serialize to standard output</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// the setw manipulator was overloaded to set the indentation for pretty printing</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">setw</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>endl</span><span class="token" style="color:#999">;</span></code></pre><p>These operators work for any subclasses of <code>std::istream</code> or <code>std::ostream</code>. Here is the same example with files:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// read a JSON file</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>ifstream </span><span class="token" style="color:#DD4A68">i</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;file.json&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>json j</span><span class="token" style="color:#999">;</span><span>
</span><span>i </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span> j</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// write prettified JSON to another file</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>ofstream </span><span class="token" style="color:#DD4A68">o</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;pretty.json&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>o </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">setw</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>endl</span><span class="token" style="color:#999">;</span></code></pre><p>Please note that setting the exception bit for <code>failbit</code> is inappropriate for this use case. It will result in program termination due to the <code>noexcept</code> specifier in use.</p><h4>Read from iterator range</h4><p>You can also parse JSON from an iterator range; that is, from any container accessible by iterators whose content is stored as contiguous byte sequence, for instance a <code>std::vector&lt;std::uint8_t&gt;</code>:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#07a">uint8_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> v </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&#x27;t&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;r&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;u&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;e&#x27;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">parse</span><span class="token" style="color:#999">(</span><span>v</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">begin</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span> v</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><p>You may leave the iterators for the range [begin, end):</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#07a">uint8_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> v </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&#x27;t&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;r&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;u&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;e&#x27;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">parse</span><span class="token" style="color:#999">(</span><span>v</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><h4>SAX interface</h4><p>The library uses a SAX-like interface with the following functions:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// called when null is parsed</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">null</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// called when a boolean is parsed; value is passed</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">boolean</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">bool</span><span> val</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// called when a signed or unsigned integer number is parsed; value is passed</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">number_integer</span><span class="token" style="color:#999">(</span><span>number_integer_t val</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">number_unsigned</span><span class="token" style="color:#999">(</span><span>number_unsigned_t val</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// called when a floating-point number is parsed; value and original string is passed</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">number_float</span><span class="token" style="color:#999">(</span><span>number_float_t val</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> string_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> s</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// called when a string is parsed; value is passed and can be safely moved away</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">string</span><span class="token" style="color:#999">(</span><span>string_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> val</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// called when an object or array begins or ends, resp. The number of elements is passed (or -1 if not known)</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">start_object</span><span class="token" style="color:#999">(</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>size_t elements</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">end_object</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">start_array</span><span class="token" style="color:#999">(</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>size_t elements</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">end_array</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// called when an object key is parsed; value is passed and can be safely moved away</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">key</span><span class="token" style="color:#999">(</span><span>string_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> val</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// called when a parse error occurs; byte position, the last token, and an exception is passed</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> </span><span class="token" style="color:#DD4A68">parse_error</span><span class="token" style="color:#999">(</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>size_t position</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> last_token</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> detail</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>exception</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> ex</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><p>The return value of each function determines whether parsing should proceed.</p><p>To implement your own SAX handler, proceed as follows:</p><ol><li>Implement the SAX interface in a class. You can use class <code>nlohmann::json_sax&lt;json&gt;</code> as base class, but you can also use any class where the functions described above are implemented and public.</li><li>Create an object of your SAX interface class, e.g. <code>my_sax</code>.</li><li>Call <code>bool json::sax_parse(input, &amp;my_sax)</code>; where the first parameter can be any input like a string or an input stream and the second parameter is a pointer to your SAX interface.</li></ol><p>Note the <code>sax_parse</code> function only returns a <code>bool</code> indicating the result of the last executed SAX event. It does not return a  <code>json</code> value - it is up to you to decide what to do with the SAX events. Furthermore, no exceptions are thrown in case of a parse error - it is up to you what to do with the exception object passed to your <code>parse_error</code> implementation. Internally, the SAX interface is used for the DOM parser (class <code>json_sax_dom_parser</code>) as well as the acceptor (<code>json_sax_acceptor</code>), see file <a href="https://github.com/nlohmann/json/blob/develop/include/nlohmann/detail/input/json_sax.hpp"><code>json_sax.hpp</code></a>.</p><h3>STL-like access</h3><p>We designed the JSON class to behave just like an STL container. In fact, it satisfies the <a href="https://en.cppreference.com/w/cpp/named_req/ReversibleContainer"><strong>ReversibleContainer</strong></a> requirement.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// create an array using push_back</span><span>
</span><span>json j</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">push_back</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;foo&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">push_back</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">push_back</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// also use emplace_back</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">emplace_back</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1.78</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// iterate the array</span><span>
</span><span></span><span class="token" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>iterator it </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">begin</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> it </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">++</span><span>it</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span>it </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&#x27;\n&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// range-based for</span><span>
</span><span></span><span class="token" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">auto</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> element </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> j</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> element </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&#x27;\n&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// getter/setter</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#07a">auto</span><span> tmp </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">42</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> foo </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">at</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// comparison</span><span>
</span><span>j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span> </span><span class="token" style="color:#690">&quot;[\&quot;foo\&quot;, 1, true]&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>  </span><span class="token" style="color:slategray">// true</span><span>
</span>
<span></span><span class="token" style="color:slategray">// other stuff</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">size</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>     </span><span class="token" style="color:slategray">// 3 entries</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">empty</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>    </span><span class="token" style="color:slategray">// false</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">type</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>     </span><span class="token" style="color:slategray">// json::value_t::array</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">clear</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>    </span><span class="token" style="color:slategray">// the array is empty again</span><span>
</span>
<span></span><span class="token" style="color:slategray">// convenience type checkers</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_null</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_boolean</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_number</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_object</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_array</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_string</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// create an object</span><span>
</span><span>json o</span><span class="token" style="color:#999">;</span><span>
</span><span>o</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;foo&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">23</span><span class="token" style="color:#999">;</span><span>
</span><span>o</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;bar&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">;</span><span>
</span><span>o</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;baz&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">3.141</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// also use emplace</span><span>
</span><span>o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">emplace</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;weather&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;sunny&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// special iterator member functions for objects</span><span>
</span><span></span><span class="token" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>iterator it </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">begin</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> it </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">++</span><span>it</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> it</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">key</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot; : &quot;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> it</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">value</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot;\n&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// the same code as range for</span><span>
</span><span></span><span class="token" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">auto</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> el </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">items</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> el</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">key</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot; : &quot;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> el</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">value</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot;\n&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// even easier with structured bindings (C++17)</span><span>
</span><span></span><span class="token" style="color:#07a">for</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">auto</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> </span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">items</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot; : &quot;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> value </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> </span><span class="token" style="color:#690">&quot;\n&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// find an entry</span><span>
</span><span></span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">find</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;foo&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:slategray">// there is an entry with key &quot;foo&quot;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// or simpler using count()</span><span>
</span><span></span><span class="token" style="color:#07a">int</span><span> foo_present </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">count</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;foo&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// 1</span><span>
</span><span></span><span class="token" style="color:#07a">int</span><span> fob_present </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">count</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;fob&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// 0</span><span>
</span>
<span></span><span class="token" style="color:slategray">// delete an entry</span><span>
</span><span>o</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">erase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;foo&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><h3>Conversion from STL containers</h3><p>Any sequence container (<code>std::array</code>, <code>std::vector</code>, <code>std::deque</code>, <code>std::forward_list</code>, <code>std::list</code>) whose values can be used to construct JSON values (e.g., integers, floating point numbers, Booleans, string types, or again STL containers described in this section) can be used to create a JSON array. The same holds for similar associative containers (<code>std::set</code>, <code>std::multiset</code>, <code>std::unordered_set</code>, <code>std::unordered_multiset</code>), but in these cases the order of the elements of the array depends on how the elements are ordered in the respective STL container.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">int</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_vector </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_vec</span><span class="token" style="color:#999">(</span><span>c_vector</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// [1, 2, 3, 4]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>deque</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">double</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_deque </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1.2</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2.3</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3.4</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">5.6</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_deque</span><span class="token" style="color:#999">(</span><span>c_deque</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// [1.2, 2.3, 3.4, 5.6]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>list</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">bool</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_list </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_list</span><span class="token" style="color:#999">(</span><span>c_list</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// [true, true, false, true]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>forward_list</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">int64_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_flist </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">12345678909876</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">23456789098765</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">34567890987654</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">45678909876543</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_flist</span><span class="token" style="color:#999">(</span><span>c_flist</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// [12345678909876, 23456789098765, 34567890987654, 45678909876543]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>array</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">unsigned</span><span> </span><span class="token" style="color:#07a">long</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">4</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_array </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_array</span><span class="token" style="color:#999">(</span><span>c_array</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// [1, 2, 3, 4]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>set</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_set </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;four&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_set</span><span class="token" style="color:#999">(</span><span>c_set</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// only one entry for &quot;one&quot; is used</span><span>
</span><span></span><span class="token" style="color:slategray">// [&quot;four&quot;, &quot;one&quot;, &quot;three&quot;, &quot;two&quot;]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>unordered_set</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_uset </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;four&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_uset</span><span class="token" style="color:#999">(</span><span>c_uset</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// only one entry for &quot;one&quot; is used</span><span>
</span><span></span><span class="token" style="color:slategray">// maybe [&quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;one&quot;]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>multiset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_mset </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;four&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_mset</span><span class="token" style="color:#999">(</span><span>c_mset</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// both entries for &quot;one&quot; are used</span><span>
</span><span></span><span class="token" style="color:slategray">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>unordered_multiset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_umset </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;four&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_umset</span><span class="token" style="color:#999">(</span><span>c_umset</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// both entries for &quot;one&quot; are used</span><span>
</span><span></span><span class="token" style="color:slategray">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span></code></pre><p>Likewise, any associative key-value containers (<code>std::map</code>, <code>std::multimap</code>, <code>std::unordered_map</code>, <code>std::unordered_multimap</code>) whose keys can construct an <code>std::string</code> and whose values can be used to construct JSON values (see examples above) can be used to create a JSON object. Note that in case of multimaps only one key is used in the JSON object and the value depends on the internal order of the STL container.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>map</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">int</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_map </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_map</span><span class="token" style="color:#999">(</span><span>c_map</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// {&quot;one&quot;: 1, &quot;three&quot;: 3, &quot;two&quot;: 2 }</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>unordered_map</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#07a">char</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">double</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_umap </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1.2</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">2.3</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3.4</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_umap</span><span class="token" style="color:#999">(</span><span>c_umap</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// {&quot;one&quot;: 1.2, &quot;two&quot;: 2.3, &quot;three&quot;: 3.4}</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>multimap</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">bool</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_mmap </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_mmap</span><span class="token" style="color:#999">(</span><span>c_mmap</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// only one entry for key &quot;three&quot; is used</span><span>
</span><span></span><span class="token" style="color:slategray">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>unordered_multimap</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">bool</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> c_ummap </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;one&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;two&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;three&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>json </span><span class="token" style="color:#DD4A68">j_ummap</span><span class="token" style="color:#999">(</span><span>c_ummap</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// only one entry for key &quot;three&quot; is used</span><span>
</span><span></span><span class="token" style="color:slategray">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span></code></pre><h3>JSON Pointer and JSON Patch</h3><p>The library supports <strong>JSON Pointer</strong> (<a href="https://tools.ietf.org/html/rfc6901">RFC 6901</a>) as alternative means to address structured values. On top of this, <strong>JSON Patch</strong> (<a href="https://tools.ietf.org/html/rfc6902">RFC 6902</a>) allows to describe differences between two JSON values - effectively allowing patch and diff operations known from Unix.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// a JSON value</span><span>
</span><span>json j_original </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token raw-string" style="color:#690">R&quot;({
</span><span class="token raw-string" style="color:#690">  &quot;baz&quot;: [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;],
</span><span class="token raw-string" style="color:#690">  &quot;foo&quot;: &quot;bar&quot;
</span><span class="token raw-string" style="color:#690">})&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// access members with a JSON pointer (RFC 6901)</span><span>
</span><span>j_original</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;/baz/1&quot;</span><span>_json_pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// &quot;two&quot;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// a JSON patch (RFC 6902)</span><span>
</span><span>json j_patch </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token raw-string" style="color:#690">R&quot;([
</span><span class="token raw-string" style="color:#690">  { &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/baz&quot;, &quot;value&quot;: &quot;boo&quot; },
</span><span class="token raw-string" style="color:#690">  { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/hello&quot;, &quot;value&quot;: [&quot;world&quot;] },
</span><span class="token raw-string" style="color:#690">  { &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/foo&quot;}
</span><span class="token raw-string" style="color:#690">])&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// apply the patch</span><span>
</span><span>json j_result </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j_original</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">patch</span><span class="token" style="color:#999">(</span><span>j_patch</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// {</span><span>
</span><span></span><span class="token" style="color:slategray">//    &quot;baz&quot;: &quot;boo&quot;,</span><span>
</span><span></span><span class="token" style="color:slategray">//    &quot;hello&quot;: [&quot;world&quot;]</span><span>
</span><span></span><span class="token" style="color:slategray">// }</span><span>
</span>
<span></span><span class="token" style="color:slategray">// calculate a JSON patch from two JSON values</span><span>
</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">diff</span><span class="token" style="color:#999">(</span><span>j_result</span><span class="token" style="color:#999">,</span><span> j_original</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// [</span><span>
</span><span></span><span class="token" style="color:slategray">//   { &quot;op&quot;:&quot; replace&quot;, &quot;path&quot;: &quot;/baz&quot;, &quot;value&quot;: [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] },</span><span>
</span><span></span><span class="token" style="color:slategray">//   { &quot;op&quot;: &quot;remove&quot;,&quot;path&quot;: &quot;/hello&quot; },</span><span>
</span><span></span><span class="token" style="color:slategray">//   { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/foo&quot;, &quot;value&quot;: &quot;bar&quot; }</span><span>
</span><span></span><span class="token" style="color:slategray">// ]</span></code></pre><h3>JSON Merge Patch</h3><p>The library supports <strong>JSON Merge Patch</strong> (<a href="https://tools.ietf.org/html/rfc7386">RFC 7386</a>) as a patch format. Instead of using JSON Pointer (see above) to specify values to be manipulated, it describes the changes using a syntax that closely mimics the document being modified.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// a JSON value</span><span>
</span><span>json j_document </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token raw-string" style="color:#690">R&quot;({
</span><span class="token raw-string" style="color:#690">  &quot;a&quot;: &quot;b&quot;,
</span><span class="token raw-string" style="color:#690">  &quot;c&quot;: {
</span><span class="token raw-string" style="color:#690">    &quot;d&quot;: &quot;e&quot;,
</span><span class="token raw-string" style="color:#690">    &quot;f&quot;: &quot;g&quot;
</span><span class="token raw-string" style="color:#690">  }
</span><span class="token raw-string" style="color:#690">})&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// a patch</span><span>
</span><span>json j_patch </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token raw-string" style="color:#690">R&quot;({
</span><span class="token raw-string" style="color:#690">  &quot;a&quot;:&quot;z&quot;,
</span><span class="token raw-string" style="color:#690">  &quot;c&quot;: {
</span><span class="token raw-string" style="color:#690">    &quot;f&quot;: null
</span><span class="token raw-string" style="color:#690">  }
</span><span class="token raw-string" style="color:#690">})&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// apply the patch</span><span>
</span><span>j_original</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">merge_patch</span><span class="token" style="color:#999">(</span><span>j_patch</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// {</span><span>
</span><span></span><span class="token" style="color:slategray">//  &quot;a&quot;: &quot;z&quot;,</span><span>
</span><span></span><span class="token" style="color:slategray">//  &quot;c&quot;: {</span><span>
</span><span></span><span class="token" style="color:slategray">//    &quot;d&quot;: &quot;e&quot;</span><span>
</span><span></span><span class="token" style="color:slategray">//  }</span><span>
</span><span></span><span class="token" style="color:slategray">// }</span></code></pre><h3>Implicit conversions</h3><p>Supported types can be implicitly converted to JSON values.</p><p>It is recommended to <strong>NOT USE</strong> implicit conversions <strong>FROM</strong> a JSON value.
You can find more details about this recommendation <a href="https://www.github.com/nlohmann/json/issues/958">here</a>.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// strings</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string s1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;Hello, world!&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>json js </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> s1</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> s2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> js</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// NOT RECOMMENDED</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string s3 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> js</span><span class="token" style="color:#999">;</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string s4</span><span class="token" style="color:#999">;</span><span>
</span><span>s4 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> js</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// Booleans</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> b1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span>
</span><span>json jb </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> b1</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> b2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> jb</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">bool</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// NOT RECOMMENDED</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> b3 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> jb</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">bool</span><span> b4</span><span class="token" style="color:#999">;</span><span>
</span><span>b4 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> jb</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// numbers</span><span>
</span><span></span><span class="token" style="color:#07a">int</span><span> i </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">42</span><span class="token" style="color:#999">;</span><span>
</span><span>json jn </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> i</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> f </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> jn</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">double</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// NOT RECOMMENDED</span><span>
</span><span></span><span class="token" style="color:#07a">double</span><span> f2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> jb</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">double</span><span> f3</span><span class="token" style="color:#999">;</span><span>
</span><span>f3 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> jb</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// etc.</span></code></pre><p>Note that <code>char</code> types are not automatically converted to JSON strings, but to integer numbers. A conversion to a string must be specified explicitly:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">char</span><span> ch </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;A&#x27;</span><span class="token" style="color:#999">;</span><span>                       </span><span class="token" style="color:slategray">// ASCII value 65</span><span>
</span><span>json j_default </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> ch</span><span class="token" style="color:#999">;</span><span>                 </span><span class="token" style="color:slategray">// stores integer number 65</span><span>
</span><span>json j_string </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">string</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> ch</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>  </span><span class="token" style="color:slategray">// stores string &quot;A&quot;</span></code></pre><h3>Arbitrary types conversions</h3><p>Every type can be serialized in JSON, not just STL containers and scalar types. Usually, you would do something along those lines:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">namespace</span><span> ns </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// a simple struct to model a person</span><span>
</span><span>    </span><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">person</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string name</span><span class="token" style="color:#999">;</span><span>
</span><span>        std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string address</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#07a">int</span><span> age</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>ns</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>person p </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;Ned Flanders&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;744 Evergreen Terrace&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">60</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// convert to JSON: copy each value into the JSON object</span><span>
</span><span>json j</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;name&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> p</span><span class="token" style="color:#999">.</span><span>name</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;address&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> p</span><span class="token" style="color:#999">.</span><span>address</span><span class="token" style="color:#999">;</span><span>
</span><span>j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;age&quot;</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> p</span><span class="token" style="color:#999">.</span><span>age</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// ...</span><span>
</span>
<span></span><span class="token" style="color:slategray">// convert from JSON: copy each value from the JSON object</span><span>
</span><span>ns</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>person p </span><span class="token" style="color:#999">{</span><span>
</span><span>    j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;name&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span>    j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;address&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span>    j</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;age&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">int</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><p>It works, but that&#x27;s quite a lot of boilerplate... Fortunately, there&#x27;s a better way:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// create a person</span><span>
</span><span>ns</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>person p </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;Ned Flanders&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;744 Evergreen Terrace&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">60</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// conversion: person -&gt; json</span><span>
</span><span>json j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> p</span><span class="token" style="color:#999">;</span><span>
</span>
<span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>cout </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;&lt;</span><span> std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>endl</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// {&quot;address&quot;:&quot;744 Evergreen Terrace&quot;,&quot;age&quot;:60,&quot;name&quot;:&quot;Ned Flanders&quot;}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// conversion: json -&gt; person</span><span>
</span><span></span><span class="token" style="color:#07a">auto</span><span> p2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>ns</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>person</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// that&#x27;s it</span><span>
</span><span></span><span class="token" style="color:#DD4A68">assert</span><span class="token" style="color:#999">(</span><span>p </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span> p2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><h4>Basic usage</h4><p>To make this work with one of your types, you only need to provide two functions:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">using</span><span> nlohmann</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">namespace</span><span> ns </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> person</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> p</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;name&quot;</span><span class="token" style="color:#999">,</span><span> p</span><span class="token" style="color:#999">.</span><span>name</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;address&quot;</span><span class="token" style="color:#999">,</span><span> p</span><span class="token" style="color:#999">.</span><span>address</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;age&quot;</span><span class="token" style="color:#999">,</span><span> p</span><span class="token" style="color:#999">.</span><span>age</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">from_json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> person</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> p</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">at</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;name&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get_to</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#999">.</span><span>name</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">at</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;address&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get_to</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#999">.</span><span>address</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">at</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;age&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get_to</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#999">.</span><span>age</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:slategray">// namespace ns</span></code></pre><p>That&#x27;s all! When calling the <code>json</code> constructor with your type, your custom <code>to_json</code> method will be automatically called.
Likewise, when calling <code>get&lt;your_type&gt;()</code> or <code>get_to(your_type&amp;)</code>, the <code>from_json</code> method will be called.</p><p>Some important things:</p><ul><li>Those methods <strong>MUST</strong> be in your type&#x27;s namespace (which can be the global namespace), or the library will not be able to locate them (in this example, they are in namespace <code>ns</code>, where <code>person</code> is defined).</li><li>Those methods <strong>MUST</strong> be available (e.g., properly headers must be included) everywhere you use these conversions. Look at <a href="https://github.com/nlohmann/json/issues/1108">issue 1108</a> for errors that may occur otherwise.</li><li>When using <code>get&lt;your_type&gt;()</code>, <code>your_type</code> <strong>MUST</strong> be <a href="https://en.cppreference.com/w/cpp/named_req/DefaultConstructible">DefaultConstructible</a>. (There is a way to bypass this requirement described later.)</li><li>In function <code>from_json</code>, use function <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a93403e803947b86f4da2d1fb3345cf2c.html#a93403e803947b86f4da2d1fb3345cf2c"><code>at()</code></a> to access the object values rather than <code>operator[]</code>. In case a key does not exist, <code>at</code> throws an exception that you can handle, whereas <code>operator[]</code> exhibits undefined behavior.</li><li>You do not need to add serializers or deserializers for STL types like <code>std::vector</code>: the library already implements these.</li></ul><h4>How do I convert third-party types?</h4><p>This requires a bit more advanced technique. But first, let&#x27;s see how this conversion mechanism works:</p><p>The library uses <strong>JSON Serializers</strong> to convert types to json.
The default serializer for <code>nlohmann::json</code> is <code>nlohmann::adl_serializer</code> (ADL means <a href="https://en.cppreference.com/w/cpp/language/adl">Argument-Dependent Lookup</a>).</p><p>It is implemented like this (simplified):</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">adl_serializer</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// calls the &quot;to_json&quot; method in T&#x27;s namespace</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">from_json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// same thing, but with the &quot;from_json&quot; method</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><p>This serializer works fine when you have control over the type&#x27;s namespace. However, what about <code>boost::optional</code> or <code>std::filesystem::path</code> (C++17)? Hijacking the <code>boost</code> namespace is pretty bad, and it&#x27;s illegal to add something other than template specializations to <code>std</code>...</p><p>To solve this, you need to add a specialization of <code>adl_serializer</code> to the <code>nlohmann</code> namespace, here&#x27;s an example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// partial specialization (full specialization works too)</span><span>
</span><span></span><span class="token" style="color:#07a">namespace</span><span> nlohmann </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">adl_serializer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>boost</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>optional</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> boost</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>optional</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> opt</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>opt </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span> boost</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>none</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">nullptr</span><span class="token" style="color:#999">;</span><span>
</span><span>            </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#07a">else</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>              j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span>opt</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// this will call adl_serializer&lt;T&gt;::to_json which will</span><span>
</span><span>                        </span><span class="token" style="color:slategray">// find the free function to_json in T&#x27;s namespace!</span><span>
</span><span>            </span><span class="token" style="color:#999">}</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span>
<span>        </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">from_json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> boost</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>optional</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> opt</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">is_null</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                opt </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> boost</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>none</span><span class="token" style="color:#999">;</span><span>
</span><span>            </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#07a">else</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                opt </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// same as above, but with</span><span>
</span><span>                                  </span><span class="token" style="color:slategray">// adl_serializer&lt;T&gt;::from_json</span><span>
</span><span>            </span><span class="token" style="color:#999">}</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><h4>How can I use <code>get()</code> for non-default constructible/non-copyable types?</h4><p>There is a way, if your type is <a href="https://en.cppreference.com/w/cpp/named_req/MoveConstructible">MoveConstructible</a>. You will need to specialize the <code>adl_serializer</code> as well, but with a special <code>from_json</code> overload:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">move_only_type</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">move_only_type</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">delete</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">move_only_type</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">int</span><span> ii</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#DD4A68">i</span><span class="token" style="color:#999">(</span><span>ii</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">move_only_type</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> move_only_type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">delete</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">move_only_type</span><span class="token" style="color:#999">(</span><span>move_only_type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">default</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">int</span><span> i</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">namespace</span><span> nlohmann </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">adl_serializer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>move_only_type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// note: the return type is no longer &#x27;void&#x27;, and the method only takes</span><span>
</span><span>        </span><span class="token" style="color:slategray">// one argument</span><span>
</span><span>        </span><span class="token" style="color:#07a">static</span><span> move_only_type </span><span class="token" style="color:#DD4A68">from_json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>j</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">int</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span>
<span>        </span><span class="token" style="color:slategray">// Here&#x27;s the catch! You must provide a to_json method! Otherwise you</span><span>
</span><span>        </span><span class="token" style="color:slategray">// will not be able to convert move_only_type to json, since you fully</span><span>
</span><span>        </span><span class="token" style="color:slategray">// specialized adl_serializer on that type</span><span>
</span><span>        </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> move_only_type t</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> t</span><span class="token" style="color:#999">.</span><span>i</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></pre><h4>Can I write my own serializer? (Advanced use)</h4><p>Yes. You might want to take a look at <a href="https://github.com/nlohmann/json/blob/develop/test/src/unit-udt.cpp"><code>unit-udt.cpp</code></a> in the test suite, to see a few examples.</p><p>If you write your own serializer, you&#x27;ll need to do a few things:</p><ul><li>use a different <code>basic_json</code> alias than <code>nlohmann::json</code> (the last template parameter of <code>basic_json</code> is the <code>JSONSerializer</code>)</li><li>use your <code>basic_json</code> alias (or a template parameter) in all your <code>to_json</code>/<code>from_json</code> methods</li><li>use <code>nlohmann::to_json</code> and <code>nlohmann::from_json</code> when you need ADL</li></ul><p>Here is an example, without simplifications, that only accepts types with a size &lt;= 32, and uses ADL.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// You should use void as a second template argument</span><span>
</span><span></span><span class="token" style="color:slategray">// if you don&#x27;t need compile-time checks on T</span><span>
</span><span></span><span class="token" style="color:#07a">template</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">T</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">SFINAE</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>enable_if</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">sizeof</span><span class="token" style="color:#999">(</span><span>T</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;=</span><span> </span><span class="token" style="color:#905">32</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">less_than_32_serializer</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> T value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// we want to use ADL, and call the correct to_json overload</span><span>
</span><span>        </span><span class="token" style="color:#07a">using</span><span> nlohmann</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>to_json</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// this method is called by adl_serializer,</span><span>
</span><span>                                 </span><span class="token" style="color:slategray">// this is where the magic happens</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">from_json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// same thing here</span><span>
</span><span>        </span><span class="token" style="color:#07a">using</span><span> nlohmann</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>from_json</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">from_json</span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><p>Be <strong>very</strong> careful when reimplementing your serializer, you can stack overflow if you don&#x27;t pay attention:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">T</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#07a">struct</span><span> </span><span class="token" style="color:#DD4A68">bad_serializer</span><span>
</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span>BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">const</span><span> T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:slategray">// this calls BasicJsonType::json_serializer&lt;T&gt;::to_json(j, value);</span><span>
</span><span>      </span><span class="token" style="color:slategray">// if BasicJsonType::json_serializer == bad_serializer ... oops!</span><span>
</span><span>      j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> value</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">template</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typename</span><span> </span><span class="token" style="color:#DD4A68">BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">to_json</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">const</span><span> BasicJsonType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> j</span><span class="token" style="color:#999">,</span><span> T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:slategray">// this calls BasicJsonType::json_serializer&lt;T&gt;::from_json(j, value);</span><span>
</span><span>      </span><span class="token" style="color:slategray">// if BasicJsonType::json_serializer == bad_serializer ... oops!</span><span>
</span><span>      value </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> j</span><span class="token" style="color:#999">.</span><span class="token" style="color:#07a">template</span><span> get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// oops!</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></pre><h3>Specializing enum conversion</h3><p>By default, enum values are serialized to JSON as integers. In some cases this could result in undesired behavior. If an enum is modified or re-ordered after data has been serialized to JSON, the later de-serialized JSON data may be undefined or a different enum value than was originally intended.</p><p>It is possible to more precisely specify how a given enum is mapped to and from JSON as shown below:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// example enum type declaration</span><span>
</span><span></span><span class="token" style="color:#07a">enum</span><span> </span><span class="token" style="color:#DD4A68">TaskState</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    TS_STOPPED</span><span class="token" style="color:#999">,</span><span>
</span><span>    TS_RUNNING</span><span class="token" style="color:#999">,</span><span>
</span><span>    TS_COMPLETED</span><span class="token" style="color:#999">,</span><span>
</span><span>    TS_INVALID</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// map TaskState values to JSON as strings</span><span>
</span><span></span><span class="token" style="color:#DD4A68">NLOHMANN_JSON_SERIALIZE_ENUM</span><span class="token" style="color:#999">(</span><span> TaskState</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span>TS_INVALID</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">nullptr</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span>TS_STOPPED</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;stopped&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span>TS_RUNNING</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;running&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">{</span><span>TS_COMPLETED</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;completed&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><p>The <code>NLOHMANN_JSON_SERIALIZE_ENUM()</code> macro declares a set of <code>to_json()</code> / <code>from_json()</code> functions for type <code>TaskState</code> while avoiding repetition and boilerplate serilization code.</p><p><strong>Usage:</strong></p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// enum to JSON as string</span><span>
</span><span>json j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> TS_STOPPED</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#DD4A68">assert</span><span class="token" style="color:#999">(</span><span>j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span> </span><span class="token" style="color:#690">&quot;stopped&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// json string to enum</span><span>
</span><span>json j3 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;running&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#DD4A68">assert</span><span class="token" style="color:#999">(</span><span>j3</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>TaskState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span> TS_RUNNING</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// undefined json value to enum (where the first map entry above is the default)</span><span>
</span><span>json jPi </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">3.14</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#DD4A68">assert</span><span class="token" style="color:#999">(</span><span>jPi</span><span class="token" style="color:#999">.</span><span>get</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>TaskState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span> TS_INVALID </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><p>Just as in <a href="#arbitrary-types-conversions">Arbitrary Type Conversions</a> above,</p><ul><li><code>NLOHMANN_JSON_SERIALIZE_ENUM()</code> MUST be declared in your enum type&#x27;s namespace (which can be the global namespace), or the library will not be able to locate it and it will default to integer serialization.</li><li>It MUST be available (e.g., proper headers must be included) everywhere you use the conversions.</li></ul><p>Other Important points:</p><ul><li>When using <code>get&lt;ENUM_TYPE&gt;()</code>, undefined JSON values will default to the first pair specified in your map. Select this default pair carefully.</li><li>If an enum or JSON value is specified more than once in your map, the first matching occurrence from the top of the map will be returned when converting to or from JSON.</li></ul><h3>Binary formats (BSON, CBOR, MessagePack, and UBJSON)</h3><p>Though JSON is a ubiquitous data format, it is not a very compact format suitable for data exchange, for instance over a network. Hence, the library supports <a href="http://bsonspec.org">BSON</a> (Binary JSON), <a href="http://cbor.io">CBOR</a> (Concise Binary Object Representation), <a href="http://msgpack.org">MessagePack</a>, and <a href="http://ubjson.org">UBJSON</a> (Universal Binary JSON Specification) to efficiently encode JSON values to byte vectors and to decode such vectors.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-cpp" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// create a JSON value</span><span>
</span><span>json j </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token raw-string" style="color:#690">R&quot;({&quot;compact&quot;: true, &quot;schema&quot;: 0})&quot;</span><span>_json</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// serialize to BSON</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#07a">uint8_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> v_bson </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">to_bson</span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 0x1B, 0x00, 0x00, 0x00, 0x08, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x00, 0x01, 0x10, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00</span><span>
</span>
<span></span><span class="token" style="color:slategray">// roundtrip</span><span>
</span><span>json j_from_bson </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">from_bson</span><span class="token" style="color:#999">(</span><span>v_bson</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// serialize to CBOR</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#07a">uint8_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> v_cbor </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">to_cbor</span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 0xA2, 0x67, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xF5, 0x66, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00</span><span>
</span>
<span></span><span class="token" style="color:slategray">// roundtrip</span><span>
</span><span>json j_from_cbor </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">from_cbor</span><span class="token" style="color:#999">(</span><span>v_cbor</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// serialize to MessagePack</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#07a">uint8_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> v_msgpack </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">to_msgpack</span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 0x82, 0xA7, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xC3, 0xA6, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00</span><span>
</span>
<span></span><span class="token" style="color:slategray">// roundtrip</span><span>
</span><span>json j_from_msgpack </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">from_msgpack</span><span class="token" style="color:#999">(</span><span>v_msgpack</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// serialize to UBJSON</span><span>
</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span>vector</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>std</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#07a">uint8_t</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> v_ubjson </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">to_ubjson</span><span class="token" style="color:#999">(</span><span>j</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// 0x7B, 0x69, 0x07, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x54, 0x69, 0x06, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x69, 0x00, 0x7D</span><span>
</span>
<span></span><span class="token" style="color:slategray">// roundtrip</span><span>
</span><span>json j_from_ubjson </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">::</span><span class="token" style="color:#DD4A68">from_ubjson</span><span class="token" style="color:#999">(</span><span>v_ubjson</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></pre><h2>Supported compilers</h2><p>Though it&#x27;s 2019 already, the support for C++11 is still a bit sparse. Currently, the following compilers are known to work:</p><ul><li>GCC 4.8 - 9.0 (and possibly later)</li><li>Clang 3.4 - 8.0 (and possibly later)</li><li>Intel C++ Compiler 17.0.2 (and possibly later)</li><li>Microsoft Visual C++ 2015 / Build Tools 14.0.25123.0 (and possibly later)</li><li>Microsoft Visual C++ 2017 / Build Tools 15.5.180.51428 (and possibly later)</li></ul><p>I would be happy to learn about other compilers/versions.</p><p>Please note:</p><ul><li><p>GCC 4.8 has a bug <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57824">57824</a>): multiline raw strings cannot be the arguments to macros. Don&#x27;t use multiline raw strings directly in macros with this compiler.</p></li><li><p>Android defaults to using very old compilers and C++ libraries. To fix this, add the following to your <code>Application.mk</code>. This will switch to the LLVM C++ library, the Clang compiler, and enable C++11 and other features disabled by default.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>APP_STL := c++_shared
</span>NDK_TOOLCHAIN_VERSION := clang3.6
<!-- -->APP_CPPFLAGS += -frtti -fexceptions
</code></pre><p>The code compiles successfully with <a href="https://developer.android.com/ndk/index.html?hl=ml">Android NDK</a>, Revision 9 - 11 (and possibly later) and <a href="https://www.crystax.net/en/android/ndk">CrystaX&#x27;s Android NDK</a> version 10.</p></li><li><p>For GCC running on MinGW or Android SDK, the error <code>&#x27;to_string&#x27; is not a member of &#x27;std&#x27;</code> (or similarly, for <code>strtod</code>) may occur. Note this is not an issue with the code,  but rather with the compiler itself. On Android, see above to build with a newer environment.  For MinGW, please refer to <a href="http://tehsausage.com/mingw-to-string">this site</a> and <a href="https://github.com/nlohmann/json/issues/136">this discussion</a> for information on how to fix this bug. For Android NDK using <code>APP_STL := gnustl_static</code>, please refer to <a href="https://github.com/nlohmann/json/issues/219">this discussion</a>.</p></li><li><p>Unsupported versions of GCC and Clang are rejected by <code>#error</code> directives. This can be switched off by defining <code>JSON_SKIP_UNSUPPORTED_COMPILER_CHECK</code>. Note that you can expect no support in this case.</p></li></ul><p>The following compilers are currently used in continuous integration at <a href="https://travis-ci.org/nlohmann/json">Travis</a> and <a href="https://ci.appveyor.com/project/nlohmann/json">AppVeyor</a>:</p><table><thead><tr><th>Compiler</th><th>Operating System</th><th>Version String</th></tr></thead><tbody><tr><td>GCC 4.8.5</td><td>Ubuntu 14.04.5 LTS</td><td>g++-4.8 (Ubuntu 4.8.5-2ubuntu1~14.04.2) 4.8.5</td></tr><tr><td>GCC 4.9.4</td><td>Ubuntu 14.04.1 LTS</td><td>g++-4.9 (Ubuntu 4.9.4-2ubuntu1~14.04.1) 4.9.4</td></tr><tr><td>GCC 5.5.0</td><td>Ubuntu 14.04.1 LTS</td><td>g++-5 (Ubuntu 5.5.0-12ubuntu1~14.04) 5.5.0 20171010</td></tr><tr><td>GCC 6.4.0</td><td>Ubuntu 14.04.1 LTS</td><td>g++-6 (Ubuntu 6.4.0-17ubuntu1~14.04) 6.4.0 20180424</td></tr><tr><td>GCC 7.3.0</td><td>Ubuntu 14.04.1 LTS</td><td>g++-7 (Ubuntu 7.3.0-21ubuntu1~14.04) 7.3.0</td></tr><tr><td>GCC 7.3.0</td><td>Windows Server 2012 R2 (x64)</td><td>g++ (x86_64-posix-seh-rev0, Built by MinGW-W64 project) 7.3.0</td></tr><tr><td>GCC 8.1.0</td><td>Ubuntu 14.04.1 LTS</td><td>g++-8 (Ubuntu 8.1.0-5ubuntu1~14.04) 8.1.0</td></tr><tr><td>Clang 3.5.0</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 3.5.0-4ubuntu2~trusty2 (tags/RELEASE_350/final) (based on LLVM 3.5.0)</td></tr><tr><td>Clang 3.6.2</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 3.6.2-svn240577-1~exp1 (branches/release_36) (based on LLVM 3.6.2)</td></tr><tr><td>Clang 3.7.1</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 3.7.1-svn253571-1~exp1 (branches/release_37) (based on LLVM 3.7.1)</td></tr><tr><td>Clang 3.8.0</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 3.8.0-2ubuntu3~trusty5 (tags/RELEASE_380/final)</td></tr><tr><td>Clang 3.9.1</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 3.9.1-4ubuntu3~14.04.3 (tags/RELEASE_391/rc2)</td></tr><tr><td>Clang 4.0.1</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 4.0.1-svn305264-1~exp1 (branches/release_40)</td></tr><tr><td>Clang 5.0.2</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 5.0.2-svn328729-1<del>exp1</del>20180509123505.100 (branches/release_50)</td></tr><tr><td>Clang 6.0.1</td><td>Ubuntu 14.04.1 LTS</td><td>clang version 6.0.1-svn334776-1<del>exp1</del>20180726133705.85 (branches/release_60)</td></tr><tr><td>Clang Xcode 6.4</td><td>OSX 10.10.5</td><td>Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)</td></tr><tr><td>Clang Xcode 7.3</td><td>OSX 10.11.6</td><td>Apple LLVM version 7.3.0 (clang-703.0.31)</td></tr><tr><td>Clang Xcode 8.0</td><td>OSX 10.11.6</td><td>Apple LLVM version 8.0.0 (clang-800.0.38)</td></tr><tr><td>Clang Xcode 8.1</td><td>OSX 10.12.6</td><td>Apple LLVM version 8.0.0 (clang-800.0.42.1)</td></tr><tr><td>Clang Xcode 8.2</td><td>OSX 10.12.6</td><td>Apple LLVM version 8.0.0 (clang-800.0.42.1)</td></tr><tr><td>Clang Xcode 8.3</td><td>OSX 10.11.6</td><td>Apple LLVM version 8.1.0 (clang-802.0.38)</td></tr><tr><td>Clang Xcode 9.0</td><td>OSX 10.12.6</td><td>Apple LLVM version 9.0.0 (clang-900.0.37)</td></tr><tr><td>Clang Xcode 9.1</td><td>OSX 10.12.6</td><td>Apple LLVM version 9.0.0 (clang-900.0.38)</td></tr><tr><td>Clang Xcode 9.2</td><td>OSX 10.13.3</td><td>Apple LLVM version 9.1.0 (clang-902.0.39.1)</td></tr><tr><td>Clang Xcode 9.3</td><td>OSX 10.13.3</td><td>Apple LLVM version 9.1.0 (clang-902.0.39.2)</td></tr><tr><td>Clang Xcode 10.0</td><td>OSX 10.13.3</td><td>Apple LLVM version 10.0.0 (clang-1000.11.45.2)</td></tr><tr><td>Visual Studio 14 2015</td><td>Windows Server 2012 R2 (x64)</td><td>Microsoft (R) Build Engine version 14.0.25420.1, MSVC 19.0.24215.1</td></tr><tr><td>Visual Studio 2017</td><td>Windows Server 2016</td><td>Microsoft (R) Build Engine version 15.7.180.61344, MSVC 19.14.26433.0</td></tr></tbody></table><h2>License</h2>&lt;img align=&quot;right&quot; src=&quot;http://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png&quot;&gt;<p>The class is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a>:</p><p>Copyright © 2013-2018 <a href="http://nlohmann.me">Niels Lohmann</a></p><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p><p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p><p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p><hr/><p>The class contains the UTF-8 Decoder from Bjoern Hoehrmann which is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a> (see above). Copyright © 2008-2009 <a href="http://bjoern.hoehrmann.de/">Björn Hoehrmann</a> <a href="mailto:bjoern@hoehrmann.de">bjoern@hoehrmann.de</a></p><p>The class contains a slightly modified version of the Grisu2 algorithm from Florian Loitsch which is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a> (see above). Copyright © 2009 <a href="http://florian.loitsch.com/">Florian Loitsch</a></p><h2>Contact</h2><p>If you have questions regarding the library, I would like to invite you to <a href="https://github.com/nlohmann/json/issues/new">open an issue at GitHub</a>. Please describe your request, problem, or question as detailed as possible, and also mention the version of the library you are using as well as the version of your compiler and operating system. Opening an issue at GitHub allows other users and contributors to this library to collaborate. For instance, I have little experience with MSVC, and most issues in this regard have been solved by a growing community. If you have a look at the <a href="https://github.com/nlohmann/json/issues?q=is%3Aissue+is%3Aclosed">closed issues</a>, you will see that we react quite timely in most cases.</p><p>Only if your request would contain confidential information, please <a href="mailto:mail@nlohmann.me">send me an email</a>. For encrypted messages, please use <a href="https://keybase.io/nlohmann/pgp_keys.asc">this key</a>.</p><h2>Security</h2><p><a href="https://github.com/nlohmann/json/commits">Commits by Niels Lohmann</a> and <a href="https://github.com/nlohmann/json/releases">releases</a> are signed with this <a href="https://keybase.io/nlohmann/pgp_keys.asc?fingerprint=797167ae41c0a6d9232e48457f3cea63ae251b69">PGP Key</a>.</p><h2>Thanks</h2><p>I deeply appreciate the help of the following people.</p>&lt;img src=&quot;https://raw.githubusercontent.com/nlohmann/json/develop/doc/avatars.png&quot; align=&quot;right&quot;&gt;<ul><li><a href="https://github.com/Teemperor">Teemperor</a> implemented CMake support and lcov integration, realized escape and Unicode handling in the string parser, and fixed the JSON serialization.</li><li><a href="https://github.com/elliotgoodrich">elliotgoodrich</a> fixed an issue with double deletion in the iterator classes.</li><li><a href="https://github.com/kirkshoop">kirkshoop</a> made the iterators of the class composable to other libraries.</li><li><a href="https://github.com/wanwc">wancw</a> fixed a bug that hindered the class to compile with Clang.</li><li>Tomas Åblad found a bug in the iterator implementation.</li><li><a href="https://github.com/jrandall">Joshua C. Randall</a> fixed a bug in the floating-point serialization.</li><li><a href="https://github.com/aburgh">Aaron Burghardt</a> implemented code to parse streams incrementally. Furthermore, he greatly improved the parser class by allowing the definition of a filter function to discard undesired elements while parsing.</li><li><a href="https://github.com/dkopecek">Daniel Kopeček</a> fixed a bug in the compilation with GCC 5.0.</li><li><a href="https://github.com/Florianjw">Florian Weber</a> fixed a bug in and improved the performance of the comparison operators.</li><li><a href="https://github.com/EricMCornelius">Eric Cornelius</a> pointed out a bug in the handling with NaN and infinity values. He also improved the performance of the string escaping.</li><li><a href="https://github.com/likebeta">易思龙</a> implemented a conversion from anonymous enums.</li><li><a href="https://github.com/kepkin">kepkin</a> patiently pushed forward the support for Microsoft Visual studio.</li><li><a href="https://github.com/gregmarr">gregmarr</a> simplified the implementation of reverse iterators and helped with numerous hints and improvements. In particular, he pushed forward the implementation of user-defined types.</li><li><a href="https://github.com/caiovlp">Caio Luppi</a> fixed a bug in the Unicode handling.</li><li><a href="https://github.com/dariomt">dariomt</a> fixed some typos in the examples.</li><li><a href="https://github.com/d-frey">Daniel Frey</a> cleaned up some pointers and implemented exception-safe memory allocation.</li><li><a href="https://github.com/ColinH">Colin Hirsch</a> took care of a small namespace issue.</li><li><a href="https://github.com/whoshuu">Huu Nguyen</a> correct a variable name in the documentation.</li><li><a href="https://github.com/silverweed">Silverweed</a> overloaded <code>parse()</code> to accept an rvalue reference.</li><li><a href="https://github.com/dariomt">dariomt</a> fixed a subtlety in MSVC type support and implemented the <code>get_ref()</code> function to get a reference to stored values.</li><li><a href="https://github.com/ZahlGraf">ZahlGraf</a> added a workaround that allows compilation using Android NDK.</li><li><a href="https://github.com/whackashoe">whackashoe</a> replaced a function that was marked as unsafe by Visual Studio.</li><li><a href="https://github.com/406345">406345</a> fixed two small warnings.</li><li><a href="https://github.com/glenfe">Glen Fernandes</a> noted a potential portability problem in the <code>has_mapped_type</code> function.</li><li><a href="https://github.com/nibroc">Corbin Hughes</a> fixed some typos in the contribution guidelines.</li><li><a href="https://github.com/twelsby">twelsby</a> fixed the array subscript operator, an issue that failed the MSVC build, and floating-point parsing/dumping. He further added support for unsigned integer numbers and implemented better roundtrip support for parsed numbers.</li><li><a href="https://github.com/vog">Volker Diels-Grabsch</a> fixed a link in the README file.</li><li><a href="https://github.com/msm-">msm-</a> added support for American Fuzzy Lop.</li><li><a href="https://github.com/Annihil">Annihil</a> fixed an example in the README file.</li><li><a href="https://github.com/Themercee">Themercee</a> noted a wrong URL in the README file.</li><li><a href="https://github.com/lv-zheng">Lv Zheng</a> fixed a namespace issue with <code>int64_t</code> and <code>uint64_t</code>.</li><li><a href="https://github.com/abc100m">abc100m</a> analyzed the issues with GCC 4.8 and proposed a <a href="https://github.com/nlohmann/json/pull/212">partial solution</a>.</li><li><a href="https://github.com/zewt">zewt</a> added useful notes to the README file about Android.</li><li><a href="https://github.com/robertmrk">Róbert Márki</a> added a fix to use move iterators and improved the integration via CMake.</li><li><a href="https://github.com/ChrisKitching">Chris Kitching</a> cleaned up the CMake files.</li><li><a href="https://github.com/06needhamt">Tom Needham</a> fixed a subtle bug with MSVC 2015 which was also proposed by <a href="https://github.com/Epidal">Michael K.</a>.</li><li><a href="https://github.com/thelostt">Mário Feroldi</a> fixed a small typo.</li><li><a href="https://github.com/duncanwerner">duncanwerner</a> found a really embarrassing performance regression in the 2.0.0 release.</li><li><a href="https://github.com/dtoma">Damien</a> fixed one of the last conversion warnings.</li><li><a href="https://github.com/t-b">Thomas Braun</a> fixed a warning in a test case.</li><li><a href="https://github.com/theodelrieu">Théo DELRIEU</a> patiently and constructively oversaw the long way toward <a href="https://github.com/nlohmann/json/issues/290">iterator-range parsing</a>. He also implemented the magic behind the serialization/deserialization of user-defined types and split the single header file into smaller chunks.</li><li><a href="https://github.com/5tefan">Stefan</a> fixed a minor issue in the documentation.</li><li><a href="https://github.com/vasild">Vasil Dimov</a> fixed the documentation regarding conversions from <code>std::multiset</code>.</li><li><a href="https://github.com/ChristophJud">ChristophJud</a> overworked the CMake files to ease project inclusion.</li><li><a href="https://github.com/vpetrigo">Vladimir Petrigo</a> made a SFINAE hack more readable and added Visual Studio 17 to the build matrix.</li><li><a href="https://github.com/seeekr">Denis Andrejew</a> fixed a grammar issue in the README file.</li><li><a href="https://github.com/palacaze">Pierre-Antoine Lacaze</a> found a subtle bug in the <code>dump()</code> function.</li><li><a href="https://github.com/TurpentineDistillery">TurpentineDistillery</a> pointed to <a href="https://en.cppreference.com/w/cpp/locale/locale/classic"><code>std::locale::classic()</code></a> to avoid too much locale joggling, found some nice performance improvements in the parser, improved the benchmarking code, and realized locale-independent number parsing and printing.</li><li><a href="https://github.com/cgzones">cgzones</a> had an idea how to fix the Coverity scan.</li><li><a href="https://github.com/jaredgrubb">Jared Grubb</a> silenced a nasty documentation warning.</li><li><a href="https://github.com/qwename">Yixin Zhang</a> fixed an integer overflow check.</li><li><a href="https://github.com/Bosswestfalen">Bosswestfalen</a> merged two iterator classes into a smaller one.</li><li><a href="https://github.com/Daniel599">Daniel599</a> helped to get Travis execute the tests with Clang&#x27;s sanitizers.</li><li><a href="https://github.com/vjon">Jonathan Lee</a> fixed an example in the README file.</li><li><a href="https://github.com/gnzlbg">gnzlbg</a> supported the implementation of user-defined types.</li><li><a href="https://github.com/qis">Alexej Harm</a> helped to get the user-defined types working with Visual Studio.</li><li><a href="https://github.com/jaredgrubb">Jared Grubb</a> supported the implementation of user-defined types.</li><li><a href="https://github.com/EnricoBilla">EnricoBilla</a> noted a typo in an example.</li><li><a href="https://github.com/horenmar">Martin Hořeňovský</a> found a way for a 2x speedup for the compilation time of the test suite.</li><li><a href="https://github.com/ukhegg">ukhegg</a> found proposed an improvement for the examples section.</li><li><a href="https://github.com/rswanson-ihi">rswanson-ihi</a> noted a typo in the README.</li><li><a href="https://github.com/stanmihai4">Mihai Stan</a> fixed a bug in the comparison with <code>nullptr</code>s.</li><li><a href="https://github.com/tusharpm">Tushar Maheshwari</a> added <a href="https://github.com/sakra/cotire">cotire</a> support to speed up the compilation.</li><li><a href="https://github.com/TedLyngmo">TedLyngmo</a> noted a typo in the README, removed unnecessary bit arithmetic, and fixed some <code>-Weffc++</code> warnings.</li><li><a href="https://github.com/krzysztofwos">Krzysztof Woś</a> made exceptions more visible.</li><li><a href="https://github.com/ftillier">ftillier</a> fixed a compiler warning.</li><li><a href="https://github.com/tinloaf">tinloaf</a> made sure all pushed warnings are properly popped.</li><li><a href="https://github.com/Fytch">Fytch</a> found a bug in the documentation.</li><li><a href="https://github.com/Type1J">Jay Sistar</a> implemented a Meson build description.</li><li><a href="https://github.com/HenryRLee">Henry Lee</a> fixed a warning in ICC and improved the iterator implementation.</li><li><a href="https://github.com/vthiery">Vincent Thiery</a> maintains a package for the Conan package manager.</li><li><a href="https://github.com/koemeet">Steffen</a> fixed a potential issue with MSVC and <code>std::min</code>.</li><li><a href="https://github.com/Chocobo1">Mike Tzou</a> fixed some typos.</li><li><a href="https://github.com/amrcode">amrcode</a> noted a misleading documentation about comparison of floats.</li><li><a href="https://github.com/olegendo">Oleg Endo</a> reduced the memory consumption by replacing <code>&lt;iostream&gt;</code> with <code>&lt;iosfwd&gt;</code>.</li><li><a href="https://github.com/dan-42">dan-42</a> cleaned up the CMake files to simplify including/reusing of the library.</li><li><a href="https://github.com/himikof">Nikita Ofitserov</a> allowed for moving values from initializer lists.</li><li><a href="https://github.com/wincent">Greg Hurrell</a> fixed a typo.</li><li><a href="https://github.com/DmitryKuk">Dmitry Kukovinets</a> fixed a typo.</li><li><a href="https://github.com/kbthomp1">kbthomp1</a> fixed an issue related to the Intel OSX compiler.</li><li><a href="https://github.com/daixtrose">Markus Werle</a> fixed a typo.</li><li><a href="https://github.com/WebProdPP">WebProdPP</a> fixed a subtle error in a precondition check.</li><li><a href="https://github.com/leha-bot">Alex</a> noted an error in a code sample.</li><li><a href="https://github.com/tdegeus">Tom de Geus</a> reported some warnings with ICC and helped fixing them.</li><li><a href="https://github.com/pjkundert">Perry Kundert</a> simplified reading from input streams.</li><li><a href="https://github.com/sonulohani">Sonu Lohani</a> fixed a small compilation error.</li><li><a href="https://github.com/jseward">Jamie Seward</a> fixed all MSVC warnings.</li><li><a href="https://github.com/eld00d">Nate Vargas</a> added a Doxygen tag file.</li><li><a href="https://github.com/pvleuven">pvleuven</a> helped fixing a warning in ICC.</li><li><a href="https://github.com/crea7or">Pavel</a> helped fixing some warnings in MSVC.</li><li><a href="https://github.com/jseward">Jamie Seward</a> avoided unnecessary string copies in <code>find()</code> and <code>count()</code>.</li><li><a href="https://github.com/Itja">Mitja</a> fixed some typos.</li><li><a href="https://github.com/jowr">Jorrit Wronski</a> updated the Hunter package links.</li><li><a href="https://github.com/TinyTinni">Matthias Möller</a> added a <code>.natvis</code> for the MSVC debug view.</li><li><a href="https://github.com/bogemic">bogemic</a> fixed some C++17 deprecation warnings.</li><li><a href="https://github.com/erengy">Eren Okka</a> fixed some MSVC warnings.</li><li><a href="https://github.com/abolz">abolz</a> integrated the Grisu2 algorithm for proper floating-point formatting, allowing more roundtrip checks to succeed.</li><li><a href="https://github.com/Pipeliner">Vadim Evard</a> fixed a Markdown issue in the README.</li><li><a href="https://github.com/zerodefect">zerodefect</a> fixed a compiler warning.</li><li><a href="https://github.com/kaidokert">Kert</a> allowed to template the string type in the serialization and added the possibility to override the exceptional behavior.</li><li><a href="https://github.com/mark-99">mark-99</a> helped fixing an ICC error.</li><li><a href="https://github.com/patrikhuber">Patrik Huber</a> fixed links in the README file.</li><li><a href="https://github.com/johnfb">johnfb</a> found a bug in the implementation of CBOR&#x27;s indefinite length strings.</li><li><a href="https://github.com/pfultz2">Paul Fultz II</a> added a note on the cget package manager.</li><li><a href="https://github.com/wla80">Wilson Lin</a> made the integration section of the README more concise.</li><li><a href="https://github.com/ralfbielig">RalfBielig</a> detected and fixed a memory leak in the parser callback.</li><li><a href="https://github.com/agrianius">agrianius</a> allowed to dump JSON to an alternative string type.</li><li><a href="https://github.com/ktonon">Kevin Tonon</a> overworked the C++11 compiler checks in CMake.</li><li><a href="https://github.com/ax3l">Axel Huebl</a> simplified a CMake check and added support for the <a href="https://spack.io">Spack package manager</a>.</li><li><a href="https://github.com/coryan">Carlos O&#x27;Ryan</a> fixed a typo.</li><li><a href="https://github.com/jammehcow">James Upjohn</a> fixed a version number in the compilers section.</li><li><a href="https://github.com/chuckatkins">Chuck Atkins</a> adjusted the CMake files to the CMake packaging guidelines and provided documentation for the CMake integration.</li><li><a href="https://github.com/dns13">Jan Schöppach</a> fixed a typo.</li><li><a href="https://github.com/martin-mfg">martin-mfg</a> fixed a typo.</li><li><a href="https://github.com/TinyTinni">Matthias Möller</a> removed the dependency from <code>std::stringstream</code>.</li><li><a href="https://github.com/agrianius">agrianius</a> added code to use alternative string implementations.</li><li><a href="https://github.com/Daniel599">Daniel599</a> allowed to use more algorithms with the <code>items()</code> function.</li><li><a href="https://github.com/jrakow">Julius Rakow</a> fixed the Meson include directory and fixed the links to <a href="cppreference.com">cppreference.com</a>.</li><li><a href="https://github.com/sonulohani">Sonu Lohani</a> fixed the compilation with MSVC 2015 in debug mode.</li><li><a href="https://github.com/grembo">grembo</a> fixed the test suite and re-enabled several test cases.</li><li><a href="https://github.com/simnalamburt">Hyeon Kim</a> introduced the macro <code>JSON_INTERNAL_CATCH</code> to control the exception handling inside the library.</li><li><a href="https://github.com/thyu">thyu</a> fixed a compiler warning.</li><li><a href="https://github.com/LEgregius">David Guthrie</a> fixed a subtle compilation error with Clang 3.4.2.</li><li><a href="https://github.com/dennisfischer">Dennis Fischer</a> allowed to call <code>find_package</code> without installing the library.</li><li><a href="https://github.com/simnalamburt">Hyeon Kim</a> fixed an issue with a double macro definition.</li><li><a href="https://github.com/rivertam">Ben Berman</a> made some error messages more understandable.</li><li><a href="https://github.com/zakalibit">zakalibit</a> fixed a compilation problem with the Intel C++ compiler.</li><li><a href="https://github.com/mandreyel">mandreyel</a> fixed a compilation problem.</li><li><a href="https://github.com/koponomarenko">Kostiantyn Ponomarenko</a> added version and license information to the Meson build file.</li><li><a href="https://github.com/henryiii">Henry Schreiner</a> added support for GCC 4.8.</li><li><a href="https://github.com/knilch0r">knilch</a> made sure the test suite does not stall when run in the wrong directory.</li><li><a href="https://github.com/antonioborondo">Antonio Borondo</a> fixed an MSVC 2017 warning.</li><li><a href="https://github.com/dgendreau">Dan Gendreau</a> implemented the <code>NLOHMANN_JSON_SERIALIZE_ENUM</code> macro to quickly define a enum/JSON mapping.</li><li><a href="https://github.com/efp">efp</a> added line and column information to parse errors.</li><li><a href="https://github.com/julian-becker">julian-becker</a> added BSON support.</li><li><a href="https://github.com/pratikpc">Pratik Chowdhury</a> added support for structured bindings.</li><li><a href="https://github.com/davedissian">David Avedissian</a> added support for Clang 5.0.1 (PS4 version).</li><li><a href="https://github.com/dumarjo">Jonathan Dumaresq</a> implemented an input adapter to read from <code>FILE*</code>.</li><li><a href="https://github.com/kjpus">kjpus</a> fixed a link in the documentation.</li><li><a href="https://github.com/manu-chroma">Manvendra Singh</a> fixed a typo in the documentation.</li><li><a href="https://github.com/ziggurat29">ziggurat29</a> fixed an MSVC warning.</li><li><a href="https://github.com/SylvainCorlay">Sylvain Corlay</a> added code to avoid an issue with MSVC.</li><li><a href="https://github.com/mefyl">mefyl</a> fixed a bug when JSON was parsed from an input stream.</li><li><a href="https://github.com/mpoquet">Millian Poquet</a> allowed to install the library via Meson.</li></ul><p>Thanks a lot for helping out! Please <a href="mailto:mail@nlohmann.me">let me know</a> if I forgot someone.</p><h2>Used third-party tools</h2><p>The library itself consists of a single header file licensed under the MIT license. However, it is built, tested, documented, and whatnot using a lot of third-party tools and services. Thanks a lot!</p><ul><li><a href="https://github.com/edlund/amalgamate"><strong>amalgamate.py - Amalgamate C source and header files</strong></a> to create a single header file</li><li><a href="http://lcamtuf.coredump.cx/afl/"><strong>American fuzzy lop</strong></a> for fuzz testing</li><li><a href="https://www.appveyor.com"><strong>AppVeyor</strong></a> for <a href="https://ci.appveyor.com/project/nlohmann/json">continuous integration</a> on Windows</li><li><a href="http://astyle.sourceforge.net"><strong>Artistic Style</strong></a> for automatic source code identation</li><li><a href="https://github.com/philsquared/Catch"><strong>Catch</strong></a> for the unit tests</li><li><a href="http://clang.llvm.org"><strong>Clang</strong></a> for compilation with code sanitizers</li><li><a href="https://cmake.org"><strong>CMake</strong></a> for build automation</li><li><a href="https://www.codacy.com"><strong>Codacity</strong></a> for further <a href="https://www.codacy.com/app/nlohmann/json">code analysis</a></li><li><a href="https://coveralls.io"><strong>Coveralls</strong></a> to measure <a href="https://coveralls.io/github/nlohmann/json">code coverage</a></li><li><a href="https://scan.coverity.com"><strong>Coverity Scan</strong></a> for <a href="https://scan.coverity.com/projects/nlohmann-json">static analysis</a></li><li><a href="http://cppcheck.sourceforge.net"><strong>cppcheck</strong></a> for static analysis</li><li><a href="http://www.stack.nl/~dimitri/doxygen/"><strong>Doxygen</strong></a> to generate <a href="https://nlohmann.github.io/json/">documentation</a></li><li><a href="https://github.com/rstacruz/git-update-ghpages"><strong>git-update-ghpages</strong></a> to upload the documentation to gh-pages</li><li><a href="https://github.com/skywinder/github-changelog-generator"><strong>GitHub Changelog Generator</strong></a> to generate the <a href="https://github.com/nlohmann/json/blob/develop/ChangeLog.md">ChangeLog</a></li><li><a href="https://github.com/google/benchmark"><strong>Google Benchmark</strong></a> to implement the benchmarks</li><li><a href="http://llvm.org/docs/LibFuzzer.html"><strong>libFuzzer</strong></a> to implement fuzz testing for OSS-Fuzz</li><li><a href="https://github.com/google/oss-fuzz"><strong>OSS-Fuzz</strong></a> for continuous fuzz testing of the library (<a href="https://github.com/google/oss-fuzz/tree/master/projects/json">project repository</a>)</li><li><a href="https://probot.github.io"><strong>Probot</strong></a> for automating maintainer tasks such as closing stale issues, requesting missing information, or detecting toxic comments.</li><li><a href="https://github.com/nlohmann/json/blob/develop/doc/scripts/send_to_wandbox.py"><strong>send_to_wandbox</strong></a> to send code examples to <a href="http://melpon.org/wandbox">Wandbox</a></li><li><a href="https://travis-ci.org"><strong>Travis</strong></a> for <a href="https://travis-ci.org/nlohmann/json">continuous integration</a> on Linux and macOS</li><li><a href="http://valgrind.org"><strong>Valgrind</strong></a> to check for correct memory management</li><li><a href="http://melpon.org/wandbox"><strong>Wandbox</strong></a> for <a href="https://wandbox.org/permlink/TarF5pPn9NtHQjhf">online examples</a></li></ul><h2>Projects using JSON for Modern C++</h2><p>The library is currently used in Apple macOS Sierra and iOS 10. I am not sure what they are using the library for, but I am happy that it runs on so many devices.</p><h2>Notes</h2><ul><li>The code contains numerous debug <strong>assertions</strong> which can be switched off by defining the preprocessor macro <code>NDEBUG</code>, see the <a href="https://en.cppreference.com/w/cpp/error/assert">documentation of <code>assert</code></a>. In particular, note <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a233b02b0839ef798942dd46157cc0fe6.html#a233b02b0839ef798942dd46157cc0fe6"><code>operator[]</code></a> implements <strong>unchecked access</strong> for const objects: If the given key is not present, the behavior is undefined (think of a dereferenced null pointer) and yields an <a href="https://github.com/nlohmann/json/issues/289">assertion failure</a> if assertions are switched on. If you are not sure whether an element in an object exists, use checked access with the <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a73ae333487310e3302135189ce8ff5d8.html#a73ae333487310e3302135189ce8ff5d8"><code>at()</code> function</a>.</li><li>As the exact type of a number is not defined in the <a href="https://tools.ietf.org/html/rfc7159.html">JSON specification</a>, this library tries to choose the best fitting C++ number type automatically. As a result, the type <code>double</code> may be used to store numbers which may yield <a href="https://github.com/nlohmann/json/issues/181"><strong>floating-point exceptions</strong></a> in certain rare situations if floating-point exceptions have been unmasked in the calling code. These exceptions are not caused by the library and need to be fixed in the calling code, such as by re-masking the exceptions prior to calling library functions.</li><li>The library supports <strong>Unicode input</strong> as follows:<ul><li>Only <strong>UTF-8</strong> encoded input is supported which is the default encoding for JSON according to <a href="https://tools.ietf.org/html/rfc7159.html#section-8.1">RFC 7159</a>.</li><li>Other encodings such as Latin-1, UTF-16, or UTF-32 are not supported and will yield parse or serialization errors.</li><li><a href="http://www.unicode.org/faq/private_use.html#nonchar1">Unicode noncharacters</a> will not be replaced by the library.</li><li>Invalid surrogates (e.g., incomplete pairs such as <code>\uDEAD</code>) will yield parse errors.</li><li>The strings stored in the library are UTF-8 encoded. When using the default string type (<code>std::string</code>), note that its length/size functions return the number of stored bytes rather than the number of characters or glyphs.</li></ul></li><li>The code can be compiled without C++ <strong>runtime type identification</strong> features; that is, you can use the <code>-fno-rtti</code> compiler flag.</li><li><strong>Exceptions</strong> are used widely within the library. They can, however, be switched off with either using the compiler flag <code>-fno-exceptions</code> or by defining the symbol <code>JSON_NOEXCEPTION</code>. In this case, exceptions are replaced by an <code>abort()</code> call.</li><li>By default, the library does not preserve the <strong>insertion order of object elements</strong>. This is standards-compliant, as the <a href="https://tools.ietf.org/html/rfc7159.html">JSON standard</a> defines objects as &quot;an unordered collection of zero or more name/value pairs&quot;. If you do want to preserve the insertion order, you can specialize the object type with containers like <a href="https://github.com/Tessil/ordered-map"><code>tsl::ordered_map</code></a> (<a href="https://github.com/nlohmann/json/issues/546#issuecomment-304447518">integration</a>) or <a href="https://github.com/nlohmann/fifo_map"><code>nlohmann::fifo_map</code></a> (<a href="https://github.com/nlohmann/json/issues/485#issuecomment-333652309">integration</a>).</li></ul><h2>Execute unit tests</h2><p>To compile and run the tests, you need to execute</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sh" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>$ mkdir build
</span>$ cd build
<!-- -->$ cmake ..
<!-- -->$ cmake --build .
<!-- -->$ ctest --output-on-failure
</code></pre><p>For more information, have a look at the file <a href="https://github.com/nlohmann/json/blob/master/.travis.yml">.travis.yml</a>.</p></div></div><div class="banner footer"><div class="view column"><div class="actions"><div class="links"><a href="/">Buckaroo</a><a href="https://github.com/LoopPerfect/buckaroo/wiki" target="_blank">Docs</a><a href="https://github.com/LoopPerfect/buckaroo" target="_blank">GitHub</a></div><div class="signup"><h1 class="action">Sign up for our Newsletter</h1><div class="info">Get the latest updates about new packages and Buckaroo releases.</div><button>Sign Up</button></div></div><div class="powered"><img src="/LoopPerfectInvertSmall.png"/><span>Powered by LoopPerfect</span></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"packageName":"buckaroo-pm/nlohmann-json","name":"nlohmann/json","licence":"MIT","description":"JSON for Modern C++","readme":"[![JSON for Modern C++](https://raw.githubusercontent.com/nlohmann/json/master/doc/json.gif)](https://github.com/nlohmann/json/releases)\n\n[![Build Status](https://travis-ci.org/nlohmann/json.svg?branch=master)](https://travis-ci.org/nlohmann/json)\n[![Build Status](https://ci.appveyor.com/api/projects/status/1acb366xfyg3qybk/branch/develop?svg=true)](https://ci.appveyor.com/project/nlohmann/json)\n[![Coverage Status](https://img.shields.io/coveralls/nlohmann/json.svg)](https://coveralls.io/r/nlohmann/json)\n[![Coverity Scan Build Status](https://scan.coverity.com/projects/5550/badge.svg)](https://scan.coverity.com/projects/nlohmann-json)\n[![Codacy Badge](https://api.codacy.com/project/badge/Grade/f3732b3327e34358a0e9d1fe9f661f08)](https://www.codacy.com/app/nlohmann/json?utm_source=github.com\u0026amp;utm_medium=referral\u0026amp;utm_content=nlohmann/json\u0026amp;utm_campaign=Badge_Grade)\n[![Language grade: C/C++](https://img.shields.io/lgtm/grade/cpp/g/nlohmann/json.svg?logo=lgtm\u0026logoWidth=18)](https://lgtm.com/projects/g/nlohmann/json/context:cpp)\n[![Try online](https://img.shields.io/badge/try-online-blue.svg)](https://wandbox.org/permlink/TarF5pPn9NtHQjhf)\n[![Documentation](https://img.shields.io/badge/docs-doxygen-blue.svg)](http://nlohmann.github.io/json)\n[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/nlohmann/json/master/LICENSE.MIT)\n[![GitHub Releases](https://img.shields.io/github/release/nlohmann/json.svg)](https://github.com/nlohmann/json/releases)\n[![GitHub Issues](https://img.shields.io/github/issues/nlohmann/json.svg)](http://github.com/nlohmann/json/issues)\n[![Average time to resolve an issue](http://isitmaintained.com/badge/resolution/nlohmann/json.svg)](http://isitmaintained.com/project/nlohmann/json \"Average time to resolve an issue\")\n[![CII Best Practices](https://bestpractices.coreinfrastructure.org/projects/289/badge)](https://bestpractices.coreinfrastructure.org/projects/289)\n\n- [Design goals](#design-goals)\n- [Integration](#integration)\n  - [CMake](#cmake)\n  - [Package Managers](#package-managers)\n- [Examples](#examples)\n  - [JSON as first-class data type](#json-as-first-class-data-type)\n  - [Serialization / Deserialization](#serialization--deserialization)\n  - [STL-like access](#stl-like-access)\n  - [Conversion from STL containers](#conversion-from-stl-containers)\n  - [JSON Pointer and JSON Patch](#json-pointer-and-json-patch)\n  - [JSON Merge Patch](#json-merge-patch)\n  - [Implicit conversions](#implicit-conversions)\n  - [Conversions to/from arbitrary types](#arbitrary-types-conversions)\n  - [Specializing enum conversion](#specializing-enum-conversion)\n  - [Binary formats (BSON, CBOR, MessagePack, and UBJSON)](#binary-formats-bson-cbor-messagepack-and-ubjson)\n- [Supported compilers](#supported-compilers)\n- [License](#license)\n- [Contact](#contact)\n- [Thanks](#thanks)\n- [Used third-party tools](#used-third-party-tools)\n- [Projects using JSON for Modern C++](#projects-using-json-for-modern-c)\n- [Notes](#notes)\n- [Execute unit tests](#execute-unit-tests)\n\n## Design goals\n\nThere are myriads of [JSON](http://json.org) libraries out there, and each may even have its reason to exist. Our class had these design goals:\n\n- **Intuitive syntax**. In languages such as Python, JSON feels like a first class data type. We used all the operator magic of modern C++ to achieve the same feeling in your code. Check out the [examples below](#examples) and you'll know what I mean.\n\n- **Trivial integration**. Our whole code consists of a single header file [`json.hpp`](https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp). That's it. No library, no subproject, no dependencies, no complex build system. The class is written in vanilla C++11. All in all, everything should require no adjustment of your compiler flags or project settings.\n\n- **Serious testing**. Our class is heavily [unit-tested](https://github.com/nlohmann/json/tree/develop/test/src) and covers [100%](https://coveralls.io/r/nlohmann/json) of the code, including all exceptional behavior. Furthermore, we checked with [Valgrind](http://valgrind.org) and the [Clang Sanitizers](https://clang.llvm.org/docs/index.html) that there are no memory leaks. [Google OSS-Fuzz](https://github.com/google/oss-fuzz/tree/master/projects/json) additionally runs fuzz tests against all parsers 24/7, effectively executing billions of tests so far. To maintain high quality, the project is following the [Core Infrastructure Initiative (CII) best practices](https://bestpractices.coreinfrastructure.org/projects/289).\n\nOther aspects were not so important to us:\n\n- **Memory efficiency**. Each JSON object has an overhead of one pointer (the maximal size of a union) and one enumeration element (1 byte). The default generalization uses the following C++ data types: `std::string` for strings, `int64_t`, `uint64_t` or `double` for numbers, `std::map` for objects, `std::vector` for arrays, and `bool` for Booleans. However, you can template the generalized class `basic_json` to your needs.\n\n- **Speed**. There are certainly [faster JSON libraries](https://github.com/miloyip/nativejson-benchmark#parsing-time) out there. However, if your goal is to speed up your development by adding JSON support with a single header, then this library is the way to go. If you know how to use a `std::vector` or `std::map`, you are already set.\n\nSee the [contribution guidelines](https://github.com/nlohmann/json/blob/master/.github/CONTRIBUTING.md#please-dont) for more information.\n\n\n## Integration\n\n[`json.hpp`](https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp) is the single required file in `single_include/nlohmann` or [released here](https://github.com/nlohmann/json/releases). You need to add\n\n```cpp\n#include \u003cnlohmann/json.hpp\u003e\n\n// for convenience\nusing json = nlohmann::json;\n```\n\nto the files you want to process JSON and set the necessary switches to enable C++11 (e.g., `-std=c++11` for GCC and Clang).\n\nYou can further use file [`include/nlohmann/json_fwd.hpp`](https://github.com/nlohmann/json/blob/develop/include/nlohmann/json_fwd.hpp) for forward-declarations. The installation of json_fwd.hpp (as part of cmake's install step), can be achieved by setting `-DJSON_MultipleHeaders=ON`.\n\n### CMake\n\nYou can also use the `nlohmann_json::nlohmann_json` interface target in CMake.  This target populates the appropriate usage requirements for `INTERFACE_INCLUDE_DIRECTORIES` to point to the appropriate include directories and `INTERFACE_COMPILE_FEATURES` for the necessary C++11 flags.\n\n#### External\n\nTo use this library from a CMake project, you can locate it directly with `find_package()` and use the namespaced imported target from the generated package configuration:\n\n```cmake\n# CMakeLists.txt\nfind_package(nlohmann_json 3.2.0 REQUIRED)\n...\nadd_library(foo ...)\n...\ntarget_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)\n```\n\nThe package configuration file, `nlohmann_jsonConfig.cmake`, can be used either from an install tree or directly out of the build tree.\n\n#### Embedded\n\nTo embed the library directly into an existing CMake project, place the entire source tree in a subdirectory and call `add_subdirectory()` in your `CMakeLists.txt` file:\n\n```cmake\n# Typically you don't care so much for a third party library's tests to be\n# run from your own project's code.\nset(JSON_BuildTests OFF CACHE INTERNAL \"\")\n\n# Don't use include(nlohmann_json/CMakeLists.txt) since that carries with it\n# unintended consequences that will break the build.  It's generally\n# discouraged (although not necessarily well documented as such) to use\n# include(...) for pulling in other CMake projects anyways.\nadd_subdirectory(nlohmann_json)\n...\nadd_library(foo ...)\n...\ntarget_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)\n```\n\n#### Supporting Both\n\nTo allow your project to support either an externally supplied or an embedded JSON library, you can use a pattern akin to the following:\n\n``` cmake\n# Top level CMakeLists.txt\nproject(FOO)\n...\noption(FOO_USE_EXTERNAL_JSON \"Use an external JSON library\" OFF)\n...\nadd_subdirectory(thirdparty)\n...\nadd_library(foo ...)\n...\n# Note that the namespaced target will always be available regardless of the\n# import method\ntarget_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)\n```\n```cmake\n# thirdparty/CMakeLists.txt\n...\nif(FOO_USE_EXTERNAL_JSON)\n  find_package(nlohmann_json 3.2.0 REQUIRED)\nelse()\n  set(JSON_BuildTests OFF CACHE INTERNAL \"\")\n  add_subdirectory(nlohmann_json)\nendif()\n...\n```\n\n`thirdparty/nlohmann_json` is then a complete copy of this source tree.\n\n### Package Managers\n\n:beer: If you are using OS X and [Homebrew](http://brew.sh), just type `brew tap nlohmann/json` and `brew install nlohmann_json` and you're set. If you want the bleeding edge rather than the latest release, use `brew install nlohmann_json --HEAD`.\n\nIf you are using the [Meson Build System](http://mesonbuild.com), then you can get a wrap file by downloading it from [Meson WrapDB](https://wrapdb.mesonbuild.com/nlohmann_json), or simply use `meson wrap install nlohmann_json`.\n\nIf you are using [Conan](https://www.conan.io/) to manage your dependencies, merely add `jsonformoderncpp/x.y.z@vthiery/stable` to your `conanfile.py`'s requires, where `x.y.z` is the release version you want to use. Please file issues [here](https://github.com/vthiery/conan-jsonformoderncpp/issues) if you experience problems with the packages.\n\nIf you are using [Spack](https://www.spack.io/) to manage your dependencies, you can use the `nlohmann_json` package. Please see the [spack project](https://github.com/spack/spack) for any issues regarding the packaging.\n\nIf you are using [hunter](https://github.com/ruslo/hunter/) on your project for external dependencies, then you can use the [nlohmann_json package](https://docs.hunter.sh/en/latest/packages/pkg/nlohmann_json.html). Please see the hunter project for any issues regarding the packaging.\n\nIf you are using [Buckaroo](https://buckaroo.pm), you can install this library's module with `buckaroo install nlohmann/json`. Please file issues [here](https://github.com/LoopPerfect/buckaroo-recipes/issues/new?title=nlohmann/nlohmann/json).\n\nIf you are using [vcpkg](https://github.com/Microsoft/vcpkg/) on your project for external dependencies, then you can use the [nlohmann-json package](https://github.com/Microsoft/vcpkg/tree/master/ports/nlohmann-json). Please see the vcpkg project for any issues regarding the packaging.\n\nIf you are using [cget](http://cget.readthedocs.io/en/latest/), you can install the latest development version with `cget install nlohmann/json`. A specific version can be installed with `cget install nlohmann/json@v3.1.0`. Also, the multiple header version can be installed by adding the `-DJSON_MultipleHeaders=ON` flag (i.e., `cget install nlohmann/json -DJSON_MultipleHeaders=ON`).\n\nIf you are using [CocoaPods](https://cocoapods.org), you can use the library by adding pod `\"nlohmann_json\", '~\u003e3.1.2'` to your podfile (see [an example](https://bitbucket.org/benman/nlohmann_json-cocoapod/src/master/)). Please file issues [here](https://bitbucket.org/benman/nlohmann_json-cocoapod/issues?status=new\u0026status=open).\n\nIf you are using [NuGet](https://www.nuget.org), you can use the package [nlohmann.json](https://www.nuget.org/packages/nlohmann.json/). Please check [this extensive description](https://github.com/nlohmann/json/issues/1132#issuecomment-452250255) on how to use the package. Please files issues [here](https://github.com/hnkb/nlohmann-json-nuget/issues).\n\nIf you are using [conda](https://conda.io/), you can use the package [nlohmann_json](https://github.com/conda-forge/nlohmann_json-feedstock) from [conda-forge](https://conda-forge.org) executing `conda install -c conda-forge nlohmann_json`. Please file issues [here](https://github.com/conda-forge/nlohmann_json-feedstock/issues).\n\n## Examples\n\nBeside the examples below, you may want to check the [documentation](https://nlohmann.github.io/json/) where each function contains a separate code example (e.g., check out [`emplace()`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a5338e282d1d02bed389d852dd670d98d.html#a5338e282d1d02bed389d852dd670d98d)). All [example files](https://github.com/nlohmann/json/tree/develop/doc/examples) can be compiled and executed on their own (e.g., file [emplace.cpp](https://github.com/nlohmann/json/blob/develop/doc/examples/emplace.cpp)).\n\n### JSON as first-class data type\n\nHere are some examples to give you an idea how to use the class.\n\nAssume you want to create the JSON object\n\n```json\n{\n  \"pi\": 3.141,\n  \"happy\": true,\n  \"name\": \"Niels\",\n  \"nothing\": null,\n  \"answer\": {\n    \"everything\": 42\n  },\n  \"list\": [1, 0, 2],\n  \"object\": {\n    \"currency\": \"USD\",\n    \"value\": 42.99\n  }\n}\n```\n\nWith this library, you could write:\n\n```cpp\n// create an empty structure (null)\njson j;\n\n// add a number that is stored as double (note the implicit conversion of j to an object)\nj[\"pi\"] = 3.141;\n\n// add a Boolean that is stored as bool\nj[\"happy\"] = true;\n\n// add a string that is stored as std::string\nj[\"name\"] = \"Niels\";\n\n// add another null object by passing nullptr\nj[\"nothing\"] = nullptr;\n\n// add an object inside the object\nj[\"answer\"][\"everything\"] = 42;\n\n// add an array that is stored as std::vector (using an initializer list)\nj[\"list\"] = { 1, 0, 2 };\n\n// add another object (using an initializer list of pairs)\nj[\"object\"] = { {\"currency\", \"USD\"}, {\"value\", 42.99} };\n\n// instead, you could also write (which looks very similar to the JSON above)\njson j2 = {\n  {\"pi\", 3.141},\n  {\"happy\", true},\n  {\"name\", \"Niels\"},\n  {\"nothing\", nullptr},\n  {\"answer\", {\n    {\"everything\", 42}\n  }},\n  {\"list\", {1, 0, 2}},\n  {\"object\", {\n    {\"currency\", \"USD\"},\n    {\"value\", 42.99}\n  }}\n};\n```\n\nNote that in all these cases, you never need to \"tell\" the compiler which JSON value type you want to use. If you want to be explicit or express some edge cases, the functions [`json::array`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_aa80485befaffcadaa39965494e0b4d2e.html#aa80485befaffcadaa39965494e0b4d2e) and [`json::object`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_aa13f7c0615867542ce80337cbcf13ada.html#aa13f7c0615867542ce80337cbcf13ada) will help:\n\n```cpp\n// a way to express the empty array []\njson empty_array_explicit = json::array();\n\n// ways to express the empty object {}\njson empty_object_implicit = json({});\njson empty_object_explicit = json::object();\n\n// a way to express an _array_ of key/value pairs [[\"currency\", \"USD\"], [\"value\", 42.99]]\njson array_not_object = json::array({ {\"currency\", \"USD\"}, {\"value\", 42.99} });\n```\n\n### Serialization / Deserialization\n\n#### To/from strings\n\nYou can create a JSON value (deserialization) by appending `_json` to a string literal:\n\n```cpp\n// create object from string literal\njson j = \"{ \\\"happy\\\": true, \\\"pi\\\": 3.141 }\"_json;\n\n// or even nicer with a raw string literal\nauto j2 = R\"(\n  {\n    \"happy\": true,\n    \"pi\": 3.141\n  }\n)\"_json;\n```\n\nNote that without appending the `_json` suffix, the passed string literal is not parsed, but just used as JSON string value. That is, `json j = \"{ \\\"happy\\\": true, \\\"pi\\\": 3.141 }\"` would just store the string `\"{ \"happy\": true, \"pi\": 3.141 }\"` rather than parsing the actual object.\n\nThe above example can also be expressed explicitly using [`json::parse()`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a5a0339361f3282cb8fd2f9ede6e17d72.html#a5a0339361f3282cb8fd2f9ede6e17d72):\n\n```cpp\n// parse explicitly\nauto j3 = json::parse(\"{ \\\"happy\\\": true, \\\"pi\\\": 3.141 }\");\n```\n\nYou can also get a string representation of a JSON value (serialize):\n\n```cpp\n// explicit conversion to string\nstd::string s = j.dump();    // {\\\"happy\\\":true,\\\"pi\\\":3.141}\n\n// serialization with pretty printing\n// pass in the amount of spaces to indent\nstd::cout \u003c\u003c j.dump(4) \u003c\u003c std::endl;\n// {\n//     \"happy\": true,\n//     \"pi\": 3.141\n// }\n```\n\nNote the difference between serialization and assignment:\n\n```cpp\n// store a string in a JSON value\njson j_string = \"this is a string\";\n\n// retrieve the string value\nauto cpp_string = j_string.get\u003cstd::string\u003e();\n// retrieve the string value (alternative when an variable already exists)\nstd::string cpp_string2;\nj_string.get_to(cpp_string2);\n\n// retrieve the serialized value (explicit JSON serialization)\nstd::string serialized_string = j_string.dump();\n\n// output of original string\nstd::cout \u003c\u003c cpp_string \u003c\u003c \" == \" \u003c\u003c cpp_string2 \u003c\u003c \" == \" \u003c\u003c j_string.get\u003cstd::string\u003e() \u003c\u003c '\\n';\n// output of serialized value\nstd::cout \u003c\u003c j_string \u003c\u003c \" == \" \u003c\u003c serialized_string \u003c\u003c std::endl;\n```\n\n[`.dump()`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a50ec80b02d0f3f51130d4abb5d1cfdc5.html#a50ec80b02d0f3f51130d4abb5d1cfdc5) always returns the serialized value, and [`.get\u003cstd::string\u003e()`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a16f9445f7629f634221a42b967cdcd43.html#a16f9445f7629f634221a42b967cdcd43) returns the originally stored string value.\n\nNote the library only supports UTF-8. When you store strings with different encodings in the library, calling [`dump()`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a50ec80b02d0f3f51130d4abb5d1cfdc5.html#a50ec80b02d0f3f51130d4abb5d1cfdc5) may throw an exception unless `json::error_handler_t::replace` or `json::error_handler_t::ignore` are used as error handlers.\n\n#### To/from streams (e.g. files, string streams)\n\nYou can also use streams to serialize and deserialize:\n\n```cpp\n// deserialize from standard input\njson j;\nstd::cin \u003e\u003e j;\n\n// serialize to standard output\nstd::cout \u003c\u003c j;\n\n// the setw manipulator was overloaded to set the indentation for pretty printing\nstd::cout \u003c\u003c std::setw(4) \u003c\u003c j \u003c\u003c std::endl;\n```\n\nThese operators work for any subclasses of `std::istream` or `std::ostream`. Here is the same example with files:\n\n```cpp\n// read a JSON file\nstd::ifstream i(\"file.json\");\njson j;\ni \u003e\u003e j;\n\n// write prettified JSON to another file\nstd::ofstream o(\"pretty.json\");\no \u003c\u003c std::setw(4) \u003c\u003c j \u003c\u003c std::endl;\n```\n\nPlease note that setting the exception bit for `failbit` is inappropriate for this use case. It will result in program termination due to the `noexcept` specifier in use.\n\n#### Read from iterator range\n\nYou can also parse JSON from an iterator range; that is, from any container accessible by iterators whose content is stored as contiguous byte sequence, for instance a `std::vector\u003cstd::uint8_t\u003e`:\n\n```cpp\nstd::vector\u003cstd::uint8_t\u003e v = {'t', 'r', 'u', 'e'};\njson j = json::parse(v.begin(), v.end());\n```\n\nYou may leave the iterators for the range [begin, end):\n\n```cpp\nstd::vector\u003cstd::uint8_t\u003e v = {'t', 'r', 'u', 'e'};\njson j = json::parse(v);\n```\n\n#### SAX interface\n\nThe library uses a SAX-like interface with the following functions:\n\n```cpp\n// called when null is parsed\nbool null();\n\n// called when a boolean is parsed; value is passed\nbool boolean(bool val);\n\n// called when a signed or unsigned integer number is parsed; value is passed\nbool number_integer(number_integer_t val);\nbool number_unsigned(number_unsigned_t val);\n\n// called when a floating-point number is parsed; value and original string is passed\nbool number_float(number_float_t val, const string_t\u0026 s);\n\n// called when a string is parsed; value is passed and can be safely moved away\nbool string(string_t\u0026 val);\n\n// called when an object or array begins or ends, resp. The number of elements is passed (or -1 if not known)\nbool start_object(std::size_t elements);\nbool end_object();\nbool start_array(std::size_t elements);\nbool end_array();\n// called when an object key is parsed; value is passed and can be safely moved away\nbool key(string_t\u0026 val);\n\n// called when a parse error occurs; byte position, the last token, and an exception is passed\nbool parse_error(std::size_t position, const std::string\u0026 last_token, const detail::exception\u0026 ex);\n```\n\nThe return value of each function determines whether parsing should proceed.\n\nTo implement your own SAX handler, proceed as follows:\n\n1. Implement the SAX interface in a class. You can use class `nlohmann::json_sax\u003cjson\u003e` as base class, but you can also use any class where the functions described above are implemented and public.\n2. Create an object of your SAX interface class, e.g. `my_sax`.\n3. Call `bool json::sax_parse(input, \u0026my_sax)`; where the first parameter can be any input like a string or an input stream and the second parameter is a pointer to your SAX interface.\n\nNote the `sax_parse` function only returns a `bool` indicating the result of the last executed SAX event. It does not return a  `json` value - it is up to you to decide what to do with the SAX events. Furthermore, no exceptions are thrown in case of a parse error - it is up to you what to do with the exception object passed to your `parse_error` implementation. Internally, the SAX interface is used for the DOM parser (class `json_sax_dom_parser`) as well as the acceptor (`json_sax_acceptor`), see file [`json_sax.hpp`](https://github.com/nlohmann/json/blob/develop/include/nlohmann/detail/input/json_sax.hpp).\n\n### STL-like access\n\nWe designed the JSON class to behave just like an STL container. In fact, it satisfies the [**ReversibleContainer**](https://en.cppreference.com/w/cpp/named_req/ReversibleContainer) requirement.\n\n```cpp\n// create an array using push_back\njson j;\nj.push_back(\"foo\");\nj.push_back(1);\nj.push_back(true);\n\n// also use emplace_back\nj.emplace_back(1.78);\n\n// iterate the array\nfor (json::iterator it = j.begin(); it != j.end(); ++it) {\n  std::cout \u003c\u003c *it \u003c\u003c '\\n';\n}\n\n// range-based for\nfor (auto\u0026 element : j) {\n  std::cout \u003c\u003c element \u003c\u003c '\\n';\n}\n\n// getter/setter\nconst auto tmp = j[0].get\u003cstd::string\u003e();\nj[1] = 42;\nbool foo = j.at(2);\n\n// comparison\nj == \"[\\\"foo\\\", 1, true]\"_json;  // true\n\n// other stuff\nj.size();     // 3 entries\nj.empty();    // false\nj.type();     // json::value_t::array\nj.clear();    // the array is empty again\n\n// convenience type checkers\nj.is_null();\nj.is_boolean();\nj.is_number();\nj.is_object();\nj.is_array();\nj.is_string();\n\n// create an object\njson o;\no[\"foo\"] = 23;\no[\"bar\"] = false;\no[\"baz\"] = 3.141;\n\n// also use emplace\no.emplace(\"weather\", \"sunny\");\n\n// special iterator member functions for objects\nfor (json::iterator it = o.begin(); it != o.end(); ++it) {\n  std::cout \u003c\u003c it.key() \u003c\u003c \" : \" \u003c\u003c it.value() \u003c\u003c \"\\n\";\n}\n\n// the same code as range for\nfor (auto\u0026 el : o.items()) {\n  std::cout \u003c\u003c el.key() \u003c\u003c \" : \" \u003c\u003c el.value() \u003c\u003c \"\\n\";\n}\n\n// even easier with structured bindings (C++17)\nfor (auto\u0026 [key, value] : o.items()) {\n  std::cout \u003c\u003c key \u003c\u003c \" : \" \u003c\u003c value \u003c\u003c \"\\n\";\n}\n\n// find an entry\nif (o.find(\"foo\") != o.end()) {\n  // there is an entry with key \"foo\"\n}\n\n// or simpler using count()\nint foo_present = o.count(\"foo\"); // 1\nint fob_present = o.count(\"fob\"); // 0\n\n// delete an entry\no.erase(\"foo\");\n```\n\n\n### Conversion from STL containers\n\nAny sequence container (`std::array`, `std::vector`, `std::deque`, `std::forward_list`, `std::list`) whose values can be used to construct JSON values (e.g., integers, floating point numbers, Booleans, string types, or again STL containers described in this section) can be used to create a JSON array. The same holds for similar associative containers (`std::set`, `std::multiset`, `std::unordered_set`, `std::unordered_multiset`), but in these cases the order of the elements of the array depends on how the elements are ordered in the respective STL container.\n\n```cpp\nstd::vector\u003cint\u003e c_vector {1, 2, 3, 4};\njson j_vec(c_vector);\n// [1, 2, 3, 4]\n\nstd::deque\u003cdouble\u003e c_deque {1.2, 2.3, 3.4, 5.6};\njson j_deque(c_deque);\n// [1.2, 2.3, 3.4, 5.6]\n\nstd::list\u003cbool\u003e c_list {true, true, false, true};\njson j_list(c_list);\n// [true, true, false, true]\n\nstd::forward_list\u003cint64_t\u003e c_flist {12345678909876, 23456789098765, 34567890987654, 45678909876543};\njson j_flist(c_flist);\n// [12345678909876, 23456789098765, 34567890987654, 45678909876543]\n\nstd::array\u003cunsigned long, 4\u003e c_array {{1, 2, 3, 4}};\njson j_array(c_array);\n// [1, 2, 3, 4]\n\nstd::set\u003cstd::string\u003e c_set {\"one\", \"two\", \"three\", \"four\", \"one\"};\njson j_set(c_set); // only one entry for \"one\" is used\n// [\"four\", \"one\", \"three\", \"two\"]\n\nstd::unordered_set\u003cstd::string\u003e c_uset {\"one\", \"two\", \"three\", \"four\", \"one\"};\njson j_uset(c_uset); // only one entry for \"one\" is used\n// maybe [\"two\", \"three\", \"four\", \"one\"]\n\nstd::multiset\u003cstd::string\u003e c_mset {\"one\", \"two\", \"one\", \"four\"};\njson j_mset(c_mset); // both entries for \"one\" are used\n// maybe [\"one\", \"two\", \"one\", \"four\"]\n\nstd::unordered_multiset\u003cstd::string\u003e c_umset {\"one\", \"two\", \"one\", \"four\"};\njson j_umset(c_umset); // both entries for \"one\" are used\n// maybe [\"one\", \"two\", \"one\", \"four\"]\n```\n\nLikewise, any associative key-value containers (`std::map`, `std::multimap`, `std::unordered_map`, `std::unordered_multimap`) whose keys can construct an `std::string` and whose values can be used to construct JSON values (see examples above) can be used to create a JSON object. Note that in case of multimaps only one key is used in the JSON object and the value depends on the internal order of the STL container.\n\n```cpp\nstd::map\u003cstd::string, int\u003e c_map { {\"one\", 1}, {\"two\", 2}, {\"three\", 3} };\njson j_map(c_map);\n// {\"one\": 1, \"three\": 3, \"two\": 2 }\n\nstd::unordered_map\u003cconst char*, double\u003e c_umap { {\"one\", 1.2}, {\"two\", 2.3}, {\"three\", 3.4} };\njson j_umap(c_umap);\n// {\"one\": 1.2, \"two\": 2.3, \"three\": 3.4}\n\nstd::multimap\u003cstd::string, bool\u003e c_mmap { {\"one\", true}, {\"two\", true}, {\"three\", false}, {\"three\", true} };\njson j_mmap(c_mmap); // only one entry for key \"three\" is used\n// maybe {\"one\": true, \"two\": true, \"three\": true}\n\nstd::unordered_multimap\u003cstd::string, bool\u003e c_ummap { {\"one\", true}, {\"two\", true}, {\"three\", false}, {\"three\", true} };\njson j_ummap(c_ummap); // only one entry for key \"three\" is used\n// maybe {\"one\": true, \"two\": true, \"three\": true}\n```\n\n### JSON Pointer and JSON Patch\n\nThe library supports **JSON Pointer** ([RFC 6901](https://tools.ietf.org/html/rfc6901)) as alternative means to address structured values. On top of this, **JSON Patch** ([RFC 6902](https://tools.ietf.org/html/rfc6902)) allows to describe differences between two JSON values - effectively allowing patch and diff operations known from Unix.\n\n```cpp\n// a JSON value\njson j_original = R\"({\n  \"baz\": [\"one\", \"two\", \"three\"],\n  \"foo\": \"bar\"\n})\"_json;\n\n// access members with a JSON pointer (RFC 6901)\nj_original[\"/baz/1\"_json_pointer];\n// \"two\"\n\n// a JSON patch (RFC 6902)\njson j_patch = R\"([\n  { \"op\": \"replace\", \"path\": \"/baz\", \"value\": \"boo\" },\n  { \"op\": \"add\", \"path\": \"/hello\", \"value\": [\"world\"] },\n  { \"op\": \"remove\", \"path\": \"/foo\"}\n])\"_json;\n\n// apply the patch\njson j_result = j_original.patch(j_patch);\n// {\n//    \"baz\": \"boo\",\n//    \"hello\": [\"world\"]\n// }\n\n// calculate a JSON patch from two JSON values\njson::diff(j_result, j_original);\n// [\n//   { \"op\":\" replace\", \"path\": \"/baz\", \"value\": [\"one\", \"two\", \"three\"] },\n//   { \"op\": \"remove\",\"path\": \"/hello\" },\n//   { \"op\": \"add\", \"path\": \"/foo\", \"value\": \"bar\" }\n// ]\n```\n\n### JSON Merge Patch\n\nThe library supports **JSON Merge Patch** ([RFC 7386](https://tools.ietf.org/html/rfc7386)) as a patch format. Instead of using JSON Pointer (see above) to specify values to be manipulated, it describes the changes using a syntax that closely mimics the document being modified.\n\n```cpp\n// a JSON value\njson j_document = R\"({\n  \"a\": \"b\",\n  \"c\": {\n    \"d\": \"e\",\n    \"f\": \"g\"\n  }\n})\"_json;\n\n// a patch\njson j_patch = R\"({\n  \"a\":\"z\",\n  \"c\": {\n    \"f\": null\n  }\n})\"_json;\n\n// apply the patch\nj_original.merge_patch(j_patch);\n// {\n//  \"a\": \"z\",\n//  \"c\": {\n//    \"d\": \"e\"\n//  }\n// }\n```\n\n### Implicit conversions\n\nSupported types can be implicitly converted to JSON values.\n\nIt is recommended to **NOT USE** implicit conversions **FROM** a JSON value.\nYou can find more details about this recommendation [here](https://www.github.com/nlohmann/json/issues/958). \n\n```cpp\n// strings\nstd::string s1 = \"Hello, world!\";\njson js = s1;\nauto s2 = js.get\u003cstd::string\u003e();\n// NOT RECOMMENDED\nstd::string s3 = js;\nstd::string s4;\ns4 = js;\n\n// Booleans\nbool b1 = true;\njson jb = b1;\nauto b2 = jb.get\u003cbool\u003e();\n// NOT RECOMMENDED\nbool b3 = jb;\nbool b4;\nb4 = jb;\n\n// numbers\nint i = 42;\njson jn = i;\nauto f = jn.get\u003cdouble\u003e();\n// NOT RECOMMENDED\ndouble f2 = jb;\ndouble f3;\nf3 = jb;\n\n// etc.\n```\n\nNote that `char` types are not automatically converted to JSON strings, but to integer numbers. A conversion to a string must be specified explicitly:\n\n```cpp\nchar ch = 'A';                       // ASCII value 65\njson j_default = ch;                 // stores integer number 65\njson j_string = std::string(1, ch);  // stores string \"A\"\n```\n\n### Arbitrary types conversions\n\nEvery type can be serialized in JSON, not just STL containers and scalar types. Usually, you would do something along those lines:\n\n```cpp\nnamespace ns {\n    // a simple struct to model a person\n    struct person {\n        std::string name;\n        std::string address;\n        int age;\n    };\n}\n\nns::person p = {\"Ned Flanders\", \"744 Evergreen Terrace\", 60};\n\n// convert to JSON: copy each value into the JSON object\njson j;\nj[\"name\"] = p.name;\nj[\"address\"] = p.address;\nj[\"age\"] = p.age;\n\n// ...\n\n// convert from JSON: copy each value from the JSON object\nns::person p {\n    j[\"name\"].get\u003cstd::string\u003e(),\n    j[\"address\"].get\u003cstd::string\u003e(),\n    j[\"age\"].get\u003cint\u003e()\n};\n```\n\nIt works, but that's quite a lot of boilerplate... Fortunately, there's a better way:\n\n```cpp\n// create a person\nns::person p {\"Ned Flanders\", \"744 Evergreen Terrace\", 60};\n\n// conversion: person -\u003e json\njson j = p;\n\nstd::cout \u003c\u003c j \u003c\u003c std::endl;\n// {\"address\":\"744 Evergreen Terrace\",\"age\":60,\"name\":\"Ned Flanders\"}\n\n// conversion: json -\u003e person\nauto p2 = j.get\u003cns::person\u003e();\n\n// that's it\nassert(p == p2);\n```\n\n#### Basic usage\n\nTo make this work with one of your types, you only need to provide two functions:\n\n```cpp\nusing nlohmann::json;\n\nnamespace ns {\n    void to_json(json\u0026 j, const person\u0026 p) {\n        j = json{{\"name\", p.name}, {\"address\", p.address}, {\"age\", p.age}};\n    }\n\n    void from_json(const json\u0026 j, person\u0026 p) {\n        j.at(\"name\").get_to(p.name);\n        j.at(\"address\").get_to(p.address);\n        j.at(\"age\").get_to(p.age);\n    }\n} // namespace ns\n```\n\nThat's all! When calling the `json` constructor with your type, your custom `to_json` method will be automatically called.\nLikewise, when calling `get\u003cyour_type\u003e()` or `get_to(your_type\u0026)`, the `from_json` method will be called.\n\nSome important things:\n\n* Those methods **MUST** be in your type's namespace (which can be the global namespace), or the library will not be able to locate them (in this example, they are in namespace `ns`, where `person` is defined).\n* Those methods **MUST** be available (e.g., properly headers must be included) everywhere you use these conversions. Look at [issue 1108](https://github.com/nlohmann/json/issues/1108) for errors that may occur otherwise.\n* When using `get\u003cyour_type\u003e()`, `your_type` **MUST** be [DefaultConstructible](https://en.cppreference.com/w/cpp/named_req/DefaultConstructible). (There is a way to bypass this requirement described later.)\n* In function `from_json`, use function [`at()`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a93403e803947b86f4da2d1fb3345cf2c.html#a93403e803947b86f4da2d1fb3345cf2c) to access the object values rather than `operator[]`. In case a key does not exist, `at` throws an exception that you can handle, whereas `operator[]` exhibits undefined behavior.\n* You do not need to add serializers or deserializers for STL types like `std::vector`: the library already implements these.\n\n\n#### How do I convert third-party types?\n\nThis requires a bit more advanced technique. But first, let's see how this conversion mechanism works:\n\nThe library uses **JSON Serializers** to convert types to json.\nThe default serializer for `nlohmann::json` is `nlohmann::adl_serializer` (ADL means [Argument-Dependent Lookup](https://en.cppreference.com/w/cpp/language/adl)).\n\nIt is implemented like this (simplified):\n\n```cpp\ntemplate \u003ctypename T\u003e\nstruct adl_serializer {\n    static void to_json(json\u0026 j, const T\u0026 value) {\n        // calls the \"to_json\" method in T's namespace\n    }\n\n    static void from_json(const json\u0026 j, T\u0026 value) {\n        // same thing, but with the \"from_json\" method\n    }\n};\n```\n\nThis serializer works fine when you have control over the type's namespace. However, what about `boost::optional` or `std::filesystem::path` (C++17)? Hijacking the `boost` namespace is pretty bad, and it's illegal to add something other than template specializations to `std`...\n\nTo solve this, you need to add a specialization of `adl_serializer` to the `nlohmann` namespace, here's an example:\n\n```cpp\n// partial specialization (full specialization works too)\nnamespace nlohmann {\n    template \u003ctypename T\u003e\n    struct adl_serializer\u003cboost::optional\u003cT\u003e\u003e {\n        static void to_json(json\u0026 j, const boost::optional\u003cT\u003e\u0026 opt) {\n            if (opt == boost::none) {\n                j = nullptr;\n            } else {\n              j = *opt; // this will call adl_serializer\u003cT\u003e::to_json which will\n                        // find the free function to_json in T's namespace!\n            }\n        }\n\n        static void from_json(const json\u0026 j, boost::optional\u003cT\u003e\u0026 opt) {\n            if (j.is_null()) {\n                opt = boost::none;\n            } else {\n                opt = j.get\u003cT\u003e(); // same as above, but with\n                                  // adl_serializer\u003cT\u003e::from_json\n            }\n        }\n    };\n}\n```\n\n#### How can I use `get()` for non-default constructible/non-copyable types?\n\nThere is a way, if your type is [MoveConstructible](https://en.cppreference.com/w/cpp/named_req/MoveConstructible). You will need to specialize the `adl_serializer` as well, but with a special `from_json` overload:\n\n```cpp\nstruct move_only_type {\n    move_only_type() = delete;\n    move_only_type(int ii): i(ii) {}\n    move_only_type(const move_only_type\u0026) = delete;\n    move_only_type(move_only_type\u0026\u0026) = default;\n\n    int i;\n};\n\nnamespace nlohmann {\n    template \u003c\u003e\n    struct adl_serializer\u003cmove_only_type\u003e {\n        // note: the return type is no longer 'void', and the method only takes\n        // one argument\n        static move_only_type from_json(const json\u0026 j) {\n            return {j.get\u003cint\u003e()};\n        }\n\n        // Here's the catch! You must provide a to_json method! Otherwise you\n        // will not be able to convert move_only_type to json, since you fully\n        // specialized adl_serializer on that type\n        static void to_json(json\u0026 j, move_only_type t) {\n            j = t.i;\n        }\n    };\n}\n```\n\n#### Can I write my own serializer? (Advanced use)\n\nYes. You might want to take a look at [`unit-udt.cpp`](https://github.com/nlohmann/json/blob/develop/test/src/unit-udt.cpp) in the test suite, to see a few examples.\n\nIf you write your own serializer, you'll need to do a few things:\n\n- use a different `basic_json` alias than `nlohmann::json` (the last template parameter of `basic_json` is the `JSONSerializer`)\n- use your `basic_json` alias (or a template parameter) in all your `to_json`/`from_json` methods\n- use `nlohmann::to_json` and `nlohmann::from_json` when you need ADL\n\nHere is an example, without simplifications, that only accepts types with a size \u003c= 32, and uses ADL.\n\n```cpp\n// You should use void as a second template argument\n// if you don't need compile-time checks on T\ntemplate\u003ctypename T, typename SFINAE = typename std::enable_if\u003csizeof(T) \u003c= 32\u003e::type\u003e\nstruct less_than_32_serializer {\n    template \u003ctypename BasicJsonType\u003e\n    static void to_json(BasicJsonType\u0026 j, T value) {\n        // we want to use ADL, and call the correct to_json overload\n        using nlohmann::to_json; // this method is called by adl_serializer,\n                                 // this is where the magic happens\n        to_json(j, value);\n    }\n\n    template \u003ctypename BasicJsonType\u003e\n    static void from_json(const BasicJsonType\u0026 j, T\u0026 value) {\n        // same thing here\n        using nlohmann::from_json;\n        from_json(j, value);\n    }\n};\n```\n\nBe **very** careful when reimplementing your serializer, you can stack overflow if you don't pay attention:\n\n```cpp\ntemplate \u003ctypename T, void\u003e\nstruct bad_serializer\n{\n    template \u003ctypename BasicJsonType\u003e\n    static void to_json(BasicJsonType\u0026 j, const T\u0026 value) {\n      // this calls BasicJsonType::json_serializer\u003cT\u003e::to_json(j, value);\n      // if BasicJsonType::json_serializer == bad_serializer ... oops!\n      j = value;\n    }\n\n    template \u003ctypename BasicJsonType\u003e\n    static void to_json(const BasicJsonType\u0026 j, T\u0026 value) {\n      // this calls BasicJsonType::json_serializer\u003cT\u003e::from_json(j, value);\n      // if BasicJsonType::json_serializer == bad_serializer ... oops!\n      value = j.template get\u003cT\u003e(); // oops!\n    }\n};\n```\n\n### Specializing enum conversion\n\nBy default, enum values are serialized to JSON as integers. In some cases this could result in undesired behavior. If an enum is modified or re-ordered after data has been serialized to JSON, the later de-serialized JSON data may be undefined or a different enum value than was originally intended.\n\nIt is possible to more precisely specify how a given enum is mapped to and from JSON as shown below:\n\n```cpp\n// example enum type declaration\nenum TaskState {\n    TS_STOPPED,\n    TS_RUNNING,\n    TS_COMPLETED,\n    TS_INVALID=-1,\n};\n\n// map TaskState values to JSON as strings\nNLOHMANN_JSON_SERIALIZE_ENUM( TaskState, {\n    {TS_INVALID, nullptr},\n    {TS_STOPPED, \"stopped\"},\n    {TS_RUNNING, \"running\"},\n    {TS_COMPLETED, \"completed\"},\n});\n```\n\nThe `NLOHMANN_JSON_SERIALIZE_ENUM()` macro declares a set of `to_json()` / `from_json()` functions for type `TaskState` while avoiding repetition and boilerplate serilization code.\n\n**Usage:**\n\n```cpp\n// enum to JSON as string\njson j = TS_STOPPED;\nassert(j == \"stopped\");\n\n// json string to enum\njson j3 = \"running\";\nassert(j3.get\u003cTaskState\u003e() == TS_RUNNING);\n\n// undefined json value to enum (where the first map entry above is the default)\njson jPi = 3.14;\nassert(jPi.get\u003cTaskState\u003e() == TS_INVALID );\n```\n\nJust as in [Arbitrary Type Conversions](#arbitrary-types-conversions) above,\n- `NLOHMANN_JSON_SERIALIZE_ENUM()` MUST be declared in your enum type's namespace (which can be the global namespace), or the library will not be able to locate it and it will default to integer serialization.\n- It MUST be available (e.g., proper headers must be included) everywhere you use the conversions.\n\nOther Important points:\n- When using `get\u003cENUM_TYPE\u003e()`, undefined JSON values will default to the first pair specified in your map. Select this default pair carefully.\n- If an enum or JSON value is specified more than once in your map, the first matching occurrence from the top of the map will be returned when converting to or from JSON.\n\n### Binary formats (BSON, CBOR, MessagePack, and UBJSON)\n\nThough JSON is a ubiquitous data format, it is not a very compact format suitable for data exchange, for instance over a network. Hence, the library supports [BSON](http://bsonspec.org) (Binary JSON), [CBOR](http://cbor.io) (Concise Binary Object Representation), [MessagePack](http://msgpack.org), and [UBJSON](http://ubjson.org) (Universal Binary JSON Specification) to efficiently encode JSON values to byte vectors and to decode such vectors.\n\n```cpp\n// create a JSON value\njson j = R\"({\"compact\": true, \"schema\": 0})\"_json;\n\n// serialize to BSON\nstd::vector\u003cstd::uint8_t\u003e v_bson = json::to_bson(j);\n\n// 0x1B, 0x00, 0x00, 0x00, 0x08, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x00, 0x01, 0x10, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n\n// roundtrip\njson j_from_bson = json::from_bson(v_bson);\n\n// serialize to CBOR\nstd::vector\u003cstd::uint8_t\u003e v_cbor = json::to_cbor(j);\n\n// 0xA2, 0x67, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xF5, 0x66, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00\n\n// roundtrip\njson j_from_cbor = json::from_cbor(v_cbor);\n\n// serialize to MessagePack\nstd::vector\u003cstd::uint8_t\u003e v_msgpack = json::to_msgpack(j);\n\n// 0x82, 0xA7, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xC3, 0xA6, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00\n\n// roundtrip\njson j_from_msgpack = json::from_msgpack(v_msgpack);\n\n// serialize to UBJSON\nstd::vector\u003cstd::uint8_t\u003e v_ubjson = json::to_ubjson(j);\n\n// 0x7B, 0x69, 0x07, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x54, 0x69, 0x06, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x69, 0x00, 0x7D\n\n// roundtrip\njson j_from_ubjson = json::from_ubjson(v_ubjson);\n```\n\n\n## Supported compilers\n\nThough it's 2019 already, the support for C++11 is still a bit sparse. Currently, the following compilers are known to work:\n\n- GCC 4.8 - 9.0 (and possibly later)\n- Clang 3.4 - 8.0 (and possibly later)\n- Intel C++ Compiler 17.0.2 (and possibly later)\n- Microsoft Visual C++ 2015 / Build Tools 14.0.25123.0 (and possibly later)\n- Microsoft Visual C++ 2017 / Build Tools 15.5.180.51428 (and possibly later)\n\nI would be happy to learn about other compilers/versions.\n\nPlease note:\n\n- GCC 4.8 has a bug [57824](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57824)): multiline raw strings cannot be the arguments to macros. Don't use multiline raw strings directly in macros with this compiler.\n- Android defaults to using very old compilers and C++ libraries. To fix this, add the following to your `Application.mk`. This will switch to the LLVM C++ library, the Clang compiler, and enable C++11 and other features disabled by default.\n\n    ```\n    APP_STL := c++_shared\n    NDK_TOOLCHAIN_VERSION := clang3.6\n    APP_CPPFLAGS += -frtti -fexceptions\n    ```\n\n    The code compiles successfully with [Android NDK](https://developer.android.com/ndk/index.html?hl=ml), Revision 9 - 11 (and possibly later) and [CrystaX's Android NDK](https://www.crystax.net/en/android/ndk) version 10.\n\n- For GCC running on MinGW or Android SDK, the error `'to_string' is not a member of 'std'` (or similarly, for `strtod`) may occur. Note this is not an issue with the code,  but rather with the compiler itself. On Android, see above to build with a newer environment.  For MinGW, please refer to [this site](http://tehsausage.com/mingw-to-string) and [this discussion](https://github.com/nlohmann/json/issues/136) for information on how to fix this bug. For Android NDK using `APP_STL := gnustl_static`, please refer to [this discussion](https://github.com/nlohmann/json/issues/219).\n\n- Unsupported versions of GCC and Clang are rejected by `#error` directives. This can be switched off by defining `JSON_SKIP_UNSUPPORTED_COMPILER_CHECK`. Note that you can expect no support in this case.\n\nThe following compilers are currently used in continuous integration at [Travis](https://travis-ci.org/nlohmann/json) and [AppVeyor](https://ci.appveyor.com/project/nlohmann/json):\n\n| Compiler        | Operating System             | Version String |\n|-----------------|------------------------------|----------------|\n| GCC 4.8.5       | Ubuntu 14.04.5 LTS           | g++-4.8 (Ubuntu 4.8.5-2ubuntu1~14.04.2) 4.8.5 |\n| GCC 4.9.4       | Ubuntu 14.04.1 LTS           | g++-4.9 (Ubuntu 4.9.4-2ubuntu1~14.04.1) 4.9.4 |\n| GCC 5.5.0       | Ubuntu 14.04.1 LTS           | g++-5 (Ubuntu 5.5.0-12ubuntu1~14.04) 5.5.0 20171010 |\n| GCC 6.4.0       | Ubuntu 14.04.1 LTS           | g++-6 (Ubuntu 6.4.0-17ubuntu1~14.04) 6.4.0 20180424 |\n| GCC 7.3.0       | Ubuntu 14.04.1 LTS           | g++-7 (Ubuntu 7.3.0-21ubuntu1~14.04) 7.3.0 |\n| GCC 7.3.0       | Windows Server 2012 R2 (x64) | g++ (x86_64-posix-seh-rev0, Built by MinGW-W64 project) 7.3.0 |\n| GCC 8.1.0       | Ubuntu 14.04.1 LTS           | g++-8 (Ubuntu 8.1.0-5ubuntu1~14.04) 8.1.0 |\n| Clang 3.5.0     | Ubuntu 14.04.1 LTS           | clang version 3.5.0-4ubuntu2~trusty2 (tags/RELEASE_350/final) (based on LLVM 3.5.0) |\n| Clang 3.6.2     | Ubuntu 14.04.1 LTS           | clang version 3.6.2-svn240577-1~exp1 (branches/release_36) (based on LLVM 3.6.2) |\n| Clang 3.7.1     | Ubuntu 14.04.1 LTS           | clang version 3.7.1-svn253571-1~exp1 (branches/release_37) (based on LLVM 3.7.1) |\n| Clang 3.8.0     | Ubuntu 14.04.1 LTS           | clang version 3.8.0-2ubuntu3~trusty5 (tags/RELEASE_380/final) |\n| Clang 3.9.1     | Ubuntu 14.04.1 LTS           | clang version 3.9.1-4ubuntu3~14.04.3 (tags/RELEASE_391/rc2) |\n| Clang 4.0.1     | Ubuntu 14.04.1 LTS           | clang version 4.0.1-svn305264-1~exp1 (branches/release_40) |\n| Clang 5.0.2     | Ubuntu 14.04.1 LTS           | clang version 5.0.2-svn328729-1~exp1~20180509123505.100 (branches/release_50) |\n| Clang 6.0.1     | Ubuntu 14.04.1 LTS           | clang version 6.0.1-svn334776-1~exp1~20180726133705.85 (branches/release_60) |\n| Clang Xcode 6.4 | OSX 10.10.5 | Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn) |\n| Clang Xcode 7.3 | OSX 10.11.6 | Apple LLVM version 7.3.0 (clang-703.0.31) |\n| Clang Xcode 8.0 | OSX 10.11.6 | Apple LLVM version 8.0.0 (clang-800.0.38) |\n| Clang Xcode 8.1 | OSX 10.12.6 | Apple LLVM version 8.0.0 (clang-800.0.42.1) |\n| Clang Xcode 8.2 | OSX 10.12.6 | Apple LLVM version 8.0.0 (clang-800.0.42.1) |\n| Clang Xcode 8.3 | OSX 10.11.6 | Apple LLVM version 8.1.0 (clang-802.0.38) |\n| Clang Xcode 9.0 | OSX 10.12.6 | Apple LLVM version 9.0.0 (clang-900.0.37) |\n| Clang Xcode 9.1 | OSX 10.12.6 | Apple LLVM version 9.0.0 (clang-900.0.38) |\n| Clang Xcode 9.2 | OSX 10.13.3 | Apple LLVM version 9.1.0 (clang-902.0.39.1) |\n| Clang Xcode 9.3 | OSX 10.13.3 | Apple LLVM version 9.1.0 (clang-902.0.39.2) |\n| Clang Xcode 10.0 | OSX 10.13.3 | Apple LLVM version 10.0.0 (clang-1000.11.45.2) |\n| Visual Studio 14 2015 | Windows Server 2012 R2 (x64) | Microsoft (R) Build Engine version 14.0.25420.1, MSVC 19.0.24215.1 |\n| Visual Studio 2017 | Windows Server 2016 | Microsoft (R) Build Engine version 15.7.180.61344, MSVC 19.14.26433.0 |\n\n## License\n\n\u003cimg align=\"right\" src=\"http://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png\"\u003e\n\nThe class is licensed under the [MIT License](http://opensource.org/licenses/MIT):\n\nCopyright \u0026copy; 2013-2018 [Niels Lohmann](http://nlohmann.me)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n* * *\n\nThe class contains the UTF-8 Decoder from Bjoern Hoehrmann which is licensed under the [MIT License](http://opensource.org/licenses/MIT) (see above). Copyright \u0026copy; 2008-2009 [Björn Hoehrmann](http://bjoern.hoehrmann.de/) \u003cbjoern@hoehrmann.de\u003e\n\nThe class contains a slightly modified version of the Grisu2 algorithm from Florian Loitsch which is licensed under the [MIT License](http://opensource.org/licenses/MIT) (see above). Copyright \u0026copy; 2009 [Florian Loitsch](http://florian.loitsch.com/)\n\n## Contact\n\nIf you have questions regarding the library, I would like to invite you to [open an issue at GitHub](https://github.com/nlohmann/json/issues/new). Please describe your request, problem, or question as detailed as possible, and also mention the version of the library you are using as well as the version of your compiler and operating system. Opening an issue at GitHub allows other users and contributors to this library to collaborate. For instance, I have little experience with MSVC, and most issues in this regard have been solved by a growing community. If you have a look at the [closed issues](https://github.com/nlohmann/json/issues?q=is%3Aissue+is%3Aclosed), you will see that we react quite timely in most cases.\n\nOnly if your request would contain confidential information, please [send me an email](mailto:mail@nlohmann.me). For encrypted messages, please use [this key](https://keybase.io/nlohmann/pgp_keys.asc).\n\n## Security\n\n[Commits by Niels Lohmann](https://github.com/nlohmann/json/commits) and [releases](https://github.com/nlohmann/json/releases) are signed with this [PGP Key](https://keybase.io/nlohmann/pgp_keys.asc?fingerprint=797167ae41c0a6d9232e48457f3cea63ae251b69).\n\n## Thanks\n\nI deeply appreciate the help of the following people.\n\n\u003cimg src=\"https://raw.githubusercontent.com/nlohmann/json/develop/doc/avatars.png\" align=\"right\"\u003e\n\n- [Teemperor](https://github.com/Teemperor) implemented CMake support and lcov integration, realized escape and Unicode handling in the string parser, and fixed the JSON serialization.\n- [elliotgoodrich](https://github.com/elliotgoodrich) fixed an issue with double deletion in the iterator classes.\n- [kirkshoop](https://github.com/kirkshoop) made the iterators of the class composable to other libraries.\n- [wancw](https://github.com/wanwc) fixed a bug that hindered the class to compile with Clang.\n- Tomas Åblad found a bug in the iterator implementation.\n- [Joshua C. Randall](https://github.com/jrandall) fixed a bug in the floating-point serialization.\n- [Aaron Burghardt](https://github.com/aburgh) implemented code to parse streams incrementally. Furthermore, he greatly improved the parser class by allowing the definition of a filter function to discard undesired elements while parsing.\n- [Daniel Kopeček](https://github.com/dkopecek) fixed a bug in the compilation with GCC 5.0.\n- [Florian Weber](https://github.com/Florianjw) fixed a bug in and improved the performance of the comparison operators.\n- [Eric Cornelius](https://github.com/EricMCornelius) pointed out a bug in the handling with NaN and infinity values. He also improved the performance of the string escaping.\n- [易思龙](https://github.com/likebeta) implemented a conversion from anonymous enums.\n- [kepkin](https://github.com/kepkin) patiently pushed forward the support for Microsoft Visual studio.\n- [gregmarr](https://github.com/gregmarr) simplified the implementation of reverse iterators and helped with numerous hints and improvements. In particular, he pushed forward the implementation of user-defined types.\n- [Caio Luppi](https://github.com/caiovlp) fixed a bug in the Unicode handling.\n- [dariomt](https://github.com/dariomt) fixed some typos in the examples.\n- [Daniel Frey](https://github.com/d-frey) cleaned up some pointers and implemented exception-safe memory allocation.\n- [Colin Hirsch](https://github.com/ColinH) took care of a small namespace issue.\n- [Huu Nguyen](https://github.com/whoshuu) correct a variable name in the documentation.\n- [Silverweed](https://github.com/silverweed) overloaded `parse()` to accept an rvalue reference.\n- [dariomt](https://github.com/dariomt) fixed a subtlety in MSVC type support and implemented the `get_ref()` function to get a reference to stored values.\n- [ZahlGraf](https://github.com/ZahlGraf) added a workaround that allows compilation using Android NDK.\n- [whackashoe](https://github.com/whackashoe) replaced a function that was marked as unsafe by Visual Studio.\n- [406345](https://github.com/406345) fixed two small warnings.\n- [Glen Fernandes](https://github.com/glenfe) noted a potential portability problem in the `has_mapped_type` function.\n- [Corbin Hughes](https://github.com/nibroc) fixed some typos in the contribution guidelines.\n- [twelsby](https://github.com/twelsby) fixed the array subscript operator, an issue that failed the MSVC build, and floating-point parsing/dumping. He further added support for unsigned integer numbers and implemented better roundtrip support for parsed numbers.\n- [Volker Diels-Grabsch](https://github.com/vog) fixed a link in the README file.\n- [msm-](https://github.com/msm-) added support for American Fuzzy Lop.\n- [Annihil](https://github.com/Annihil) fixed an example in the README file.\n- [Themercee](https://github.com/Themercee) noted a wrong URL in the README file.\n- [Lv Zheng](https://github.com/lv-zheng) fixed a namespace issue with `int64_t` and `uint64_t`.\n- [abc100m](https://github.com/abc100m) analyzed the issues with GCC 4.8 and proposed a [partial solution](https://github.com/nlohmann/json/pull/212).\n- [zewt](https://github.com/zewt) added useful notes to the README file about Android.\n- [Róbert Márki](https://github.com/robertmrk) added a fix to use move iterators and improved the integration via CMake.\n- [Chris Kitching](https://github.com/ChrisKitching) cleaned up the CMake files.\n- [Tom Needham](https://github.com/06needhamt) fixed a subtle bug with MSVC 2015 which was also proposed by [Michael K.](https://github.com/Epidal).\n- [Mário Feroldi](https://github.com/thelostt) fixed a small typo.\n- [duncanwerner](https://github.com/duncanwerner) found a really embarrassing performance regression in the 2.0.0 release.\n- [Damien](https://github.com/dtoma) fixed one of the last conversion warnings.\n- [Thomas Braun](https://github.com/t-b) fixed a warning in a test case.\n- [Théo DELRIEU](https://github.com/theodelrieu) patiently and constructively oversaw the long way toward [iterator-range parsing](https://github.com/nlohmann/json/issues/290). He also implemented the magic behind the serialization/deserialization of user-defined types and split the single header file into smaller chunks.\n- [Stefan](https://github.com/5tefan) fixed a minor issue in the documentation.\n- [Vasil Dimov](https://github.com/vasild) fixed the documentation regarding conversions from `std::multiset`.\n- [ChristophJud](https://github.com/ChristophJud) overworked the CMake files to ease project inclusion.\n- [Vladimir Petrigo](https://github.com/vpetrigo) made a SFINAE hack more readable and added Visual Studio 17 to the build matrix.\n- [Denis Andrejew](https://github.com/seeekr) fixed a grammar issue in the README file.\n- [Pierre-Antoine Lacaze](https://github.com/palacaze) found a subtle bug in the `dump()` function.\n- [TurpentineDistillery](https://github.com/TurpentineDistillery) pointed to [`std::locale::classic()`](https://en.cppreference.com/w/cpp/locale/locale/classic) to avoid too much locale joggling, found some nice performance improvements in the parser, improved the benchmarking code, and realized locale-independent number parsing and printing.\n- [cgzones](https://github.com/cgzones) had an idea how to fix the Coverity scan.\n- [Jared Grubb](https://github.com/jaredgrubb) silenced a nasty documentation warning.\n- [Yixin Zhang](https://github.com/qwename) fixed an integer overflow check.\n- [Bosswestfalen](https://github.com/Bosswestfalen) merged two iterator classes into a smaller one.\n- [Daniel599](https://github.com/Daniel599) helped to get Travis execute the tests with Clang's sanitizers.\n- [Jonathan Lee](https://github.com/vjon) fixed an example in the README file.\n- [gnzlbg](https://github.com/gnzlbg) supported the implementation of user-defined types.\n- [Alexej Harm](https://github.com/qis) helped to get the user-defined types working with Visual Studio.\n- [Jared Grubb](https://github.com/jaredgrubb) supported the implementation of user-defined types.\n- [EnricoBilla](https://github.com/EnricoBilla) noted a typo in an example.\n- [Martin Hořeňovský](https://github.com/horenmar) found a way for a 2x speedup for the compilation time of the test suite.\n- [ukhegg](https://github.com/ukhegg) found proposed an improvement for the examples section.\n- [rswanson-ihi](https://github.com/rswanson-ihi) noted a typo in the README.\n- [Mihai Stan](https://github.com/stanmihai4) fixed a bug in the comparison with `nullptr`s.\n- [Tushar Maheshwari](https://github.com/tusharpm) added [cotire](https://github.com/sakra/cotire) support to speed up the compilation.\n- [TedLyngmo](https://github.com/TedLyngmo) noted a typo in the README, removed unnecessary bit arithmetic, and fixed some `-Weffc++` warnings.\n- [Krzysztof Woś](https://github.com/krzysztofwos) made exceptions more visible.\n- [ftillier](https://github.com/ftillier) fixed a compiler warning.\n- [tinloaf](https://github.com/tinloaf) made sure all pushed warnings are properly popped.\n- [Fytch](https://github.com/Fytch) found a bug in the documentation.\n- [Jay Sistar](https://github.com/Type1J) implemented a Meson build description.\n- [Henry Lee](https://github.com/HenryRLee) fixed a warning in ICC and improved the iterator implementation.\n- [Vincent Thiery](https://github.com/vthiery) maintains a package for the Conan package manager.\n- [Steffen](https://github.com/koemeet) fixed a potential issue with MSVC and `std::min`.\n- [Mike Tzou](https://github.com/Chocobo1) fixed some typos.\n- [amrcode](https://github.com/amrcode) noted a misleading documentation about comparison of floats.\n- [Oleg Endo](https://github.com/olegendo) reduced the memory consumption by replacing `\u003ciostream\u003e` with `\u003ciosfwd\u003e`.\n- [dan-42](https://github.com/dan-42) cleaned up the CMake files to simplify including/reusing of the library.\n- [Nikita Ofitserov](https://github.com/himikof) allowed for moving values from initializer lists.\n- [Greg Hurrell](https://github.com/wincent) fixed a typo.\n- [Dmitry Kukovinets](https://github.com/DmitryKuk) fixed a typo.\n- [kbthomp1](https://github.com/kbthomp1) fixed an issue related to the Intel OSX compiler.\n- [Markus Werle](https://github.com/daixtrose) fixed a typo.\n- [WebProdPP](https://github.com/WebProdPP) fixed a subtle error in a precondition check.\n- [Alex](https://github.com/leha-bot) noted an error in a code sample.\n- [Tom de Geus](https://github.com/tdegeus) reported some warnings with ICC and helped fixing them.\n- [Perry Kundert](https://github.com/pjkundert) simplified reading from input streams.\n- [Sonu Lohani](https://github.com/sonulohani) fixed a small compilation error.\n- [Jamie Seward](https://github.com/jseward) fixed all MSVC warnings.\n- [Nate Vargas](https://github.com/eld00d) added a Doxygen tag file.\n- [pvleuven](https://github.com/pvleuven) helped fixing a warning in ICC.\n- [Pavel](https://github.com/crea7or) helped fixing some warnings in MSVC.\n- [Jamie Seward](https://github.com/jseward) avoided unnecessary string copies in `find()` and `count()`.\n- [Mitja](https://github.com/Itja) fixed some typos.\n- [Jorrit Wronski](https://github.com/jowr) updated the Hunter package links.\n- [Matthias Möller](https://github.com/TinyTinni) added a `.natvis` for the MSVC debug view.\n- [bogemic](https://github.com/bogemic) fixed some C++17 deprecation warnings.\n- [Eren Okka](https://github.com/erengy) fixed some MSVC warnings.\n- [abolz](https://github.com/abolz) integrated the Grisu2 algorithm for proper floating-point formatting, allowing more roundtrip checks to succeed.\n- [Vadim Evard](https://github.com/Pipeliner) fixed a Markdown issue in the README.\n- [zerodefect](https://github.com/zerodefect) fixed a compiler warning.\n- [Kert](https://github.com/kaidokert) allowed to template the string type in the serialization and added the possibility to override the exceptional behavior.\n- [mark-99](https://github.com/mark-99) helped fixing an ICC error.\n- [Patrik Huber](https://github.com/patrikhuber) fixed links in the README file.\n- [johnfb](https://github.com/johnfb) found a bug in the implementation of CBOR's indefinite length strings.\n- [Paul Fultz II](https://github.com/pfultz2) added a note on the cget package manager.\n- [Wilson Lin](https://github.com/wla80) made the integration section of the README more concise.\n- [RalfBielig](https://github.com/ralfbielig) detected and fixed a memory leak in the parser callback.\n- [agrianius](https://github.com/agrianius) allowed to dump JSON to an alternative string type.\n- [Kevin Tonon](https://github.com/ktonon) overworked the C++11 compiler checks in CMake.\n- [Axel Huebl](https://github.com/ax3l) simplified a CMake check and added support for the [Spack package manager](https://spack.io).\n- [Carlos O'Ryan](https://github.com/coryan) fixed a typo.\n- [James Upjohn](https://github.com/jammehcow) fixed a version number in the compilers section.\n- [Chuck Atkins](https://github.com/chuckatkins) adjusted the CMake files to the CMake packaging guidelines and provided documentation for the CMake integration.\n- [Jan Schöppach](https://github.com/dns13) fixed a typo.\n- [martin-mfg](https://github.com/martin-mfg) fixed a typo.\n- [Matthias Möller](https://github.com/TinyTinni) removed the dependency from `std::stringstream`.\n- [agrianius](https://github.com/agrianius) added code to use alternative string implementations.\n- [Daniel599](https://github.com/Daniel599) allowed to use more algorithms with the `items()` function.\n- [Julius Rakow](https://github.com/jrakow) fixed the Meson include directory and fixed the links to [cppreference.com](cppreference.com).\n- [Sonu Lohani](https://github.com/sonulohani) fixed the compilation with MSVC 2015 in debug mode.\n- [grembo](https://github.com/grembo) fixed the test suite and re-enabled several test cases.\n- [Hyeon Kim](https://github.com/simnalamburt) introduced the macro `JSON_INTERNAL_CATCH` to control the exception handling inside the library.\n- [thyu](https://github.com/thyu) fixed a compiler warning.\n- [David Guthrie](https://github.com/LEgregius) fixed a subtle compilation error with Clang 3.4.2.\n- [Dennis Fischer](https://github.com/dennisfischer) allowed to call `find_package` without installing the library.\n- [Hyeon Kim](https://github.com/simnalamburt) fixed an issue with a double macro definition.\n- [Ben Berman](https://github.com/rivertam) made some error messages more understandable.\n- [zakalibit](https://github.com/zakalibit) fixed a compilation problem with the Intel C++ compiler.\n- [mandreyel](https://github.com/mandreyel) fixed a compilation problem.\n- [Kostiantyn Ponomarenko](https://github.com/koponomarenko) added version and license information to the Meson build file.\n- [Henry Schreiner](https://github.com/henryiii) added support for GCC 4.8.\n- [knilch](https://github.com/knilch0r) made sure the test suite does not stall when run in the wrong directory.\n- [Antonio Borondo](https://github.com/antonioborondo) fixed an MSVC 2017 warning.\n- [Dan Gendreau](https://github.com/dgendreau) implemented the `NLOHMANN_JSON_SERIALIZE_ENUM` macro to quickly define a enum/JSON mapping.\n- [efp](https://github.com/efp) added line and column information to parse errors.\n- [julian-becker](https://github.com/julian-becker) added BSON support.\n- [Pratik Chowdhury](https://github.com/pratikpc) added support for structured bindings.\n- [David Avedissian](https://github.com/davedissian) added support for Clang 5.0.1 (PS4 version).\n- [Jonathan Dumaresq](https://github.com/dumarjo) implemented an input adapter to read from `FILE*`.\n- [kjpus](https://github.com/kjpus) fixed a link in the documentation.\n- [Manvendra Singh](https://github.com/manu-chroma) fixed a typo in the documentation.\n- [ziggurat29](https://github.com/ziggurat29) fixed an MSVC warning.\n- [Sylvain Corlay](https://github.com/SylvainCorlay) added code to avoid an issue with MSVC.\n- [mefyl](https://github.com/mefyl) fixed a bug when JSON was parsed from an input stream.\n- [Millian Poquet](https://github.com/mpoquet) allowed to install the library via Meson.\n\nThanks a lot for helping out! Please [let me know](mailto:mail@nlohmann.me) if I forgot someone.\n\n\n## Used third-party tools\n\nThe library itself consists of a single header file licensed under the MIT license. However, it is built, tested, documented, and whatnot using a lot of third-party tools and services. Thanks a lot!\n\n- [**amalgamate.py - Amalgamate C source and header files**](https://github.com/edlund/amalgamate) to create a single header file\n- [**American fuzzy lop**](http://lcamtuf.coredump.cx/afl/) for fuzz testing\n- [**AppVeyor**](https://www.appveyor.com) for [continuous integration](https://ci.appveyor.com/project/nlohmann/json) on Windows\n- [**Artistic Style**](http://astyle.sourceforge.net) for automatic source code identation\n- [**Catch**](https://github.com/philsquared/Catch) for the unit tests\n- [**Clang**](http://clang.llvm.org) for compilation with code sanitizers\n- [**CMake**](https://cmake.org) for build automation\n- [**Codacity**](https://www.codacy.com) for further [code analysis](https://www.codacy.com/app/nlohmann/json)\n- [**Coveralls**](https://coveralls.io) to measure [code coverage](https://coveralls.io/github/nlohmann/json)\n- [**Coverity Scan**](https://scan.coverity.com) for [static analysis](https://scan.coverity.com/projects/nlohmann-json)\n- [**cppcheck**](http://cppcheck.sourceforge.net) for static analysis\n- [**Doxygen**](http://www.stack.nl/~dimitri/doxygen/) to generate [documentation](https://nlohmann.github.io/json/)\n- [**git-update-ghpages**](https://github.com/rstacruz/git-update-ghpages) to upload the documentation to gh-pages\n- [**GitHub Changelog Generator**](https://github.com/skywinder/github-changelog-generator) to generate the [ChangeLog](https://github.com/nlohmann/json/blob/develop/ChangeLog.md)\n- [**Google Benchmark**](https://github.com/google/benchmark) to implement the benchmarks\n- [**libFuzzer**](http://llvm.org/docs/LibFuzzer.html) to implement fuzz testing for OSS-Fuzz\n- [**OSS-Fuzz**](https://github.com/google/oss-fuzz) for continuous fuzz testing of the library ([project repository](https://github.com/google/oss-fuzz/tree/master/projects/json))\n- [**Probot**](https://probot.github.io) for automating maintainer tasks such as closing stale issues, requesting missing information, or detecting toxic comments.\n- [**send_to_wandbox**](https://github.com/nlohmann/json/blob/develop/doc/scripts/send_to_wandbox.py) to send code examples to [Wandbox](http://melpon.org/wandbox)\n- [**Travis**](https://travis-ci.org) for [continuous integration](https://travis-ci.org/nlohmann/json) on Linux and macOS\n- [**Valgrind**](http://valgrind.org) to check for correct memory management\n- [**Wandbox**](http://melpon.org/wandbox) for [online examples](https://wandbox.org/permlink/TarF5pPn9NtHQjhf)\n\n\n## Projects using JSON for Modern C++\n\nThe library is currently used in Apple macOS Sierra and iOS 10. I am not sure what they are using the library for, but I am happy that it runs on so many devices.\n\n\n## Notes\n\n- The code contains numerous debug **assertions** which can be switched off by defining the preprocessor macro `NDEBUG`, see the [documentation of `assert`](https://en.cppreference.com/w/cpp/error/assert). In particular, note [`operator[]`](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a233b02b0839ef798942dd46157cc0fe6.html#a233b02b0839ef798942dd46157cc0fe6) implements **unchecked access** for const objects: If the given key is not present, the behavior is undefined (think of a dereferenced null pointer) and yields an [assertion failure](https://github.com/nlohmann/json/issues/289) if assertions are switched on. If you are not sure whether an element in an object exists, use checked access with the [`at()` function](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a73ae333487310e3302135189ce8ff5d8.html#a73ae333487310e3302135189ce8ff5d8).\n- As the exact type of a number is not defined in the [JSON specification](https://tools.ietf.org/html/rfc7159.html), this library tries to choose the best fitting C++ number type automatically. As a result, the type `double` may be used to store numbers which may yield [**floating-point exceptions**](https://github.com/nlohmann/json/issues/181) in certain rare situations if floating-point exceptions have been unmasked in the calling code. These exceptions are not caused by the library and need to be fixed in the calling code, such as by re-masking the exceptions prior to calling library functions.\n- The library supports **Unicode input** as follows:\n  - Only **UTF-8** encoded input is supported which is the default encoding for JSON according to [RFC 7159](https://tools.ietf.org/html/rfc7159.html#section-8.1).\n  - Other encodings such as Latin-1, UTF-16, or UTF-32 are not supported and will yield parse or serialization errors.\n  - [Unicode noncharacters](http://www.unicode.org/faq/private_use.html#nonchar1) will not be replaced by the library.\n  - Invalid surrogates (e.g., incomplete pairs such as `\\uDEAD`) will yield parse errors.\n  - The strings stored in the library are UTF-8 encoded. When using the default string type (`std::string`), note that its length/size functions return the number of stored bytes rather than the number of characters or glyphs.\n- The code can be compiled without C++ **runtime type identification** features; that is, you can use the `-fno-rtti` compiler flag.\n- **Exceptions** are used widely within the library. They can, however, be switched off with either using the compiler flag `-fno-exceptions` or by defining the symbol `JSON_NOEXCEPTION`. In this case, exceptions are replaced by an `abort()` call.\n- By default, the library does not preserve the **insertion order of object elements**. This is standards-compliant, as the [JSON standard](https://tools.ietf.org/html/rfc7159.html) defines objects as \"an unordered collection of zero or more name/value pairs\". If you do want to preserve the insertion order, you can specialize the object type with containers like [`tsl::ordered_map`](https://github.com/Tessil/ordered-map) ([integration](https://github.com/nlohmann/json/issues/546#issuecomment-304447518)) or [`nlohmann::fifo_map`](https://github.com/nlohmann/fifo_map) ([integration](https://github.com/nlohmann/json/issues/485#issuecomment-333652309)).\n\n\n## Execute unit tests\n\nTo compile and run the tests, you need to execute\n\n```sh\n$ mkdir build\n$ cd build\n$ cmake ..\n$ cmake --build .\n$ ctest --output-on-failure\n```\n\nFor more information, have a look at the file [.travis.yml](https://github.com/nlohmann/json/blob/master/.travis.yml).\n","versions":[{"ref":"master","manifest":"targets = [ \"//:json\" ]","lockFile":"manifest = \"9e9b8932730aaccb665423f8a071c9e9cb32bac84a3448ee226b4e21950c808f\"\n\n","buck":"load('//:buckaroo_macros.bzl', 'buckaroo_deps')\nload('//:subdir_glob.bzl', 'subdir_glob')\n\nprebuilt_cxx_library(\n  name = 'json',\n  header_only = True,\n  header_namespace = '',\n  exported_headers = subdir_glob([\n    ('include', '**/*.hpp'),\n  ]),\n  deps = buckaroo_deps(),\n  visibility = [\n    'PUBLIC',\n  ],\n)\n","bazel":"","deps":[],"lock":[]},{"ref":"v3.5.0","manifest":"targets = [ \"//:json\" ]","lockFile":"manifest = \"9e9b8932730aaccb665423f8a071c9e9cb32bac84a3448ee226b4e21950c808f\"\n\n","buck":"load('//:buckaroo_macros.bzl', 'buckaroo_deps')\nload('//:subdir_glob.bzl', 'subdir_glob')\n\nprebuilt_cxx_library(\n  name = 'json',\n  header_only = True,\n  header_namespace = '',\n  exported_headers = subdir_glob([\n    ('include', '**/*.hpp'),\n  ]),\n  deps = buckaroo_deps(),\n  visibility = [\n    'PUBLIC',\n  ],\n)\n","bazel":"","deps":[],"lock":[]}],"updated":"2019-01-18T13:45:10Z","updatedUpstream":"2021-01-13T18:33:20Z","contributors":[{"login":"nemequ","avatarUrl":"https://avatars3.githubusercontent.com/u/1151?u=71fed4857219d2d776011cb35158d8744cc0c783\u0026v=4"},{"login":"wincent","avatarUrl":"https://avatars0.githubusercontent.com/u/7074?u=d203b61eb98e22b3e0c8d09f660c6e1ed7d4f661\u0026v=4"},{"login":"alex-weej","avatarUrl":"https://avatars2.githubusercontent.com/u/15476?v=4"},{"login":"matthewbauer","avatarUrl":"https://avatars2.githubusercontent.com/u/19036?u=631b033694a5ff915b2205ae304a2fae104ba7c7\u0026v=4"},{"login":"wancw","avatarUrl":"https://avatars2.githubusercontent.com/u/28702?u=6d430eb338c967d496b2366ad444ef044f65dda9\u0026v=4"},{"login":"kastiglione","avatarUrl":"https://avatars1.githubusercontent.com/u/43429?u=48f53a465a132966b3c1f8795d66ded49468d6d4\u0026v=4"},{"login":"himikof","avatarUrl":"https://avatars2.githubusercontent.com/u/43698?v=4"},{"login":"berkus","avatarUrl":"https://avatars0.githubusercontent.com/u/80306?u=440974c67ab28a37bf695706ed49826a9f74fb9e\u0026v=4"},{"login":"ColinH","avatarUrl":"https://avatars3.githubusercontent.com/u/113184?u=913c79858b6ac3285df1c37ca6224e9f0a5f4efe\u0026v=4"},{"login":"Klaim","avatarUrl":"https://avatars0.githubusercontent.com/u/142265?v=4"},{"login":"nlohmann","avatarUrl":"https://avatars2.githubusercontent.com/u/159488?v=4"},{"login":"alexreinking","avatarUrl":"https://avatars2.githubusercontent.com/u/169273?u=787c07702f45b0ab4c8bc487496b333dd67f6cf3\u0026v=4"},{"login":"aburgh","avatarUrl":"https://avatars1.githubusercontent.com/u/191582?u=e2a272b1d294b156fa5291c4cdb7e23a1857fb2f\u0026v=4"},{"login":"ahamez","avatarUrl":"https://avatars3.githubusercontent.com/u/199517?v=4"},{"login":"andoma","avatarUrl":"https://avatars2.githubusercontent.com/u/216384?v=4"},{"login":"naszta","avatarUrl":"https://avatars1.githubusercontent.com/u/218727?v=4"},{"login":"vasild","avatarUrl":"https://avatars0.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f\u0026v=4"},{"login":"flopp","avatarUrl":"https://avatars3.githubusercontent.com/u/272596?u=0f8a1e5e88a1a89b97e42fa71eb7edb9c9f72c12\u0026v=4"},{"login":"pjkundert","avatarUrl":"https://avatars1.githubusercontent.com/u/290924?v=4"},{"login":"seeekr","avatarUrl":"https://avatars3.githubusercontent.com/u/302886?v=4"},{"login":"rbuch","avatarUrl":"https://avatars3.githubusercontent.com/u/304273?v=4"},{"login":"chuckatkins","avatarUrl":"https://avatars0.githubusercontent.com/u/320135?v=4"},{"login":"vog","avatarUrl":"https://avatars0.githubusercontent.com/u/412749?u=cd325a7449be7b336b6120974faad45acdf7ab44\u0026v=4"},{"login":"Type1J","avatarUrl":"https://avatars3.githubusercontent.com/u/413028?v=4"},{"login":"mattismyname","avatarUrl":"https://avatars1.githubusercontent.com/u/436227?u=3fc8ac663ee07d9a1c9dcadd8a3b04de1f036fec\u0026v=4"}],"fundingLinks":["https://github.com/nlohmann","http://paypal.me/nlohmann"],"contactLinks":["https://github.com/nlohmann/json/discussions"],"stars":22725,"forks":3945,"topics":["json","json-pointer","json-patch","cbor","msgpack","header-only","stl-containers","json-serialization","json-parser","rfc-6901","rfc-6902","rfc-7159","rfc-7049","json-diff","messagepack","rfc-8259","ubjson","json-merge-patch","bson"]}},"__N_SSG":true},"page":"/packages/[owner]/[name]","query":{"owner":"buckaroo-pm","name":"nlohmann-json"},"buildId":"XEnVUsOG7VkTdg59Wro6f","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-617a3a2c770be2525c7f.js"></script><script src="/_next/static/chunks/main-7d1613afc8c8f43cb50f.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.9b549cceddc4472f1953.js" async=""></script><script src="/_next/static/chunks/pages/_app-3e4ffec4bbf3a45ef50f.js" async=""></script><script src="/_next/static/chunks/c18d713dde5d8f274a9340ae8a63196292880c5e.7af0c42e7b17c91d2be5.js" async=""></script><script src="/_next/static/chunks/pages/packages/%5Bowner%5D/%5Bname%5D-bc25a6cf0982fd349b0a.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_buildManifest.js" async=""></script><script src="/_next/static/XEnVUsOG7VkTdg59Wro6f/_ssgManifest.js" async=""></script></body></html>