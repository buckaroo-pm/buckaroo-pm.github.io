{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from 'next/router';\nimport { get } from 'superagent';\nimport Footer from '../../../components/Footer';\nimport Navigation from '../../../components/Navigation';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport gfm from 'remark-gfm';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport Link from 'next/link';\nimport { dark } from 'react-syntax-highlighter/dist/cjs/styles/hljs/docco';\nimport docco from 'react-syntax-highlighter/dist/cjs/styles/hljs/docco';\nconst renderers = {\n  code: ({\n    language,\n    value\n  }) => {\n    return /*#__PURE__*/_jsx(SyntaxHighlighter, {\n      style: dark,\n      language: language,\n      children: value\n    });\n  }\n};\n\nfunction Tag({\n  name,\n  url\n}) {\n  return /*#__PURE__*/_jsx(\"span\", {\n    className: \"tag\",\n    style: {\n      borderRadius: '5px',\n      padding: '10px',\n      background: 'white',\n      color: 'black',\n      fontSize: '0.7em',\n      margin: '5px'\n    },\n    children: name\n  });\n}\n\nfunction Topics({\n  topics\n}) {\n  return /*#__PURE__*/_jsx(\"div\", {\n    style: {\n      display: 'inline-flex',\n      flexFlow: 'row wrap'\n    },\n    children: topics.map(t => /*#__PURE__*/_jsx(Tag, {\n      name: t\n    }, t))\n  });\n}\n\nfunction Code({\n  content,\n  lang\n}) {\n  return /*#__PURE__*/_jsx(SyntaxHighlighter, {\n    language: lang,\n    style: docco,\n    children: content\n  });\n}\n\nfunction Content({\n  tab: [name, content]\n}) {\n  switch (name) {\n    case \"ReadMe\":\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"ReadMe\"\n        }), /*#__PURE__*/_jsx(ReactMarkdown, {\n          plugins: [gfm],\n          renderers: renderers,\n          children: content\n        })]\n      });\n\n    case \"Buck\":\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"BUCK\"\n        }), /*#__PURE__*/_jsx(Code, {\n          lang: \"python\",\n          content: content\n        })]\n      });\n\n    case \"Bazel\":\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"BUILD\"\n        }), /*#__PURE__*/_jsx(Code, {\n          lang: \"python\",\n          content: content\n        })]\n      });\n\n    case \"Manifest\":\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"buckaroo.toml\"\n        }), /*#__PURE__*/_jsx(Code, {\n          lang: \"toml\",\n          content: content\n        })]\n      });\n\n    case \"LockFile\":\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"Parsed buckaroo.lock.toml\"\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"table\", {\n          children: [/*#__PURE__*/_jsx(\"thead\", {\n            children: /*#__PURE__*/_jsxs(\"tr\", {\n              children: [/*#__PURE__*/_jsx(\"th\", {\n                children: \"Dependency\"\n              }), /*#__PURE__*/_jsx(\"th\", {\n                children: \"Spec\"\n              }), /*#__PURE__*/_jsx(\"th\", {\n                children: \"Resolved\"\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"tbody\", {\n            children: content.map((x, i) => /*#__PURE__*/_jsxs(\"tr\", {\n              children: [/*#__PURE__*/_jsx(\"td\", {\n                children: x.name\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: x.spec.versions.join(', ')\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  target: \"_blank\",\n                  style: {\n                    textDecoration: 'underline',\n                    fontWeight: 'bold'\n                  },\n                  href: `https://${x.uri}/tree/${x.spec.revision}/buckaroo.toml`,\n                  children: x.spec.revision\n                })\n              })]\n            }, i))\n          })]\n        })]\n      });\n\n    default:\n      return /*#__PURE__*/_jsx(\"pre\", {\n        children: content\n      });\n  }\n}\n\nexport default function Packages({\n  data\n}) {\n  const router = useRouter();\n  const {\n    owner,\n    name: pname,\n    tab\n  } = router.query;\n  const {\n    packageName,\n    readme,\n    licence,\n    versions\n  } = data;\n  const tabs = [['ReadMe', readme], ['Buck', !!versions.length && versions[0].buck], ['Bazel', !!versions.length && versions[0].bazel], ['Manifest', !!versions.length && versions[0].manifest], ['LockFile', !!(versions.length && versions[0].lock && versions[0].lock.length) && versions[0].lock], ['Dependencies', !!versions.length && versions[0].deps]].filter(x => x[1]).reduce((a, b) => _objectSpread(_objectSpread({}, a), {}, {\n    [b[0].toLowerCase()]: b\n  }), {});\n  const active = tab || Object.keys(tabs)[0];\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Navigation, {}), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"banner\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"package\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: `/packages/${packageName}/logo.png`\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            children: packageName\n          }), /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              maxWidth: '600px'\n            },\n            children: data.description\n          }), /*#__PURE__*/_jsx(\"br\", {}), data.stars > 0 && /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(\"b\", {\n              children: data.stars\n            })\n          }), data.license && /*#__PURE__*/_jsxs(\"div\", {\n            children: [\"License: \", /*#__PURE__*/_jsx(\"b\", {\n              children: licence\n            })]\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(Topics, _objectSpread({}, data))]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        display: 'flex',\n        width: '100%',\n        justifyContent: 'center',\n        marginTop: '-2.7em'\n      },\n      children: Object.entries(tabs).map(([i, [name]]) => /*#__PURE__*/_jsx(Link, {\n        href: `/packages/${owner}/${pname}?tab=${name.toLowerCase()}`,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"tab-control\",\n          style: {\n            padding: '0.5em',\n            borderRadius: '0.2em',\n            fontSize: '1.5em',\n            background: active == i ? 'white' : 'none',\n            color: active == i ? 'black' : 'white',\n            border: 'solid 1px #fff'\n          },\n          children: name\n        })\n      }, name))\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"banner white\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"view column\",\n        children: /*#__PURE__*/_jsx(Content, {\n          tab: tabs[active]\n        })\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}\nexport function getServerSideProps(context) {\n  console.log(context);\n\n  const data = require(`../../../public/packages/buckaroo-pm/${context.params.name}/full.json`); //console.log(\"data\");\n\n\n  return {\n    props: {\n      data\n    }\n  };\n} //Object.assign(Packages, {getInitialProps});","map":null,"metadata":{},"sourceType":"module"}